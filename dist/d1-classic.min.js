/*! d1-web v2.5.15 */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return r}));var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=null,this.name=e||"plugin",this.opt={}}var e,n,r;return e=t,(n=[{key:"install",value:function(t){var e=this;t.opt.plug[this.name]||(t.opt.plug[this.name]={});var n=t.opt.plug[this.name];Object.keys(this.opt).forEach((function(t){return t in n?null:n[t]=e.opt[t]})),this.opt=n,this.app=t,this.app.listen("init",(function(t){return e.init()})),this.arrange&&this.app.listen("arrange",(function(t){return e.arrange(t)}))}},{key:"init",value:function(){console.log("plugin.init()")}}])&&i(e.prototype,n),r&&i(e,r),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return r}));
/*! url - url build and arguments */
var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"build",value:function(e,n){if(!e.tagName){var i=e;(e=document.createElement("a")).href=i}var r=t.get(e);Object.keys(n).forEach((function(t){return r[encodeURIComponent(t)]=encodeURIComponent(n[t])}));var o=Object.keys(r).map((function(t){return t+"="+r[t]})).join("&");return e.host?e.protocol+"//"+e.host+e.pathname+(o?"?"+o:"")+e.hash:e.href.replace(/[\?#].*$/,"")+(o?"?"+o:"")+e.hash}},{key:"get",value:function(t,e){if(!t||"A"!=t.tagName)return null;var n,i={},r=t.search?t.search.replace(/^\?/,"").split("&"):[];for(n=0;n<r.length;n++){var o=r[n].split("=");i[o[0]]=decodeURIComponent(o[1]).replace(/\+/," ")}return e?i[e]:i}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return r}));
/*! func - function derorators */
var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"throttle",value:function(t,e){var n,i,r=!1;return function o(){r?(n=this,i=arguments):(t.apply(this,arguments),r=!0,setTimeout((function(){r=!1,i&&(o.apply(n,i),i=n=null)}),e))}}},{key:"delay",value:function(t,e,n){var i=null;return function(){var r=arguments,o=this;n&&i&&clearTimeout(i),i=setTimeout((function(){t.apply(o,r),i=null}),e)}}},{key:"debounce",value:function(e,n){return t.delay(e,n,!0)}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return r}));
/*! date - parse and format date */
var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"parse",value:function(t){var e,n="",i=(t||"").match(/^(\d+)([\-\.\/\s])(\d+)[\-\.\/\s](\d+)(\D(\d+))?(\D(\d+))?(\D(\d+))?(\D(\d+))?$/);return i&&(e="."==i[2]?[4,3,1]:"/"==i[2]?[4,1,3]:[1,3,4],n=new Date(i[e[0]],i[e[1]]-1,i[e[2]],i[6]||0,i[8]||0,i[10]||0,i[12]||0)),n}},{key:"fmt",value:function(e,n,i){var r=e.getFullYear(),o=t.n(e.getMonth()+1),a=t.n(e.getDate()),s=t.n(e.getHours()),u=t.n(e.getMinutes()),l=t.n(e.getSeconds());return("m"==i?o+"/"+a+" "+r:"d"==i?a+"."+o+"."+r:r+"-"+o+"-"+a)+(n&&s+u+l>0?" "+t.n(e.getHours())+":"+t.n(e.getMinutes())+":"+t.n(e.getSeconds()):"")}},{key:"n",value:function(t,e){return("000"+t).substr(-(e||2))}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}()},function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return a}));
/*! app - core of d1-web */
var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sequence=0,this.plugins={},this.handlers={},this.opt={plug:{},debug:0,cAct:"act",cHide:"hide",cToggle:"toggle",cOff:"off",cClose:"close",cJs:"js",hClose:"#cancel",hOk:"#ok",sCancel:"Cancel",sOk:"OK"}}var e,n,r;return e=t,(n=[{key:"init",value:function(t){var e=this;document.body.classList.add(this.opt.cJs),this.fire("start"),t||(t=document.body.dataset.d1)&&(t=this.parse(t)),this.setOpt(t),this.dbg(["opt",this.opt]),this.fire("options"),this.initPlugins(),this.b([window],"hashchange",(function(t){return e.on("hashchange",t)})),this.b([document],["invalid","focus","blur"],(function(t){return e.on(t.type,t)}),!0),this.b([document],["click","keydown","input","change","submit"],(function(t){return e.on(t.type,t)})),location.hash&&this.on("hashchange"),this.fire("after"),this.fire("ready")}},{key:"on",value:function(t,e){this.fire("before",e),this.fire(t,e),this.fire("after",e)}},{key:"arrange",value:function(t){t&&this.fire("arrange",{n:t})}},{key:"setOpt",value:function(t){var e=this;t&&Object.keys(t).forEach((function(n){return e.opt[n]=t[n]}))}},{key:"plug",value:function(t,e){var n=new t;this.plugins[e||n.name]=n}},{key:"initPlugins",value:function(){var t=this;this.opt.disable&&this.opt.disable.forEach((function(e){return delete t.plugins[e]})),this.dbg(["plugins",this.plugins]),Object.keys(this.plugins).forEach((function(e){t.plugins[e].install(t),t.fire("plugin",{name:e,plugin:t.plugins[e]})})),this.fire("init"),this.fire("arrange"),this.fire("plugins")}},{key:"pf",value:function(t,e){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];this.plugins[t]&&this.plugins[t][e]?(n=this.plugins[t])[e].apply(n,r):this.dbg(["no plugin function",t+"."+e+"()"],-1)}},{key:"toggle",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["toggle","toggle"].concat(e))}},{key:"fetch",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["fetch","fetch"].concat(e))}},{key:"dialog",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["dialog","openDialog"].concat(e))}},{key:"fire",value:function(t,e){var n,i=this;(e=null!==(n=e)&&void 0!==n?n:{}).type||(e.type=t),this.dbg(["fire "+t,e]),this.handlers[t]&&this.handlers[t].forEach((function(t){var n;return(null===(n=e)||void 0===n?void 0:n.unfire)?null:t.call(i,e)}))}},{key:"listen",value:function(t,e){this.h(t,"",e)}},{key:"h",value:function(t,e,n,i){var r=this;t instanceof Array?t.forEach((function(t){return r.h(t,e,n,i)})):(this.handlers[t]||(this.handlers[t]=[]),this.handlers[t][i?"unshift":"push"]((function(t){e&&(t.recv=t.target.closest?t.target.closest(e):null),e&&!t.recv||n(t)})))}},{key:"dispatch",value:function(t,e,n){n||(n={bubbles:!0,cancelable:!0,view:window}),"function"==typeof Event&&(e instanceof Array?e.forEach((function(e){return t.dispatchEvent(new Event(e,n))})):t.dispatchEvent(new Event(e,n)))}},{key:"isDebug",value:function(t){return this.opt.debug>(t||0)||-1!=location.href.indexOf("d1debug")}},{key:"dbg",value:function(t,e,n){this.isDebug(e)&&console[n||e<0?"error":"log"](t)}},{key:"seq",value:function(){return++this.sequence}},{key:"a",value:function(t){return t?Array.prototype.slice.call(t):t}},{key:"path",value:function(t,e,n){if(e){"string"===this.typeOf(e)&&(e=e.split("."));for(var i=0;i<e.length;i++)if(e[i]||0===e[i]){if(null===t||void 0===t[e[i]])return n;t=t[e[i]]}}return t}},{key:"q",value:function(t,e){try{return(e||document).querySelector(t)}catch(t){return null}}},{key:"qq",value:function(t,e){try{return this.a((e||document).querySelectorAll(t))}catch(t){return[]}}},{key:"next",value:function(t,e,n){for(;t=t[n?"previousElementSibling":"nextElementSibling"];)if(t.matches(e))return t}},{key:"nn",value:function(t){return t?"string"==typeof t?this.qq(t):t.tagName?[t]:this.a(t):[]}},{key:"b",value:function(t,e,n,i){e||this.e(t,n),n&&this.nn(t).forEach((function(t){return e instanceof Array?e.forEach((function(e){return t.addEventListener(e,(function(t){return n(t)}),i)})):t.addEventListener(e,(function(t){return n(t)}),i)}))}},{key:"e",value:function(t,e){var n=this;e&&this.nn(t).forEach((function(t){return e.call(n,t)}))}},{key:"ee",value:function(t,e,n){this.e(this.qq(e,t),n)}},{key:"cls",value:function(t,e,n,r){var o,a,s=this,u=r?[n,e]:[e,n];u.forEach((function(t,e){return t&&"array"!==s.typeOf(t)?u[e]=t.split(/\s+/).filter((function(t){return t})):null})),u[1]&&(o=t.classList).remove.apply(o,i(u[1])),u[0]&&(a=t.classList).add.apply(a,i(u[0]))}},{key:"typeOf",value:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},{key:"parse",value:function(t,e){var n="";try{n=JSON.parse(t)}catch(i){this.dbg(["JSON parse failed",t],-1),n=!0===e?t:void 0===e?null:e}return n}},{key:"ins",value:function(t,e,n,i,r){var o=document.createElement(t||"span");if("array"===this.typeOf(e)?e.forEach((function(t){return t.nodeType?o.appendChild(t):o.innerHTML+=t})):e&&e.nodeType?o.appendChild(e):e&&(o.innerHTML=e),n)for(var a in"string"===this.typeOf(n)&&(n={className:n}),n)null!==n[a]&&void 0!==n[a]&&(a.match(/-/)?o.setAttribute(a.replace(/^-/,""),n[a]):o[a]=n[a]);return i?r?i.parentNode.insertBefore(o,r<0?i:i.nextSibling):!1===r?i.insertBefore(o,i.firstChild):i.appendChild(o):o}},{key:"clr",value:function(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"x",value:function(t,e,n){return this.ins("a",this.i("close","&#x2715;"),{href:this.opt.hClose,className:n||""},t,e)}},{key:"i",value:function(t,e){return this.plugins.icons?this.plugins.icons.i(t,e):this.ins("span",e||t)}},{key:"vis",value:function(t){return!t.classList.contains(this.opt.cOff)}},{key:"fixIds",value:function(t){var e=this;this.ee(t,"[id]",(function(n){var i=n.id,r="id-"+e.seq();n.id=r,e.ee(t,'a[href="#'+i+'"]',(function(t){return t.href="#"+r})),e.ee(t,'label[for="'+i+'"]',(function(t){return t.htmlFor=r}))}))}}])&&o(e.prototype,n),r&&o(e,r),t}()},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! toggle - togglable interactive components */n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,i,s=a(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,"toggle")).nEsc=0,t.opt={keepHash:!0,mediaSuffixes:["-mobile","-desktop"],dlgUnscroll:!0,qTrg:"[id].target",qPop:".pop>div[id]",qNav:".nav ul",qDlg:".dlg",qTab:".tabs+div>div[id]",qTre:"ul.tree ul",qDrw:".drawer[id]",qAccRoot:"ul.tree.accordion",qAcc:"ul.tree.accordion ul",qGal:".gal>a[id]",qSubMem:".tabs.mem+div>div[id], ul.mem:not(.nav) ul",qDrawer:".drawer[id]:not(.shift)",qTip:'[data-tip=""][title], .tip[title]',qModal:".gal>a[id], .dlg",cMem:"mem",cFade:"fade",cTarget:"target",cToggle:"toggle",hUnhash:"#_"},t}return e=u,(n=[{key:"init",value:function(){var t=this,e=this.app;e.e("a[data-href]",(function(t){return t.href=t.dataset.href})),e.listen("before",(function(e){return"click"==(null==e?void 0:e.type)?t.beforeClick(e):null})),e.listen("keydown",(function(e){return t.onKey(e)})),e.listen("click",(function(e){return t.onClick(e)})),e.h("click",'a[href^="#"]',(function(e){return t.onClickHash(e)})),e.listen("hashchange",(function(e){return t.onHash(e)})),e.listen("esc",(function(e){return t.esc(e)})),e.listen("active",(function(e){return t.hiliteLink(e.n,e.on)})),e.listen("modal",(function(e){return t.modalStyle(e)}));var n=this.opt;this.opt.qTgl=this.opt.mediaSuffixes.concat([""]).map((function(t){return"."+e.opt.cToggle+t})).join(", "),this.opt.qUnpop=[n.qPop,n.qNav,n.qDlg,n.qDrw].join(", "),this.opt.qUnpopOn=[n.qPop,n.qNav,n.qDlg,n.qDrw].map((function(t){return t+":not(."+e.opt.cOff+")"})).join(", "),this.arrangeOnce()}},{key:"arrangeOnce",value:function(){var t=this,e=null,n=this.app,i=this.opt,r=[i.qTrg,i.qPop,i.qNav,i.qDlg,i.qTab,i.qTre,i.qDrw].join(", ");n.e(r,(function(e){return t.initToggler(e)})),this.opt.mediaSuffixes.forEach((function(e){return n.e(t.opt.qTrg+e,(function(n){return t.initToggler(n,e)}))})),n.ee(e,this.opt.qNav+", "+this.opt.qTre,(function(e){return t.attachSubNav(e)})),n.ee(e,this.opt.qGal+":last-child",(function(t){return n.x(t,1)})),n.ee(e,this.opt.qSubMem,(function(e){return e.classList.add(t.opt.cMem)})),n.ee(e,"[id]",(function(e){return t.restoreVisibility(e)})),n.ee(e,this.opt.qTab+":not(."+n.opt.cOff+") ~ [id]:not(."+n.opt.cOff+")",(function(e){return t.tgl(e,0)})),n.ee(e,this.opt.qTab+":first-of-type",(function(e){return n.qq(t.opt.qTab,e.parentNode).filter((function(t){return n.vis(t)})).length?null:t.tgl(n.q(n.q('a[href^="#"]',e.parentNode.previousElementSibling).hash),1)})),n.ee(e,"."+n.opt.cToggle+"[id]",(function(e){return t.hiliteLinks(e)}))}},{key:"arrange",value:function(t){var e=t.n;this.app.ee(e,this.opt.qTip,(function(t){t.setAttribute("data-tip",t.title.replace(/\s\s+/g,"\n")),t.removeAttribute("title")}))}},{key:"modalStyle",value:function(t,e){var n=document.body.classList.contains(this.opt.cFade),i=this.app.q(this.opt.qDlg+":not(."+this.app.opt.cOff+"), "+this.opt.qGal+'[id="'+location.hash.substr(1)+'"]');if(n!==!!i){var r=window.innerWidth-document.documentElement.clientWidth,o=document.body.style;document.body.classList[i?"add":"remove"](this.opt.cFade),this.opt.dlgUnscroll&&(o.overflow=i?"hidden":"",i&&o.paddingRight||(o.paddingRight=i?r+"px":"")),this.app.dbg(["modalStyle",i,o.paddingRight])}if(i&&(null==t?void 0:t.show)){var a=this.app.q('input:not([type="hidden"]), select, textarea, a.btn',i),s=this.app.q(":focus",i);a&&!s&&(this.app.dbg(["focus",i,a,s]),a.focus(),"text"==a.type&&a.select())}}},{key:"esc",value:function(t){this.app.dbg(["esc",t]),t&&t.preventDefault(),this.unpop(),this.addHistory(),this.app.fire("modal",{n:null,src:"esc",show:!1})}},{key:"addHistory",value:function(t){t?history.pushState({},"",t):location.hash&&(location.hash=this.opt.hUnhash,location.hash&&history.replaceState({},"",location.pathname+location.search))}},{key:"onKey",value:function(t){var e=t.keyCode;this.app.dbg(["keydown",e,this.nEsc]),27==e&&this.nEsc>=4&&localStorage.clear(),27==e&&this.app.fire("esc",t),this.nEsc=27==e&&this.nEsc<4?this.nEsc+1:0}},{key:"onHash",value:function(t){var e;if(!(null===(e=t?t.newURL:location.hash)||void 0===e?void 0:e.match(new RegExp(this.opt.hUnhash+"$"))))if(this.app.dbg(["hashchange",location.hash,null==t?void 0:t.newURL]),this.nEsc=0,location.hash&&location.hash!==this.app.opt.hClose)if("#unstore"===location.hash)localStorage.clear();else{var n=this.app.q(location.hash);if(n){var i=n.matches(this.opt.qTgl);n.matches(this.opt.qGal),i&&(this.unpop(),this.toggle(n,!0),this.opt.keepHash||this.addHistory())}this.app.fire("modal",{n:n,src:"#",show:null})}else this.app.fire("esc",t)}},{key:"beforeClick",value:function(t){if(location.hash){var e=this.app.q(location.hash);(!e||e.matches(this.opt.qUnpopOn)&&!e.contains(t.target))&&this.addHistory()}this.unpop(t.target,!0)}},{key:"onClickHash",value:function(t){var e=t.recv;if(e&&e.hash===this.app.opt.hClose){t.preventDefault();var n=e.closest(this.opt.qTgl);this.app.dbg(["close",this.opt.qTgl,e,n]),n?(this.tgl(n,!1),this.addHistory(),n.matches(this.opt.qModal)&&this.app.fire("modal",{n:n,src:"x",show:!1})):this.app.fire("esc",t)}else{var i=this.app.q(e.hash);i&&i.matches(this.opt.qTgl)&&(t.preventDefault(),i=this.toggle(i),this.app.vis(i)&&this.opt.keepHash?this.addHistory(e.hash):this.addHistory());var r=t.recv.closest(this.opt.qUnpopOn);i&&r&&!r.contains(i)&&this.toggle(r,!1)}}},{key:"onClick",value:function(t){this.nEsc=0}},{key:"initToggler",value:function(t,e){t.classList.remove(this.opt.cTarget+(e||"")),t.classList.add(this.app.opt.cToggle+(e||"")),this.tgl(t,0)}},{key:"attachSubNav",value:function(t){var e=this.app.a(t.parentNode.children).filter((function(t){return"A"==t.tagName})),n=e.filter((function(t){return!t.href}))[0]||e[0]||this.app.ins(""," ",{},t.parentNode,!1)&&this.app.ins("a",this.app.i("toggle","[+]"),{},t.parentNode,!1);n&&(t.id||(t.id="ul-"+this.app.seq()),n.href="#"+t.id)}},{key:"toggle",value:function(t,e,n,i){var r=t?t.tagName?t:this.app.q(t):null;if(r){if(r.matches(this.opt.qTab)&&void 0===e&&(e=!0),this.app.fire("beforetoggle",{n:r,on:e,deep:n}),this.tgl(r,e),this.app.dbg(["toggle"+(n?" deep":""),e,r],n?2:1),this.app.vis(r)&&this.fixPosition(r),-1!=n&&(n||(this.toggleDependent(r),i&&this.opt.keepHash&&(r.id=i,this.addHistory("#"+i))),this.storeVisibility(r),!n&&r.matches(this.opt.qModal))){var o=void 0===e?this.app.vis(r):e;this.app.fire("modal",{n:r,src:"toggle",show:o})}this.app.fire("aftertoggle",{n:r,on:e,deep:n})}return r}},{key:"tgl",value:function(t,e){var n;t&&t.classList[e?"remove":void 0===e?"toggle":"add"](this.app.opt.cOff),this.hiliteLinks(t),e=null!==(n=e)&&void 0!==n?n:this.app.vis(t),this.app.fire("toggle",{n:t,on:e})}},{key:"toggleDependent",value:function(t){var e=this;this.app.vis(t)&&(t.matches(this.opt.qDlg)||(t.matches(this.opt.qTab)?this.app.e(t.parentNode.children,(function(n){return n==t?null:e.toggle(n,!1,1)})):t.matches(this.opt.qAcc)&&this.app.ee(t.closest(this.opt.qAccRoot),this.opt.qAcc,(function(n){return n.contains(t)?null:e.toggle(n,!1,1)}))))}},{key:"unpop",value:function(t,e){var n=this,i=[t];if(t){var r=t.closest("a");r&&r.hash&&i.push(this.app.q(r.hash))}this.app.dbg(["unpop",i]);var o=this.app.qq(this.opt.qUnpopOn).filter((function(t){return!(i&&i.filter((function(e){return e&&e.tagName&&t.contains(e)})).length)}));e||(o=o.filter((function(t){return!n.app.q(n.opt.qUnpopOn,t)}))),o=o.filter((function(t){return!n.containsRels(t)})),this.app.e(o,(function(t){return n.toggle(t,!1,!e)}))}},{key:"containsRels",value:function(t){return this.app.qq(this.opt.qUnpopOn).map((function(t){return t.vRel})).filter((function(t){return t})).filter((function(e){return t.contains(e)})).length}},{key:"storeVisibility",value:function(t){t&&t.id&&t.classList.contains(this.opt.cMem)&&localStorage.setItem("vis#"+t.id,this.app.vis(t)?1:-1)}},{key:"restoreVisibility",value:function(t){if(t&&t.id&&t.classList&&t.classList.contains(this.opt.cMem)){var e=localStorage.getItem("vis#"+t.id);e&&this.toggle(t,e>0,-1)}}},{key:"hiliteLinks",value:function(t){var e=this,n=this.app.vis(t);t.id&&this.app.e('a[href="#'+t.id+'"]',(function(t){return e.app.fire("active",{n:t,on:n})}))}},{key:"hiliteLink",value:function(t,e){t.classList[e?"add":"remove"](this.app.opt.cAct),this.app.cls(t,t.dataset.act,t.dataset.inact,!e)}},{key:"fixPosition",value:function(t){var e=t.matches(this.opt.qNav),n=e?window.getComputedStyle(t.parentNode.parentNode):null,i=!!n&&"flex"!=n.display;if(t.matches(this.opt.qPop)||e){var r=t.style,o=t.parentNode,a=o.nextElementSibling,s=(a=a&&"INPUT"==a.tagName?a:null)||t.parentNode;if(s){var u=document.documentElement.clientWidth;r.right="auto",r.left=i?"100%":0,r.top=i?0:"100%";var l=t.getBoundingClientRect(),c=s.getBoundingClientRect(),p=l.right>u,h=l.bottom>window.innerHeight,f=c.width>300;i?r.left=p||f?"3em":"100%":p&&l.width>c.width&&c.right>l.width?r.left=c.width-l.width+"px":r.left=0,i?r.top=p||f?"90%":0:h&&c.top>l.height?r.top=(a?-c.height:0)-l.height+"px":r.top="100%",a&&(o.style.verticalAlign="bottom")}}}}])&&r(e.prototype,n),i&&r(e,i),u}(n(0).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! dialog - replacement of standard JavaScript dialogs: alert, confirm, prompt */var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,i,o=u(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,"dialog")).dlg=null,t.opt={ccDlg:"dlg rad",customDialog:!0,aConfirm:"_confirm",cBtn:"btn pad",qAlert:"a.alert",qDialog:'a.dialog, input.dialog, [type="submit"].dialog'},t}return e=l,(n=[{key:"init",value:function(){var t=this;this.opt.ccDlg=this.app.opt.cToggle+" "+this.app.opt.cOff+" "+this.opt.ccDlg,this.dlg||(this.dlg=this.app.ins("div","",{className:this.opt.ccDlg},document.body)),this.app.h("click",this.opt.qAlert+", "+this.opt.qDialog,(function(e){return t.onClick(e)}))}},{key:"openDialog",value:function(t,e,n,i){var r=this;i=i||{};var o=this.dlg,a=this.app;o.className=this.opt.ccDlg+(i.class?" "+i.class:""),a.clr(o),t.nodeType&&(t=t.dataset.head||"");var s=a.ins("div","","row bg",o),u=a.ins("h3"," "+(t||""),"fit pad",s);if(i.icon){var l=i.icon.match(/(\S+)(\s(.*))?/);l&&u.insertBefore(a.ins("span",a.i(l[1]),{className:l[3]||""}),u.firstChild)}a.x(s,0,"pad hover col-0");var c=a.ins("div","","pad",o);e&&a.ins("div",e,{},c);var p={value:!0};(i.def||""===i.def)&&(p=a.ins("input","",{value:i.def},c));var h=a.ins("p","","r",c),f=this.opt.cBtn+" "+(i.btn||(" "==e.substr(0,1)?"bg-e":"")),v=this.opt.cBtn+" bg-n",d=a.ins("a",i.ok||a.opt.sOk,{href:a.opt.hClose,className:i.rev?v:f},h);n&&(a.ins("a",i.cancel||a.opt.sCancel,{href:a.opt.hClose,className:i.rev?f:v},d,i.rev?-1:1),a.ins(""," ",{},d,i.rev?-1:1),d.href=a.opt.hOk,a.b([d],"click",(function(t){t.preventDefault(),r.callback(n,p.value,t)})),p.tagName&&a.b([p],"keyup",(function(t){return 13==t.keyCode?r.callback(n,p.value,t):null}))),this.app.toggle(this.dlg,!0,!1,"dlg-"+this.app.seq())}},{key:"closeDialog",value:function(){this.app.toggle(this.dlg,!1)}},{key:"callback",value:function(t,e,n){t.call(this,e,n)||this.closeDialog()}},{key:"onClick",value:function(t){var e=this,n=t.recv;if(!n.form||n.form.checkValidity()){t.preventDefault();var i=this.app,o=(n.dataset.head||"").replace(/%([\w\-]+)%/g,(function(t,e){return n.getAttribute(e)})),a=n.dataset.pic||"",s=n.dataset.prompt||"",u=(n.dataset.caption||n.title||s||"!").replace(/%([\w\-]+)%/g,(function(t,e){return n.getAttribute(e)})),l="reverse"in n.dataset,c=n.dataset.src;!(c=c?i.q(c):null)&&n.form&&(c=n.form.elements[s]);var p=null,h=n.matches(this.opt.qAlert),f=s?c?c.value:r.a.get(n,s):null;return f&&"go"in n.dataset?this.onAnswer(n,f,s):this.opt.customDialog?this.openDialog(o,u,h?null:function(t){return e.onAnswer(n,t,s)},{ok:n.dataset.ok,cancel:n.dataset.cancel,icon:a,btn:" "==u.substr(0,1)||n&&n.className.match(/-[we]\b/)?"bg-e":"bg-y",def:f,rev:l}):(p=h?alert(u):s?prompt(u,f):confirm(u),this.onAnswer(n,p,s)),this.dlg.vRel=n,this.dlg}this.app.fire("validate",t)}},{key:"onAnswer",value:function(t,e,n,i){var o=this.app;if(e||""===e)if(t&&t.form){if(!0!==e){var a=t.form.elements[n]||o.ins("input","",{type:"hidden",name:n},t.form);a&&(a.value=e)}(t.form.reportValidity?t.form.reportValidity():t.form.checkValidity())?(o.q('[type="hidden"][name="'+t.name+'"]',t.form)||o.ins("input","",{type:"hidden",name:t.name,value:t.value},t.form),t.form.elements[this.opt.aConfirm]||o.ins("input","",{type:"hidden",name:this.opt.aConfirm,value:1},t.form),t.form.submit()):this.closeDialog()}else if(t&&t.href){var s,u="#"===(t.getAttribute("href")||"").substr(0,1),l="_blank"==t.target;if((u||l)&&this.closeDialog(),u)s=t.hash;else{var c={};c[this.opt.aConfirm]=1,!0!==e&&(c[n]=e),s=r.a.build(t,c)}"_blank"==t.target?window.open(s,t.target):location.href=s}}}])&&a(e.prototype,n),i&&a(e,i),l}(i.a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! gallery - image gallery */n.d(e,"a",(function(){return h}));var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n,i,r=l(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,"gallery")).opt={idPrefix:"pic-",num:!0,cGal:"gal",qGal:".gal>a[id]",qGallery:".gallery",qLinks:'a.pic:not([href^="#"])'},t}return e=a,(n=[{key:"init",value:function(){var t=this;this.app.h("click",this.opt.qGal,(function(e){return t.next(e)})),this.app.listen("hashchange",(function(e){return t.onHash(e)})),this.app.listen("keydown",(function(e){return t.onKey(e)})),this.app.h("click",this.opt.qGallery+" "+this.opt.qLinks,(function(e){return t.prepareByClick(e)})),this.app.e(this.opt.qGallery,(function(e){return t.prepare(e)}))}},{key:"prepareByClick",value:function(t){this.prepare(t.target.closest(this.opt.qGallery))}},{key:"prepare",value:function(t,e){if(!t.dataset.ready){t.dataset.ready=1,e=e?o(o({},this.opt),e):this.opt;var n=this.app,i=n.ins("div","",{className:e.cGal}),r=n.qq(e.qLinks,t),a=r.length;t.vGal&&t.vGal.parentNode.removeChild(t.vGal);for(var s=0,u=0;u<a;u++)if("#"!=(r[u].getAttribute("href")||"").substr(0,1)){var l=n.seq();u||(s=l);var c="#"+e.idPrefix+(u==a-1?s:l+1),p="#"+e.idPrefix+(0==u?s+a-1:l-1),h=n.ins("a","",{className:"gallery-pic swipe drag",id:e.idPrefix+l,href:c,"data-swipe-up":r[u].href||"","data-swipe-right":p,"data-swipe-down":this.app.opt.hClose,"data-swipe-left":c},i);h.vLink=r[u].getAttribute("href")||"",h.vImg=h.vLink;var f=e.num;"num"in t.dataset&&(f=!!t.dataset.num);var v=r[u].title||r[u].dataset.tip||"";h.dataset.caption=f?u+1+"/"+a+(v?" - "+v:""):"",r[u].href="#"+h.id}n.x(i),document.body.appendChild(i),t.vGal=i}}},{key:"next",value:function(t){if(!t.defaultPrevented){var e=t.recv,n=e&&t.clientX>0&&t.clientX<e.clientWidth/3;this.browse(e,n),t.preventDefault()}}},{key:"browse",value:function(t,e){var n=this.app.q(e?'a[href="#'+t.id+'"]':t.hash,t.parentNode);n.id&&(location.hash="#"+n.id)}},{key:"onHash",value:function(){var t=this.app.q(location.hash);t&&(this.loadImg(t),this.loadImg(this.app.q(t.hash)))}},{key:"loadImg",value:function(t){t&&t.vImg&&(t.style.backgroundImage='url("'+t.vImg+'")',t.vImg="")}},{key:"visit",value:function(t){var e=t.vLink;e||(e=(e=window.getComputedStyle(t).backgroundImage).substring(4,e.length-1).replace(/^"|"$/g,"")),e&&(location.href=e)}},{key:"onKey",value:function(t){if(location.hash){var e=this.app.q(location.hash);if(e&&e.hash){var n=t.keyCode;37==n||38==n?this.browse(e,!0):39==n||40==n?this.browse(e):8==n&&this.visit(e)}}}}])&&s(e.prototype,n),i&&s(e,i),a}(n(0).a)},function(t,e){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! calendar - replacement of standard date and datetime-local inputs */var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(l,t);var e,n,r,u=s(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,"calendar")).opt={cBtn:"pad hover",dateFormat:"d",hCancel:"#close",hNow:"#now",addIcons:[["date","#","#open"],["ok","&check;","#now"],["delete","&#x2715;","#clear"]],idPicker:"pick-date",minWidth:801,minWidthDropdown:801,qsCalendar:"input.calendar",showModal:0,stepMinutes:1,inPop:0},t.win=null,t}return e=l,(n=[{key:"init",value:function(){var t=this;this.win=this.app.ins("div","",{id:this.opt.idPicker,className:this.app.opt.cToggle+" "+this.app.opt.cOff+" pad"}),this.win.style.whiteSpace="nowrap",document.body.appendChild(this.win),this.app.h("click",this.opt.qsCalendar,(function(e){return t.openDialog(e.target,null,e)})),this.app.h("input",this.opt.qsCalendar,(function(e){return t.validate(e.target,0)})),this.app.h("click","#"+this.opt.idPicker+" a",(function(e){return t.onClick(e)})),this.app.h("click",".calendar-tools a",(function(e){return t.onClick(e,!0)}))}},{key:"arrange",value:function(t){var e=this,n=t.n;window.innerWidth>=this.opt.minWidth&&this.app.ee(n,this.opt.qsCalendar,(function(t){return e.prepare(t)}))}},{key:"onClick",value:function(t,e){var n=t.recv,i=n.hash;if(i){var r,o=this.opt.qsCalendar;if(e)r=this.opt.inPop?this.app.q(o,this.app.next(n.parentNode,".pop",!0)):this.app.next(n.parentNode,o,!0);else if(this.win.vRel)r=this.win.vRel;else{var a=n.closest("#"+this.opt.idPicker);r=this.opt.inPop?this.app.next(a,o,!0):this.app.next(a.parentNode,o)}var s=this.win.vCur,u="#prev-year"==i?-1:"#next-year"==i?1:0,l="#prev-month"==i?-1:"#next-month"==i?1:0,c="#prev-hour"==i?-1:"#next-hour"==i?1:0,p="#prev-min"==i?-this.opt.stepMinutes:"#next-min"==i?this.opt.stepMinutes:0;u||l?this.switchMonths(r,s.getFullYear()+u,s.getMonth()+l,s.getDate()):c||p?this.setTime(r,c,p):i==this.opt.hNow?this.closeDialog(r,!0):i==this.opt.hCancel?this.closeDialog(r,null):"#open"==i?this.openDialog(r,null):"#clear"==i?this.closeDialog(r,""):i.match(/#\d\d?/)&&this.closeDialog(r,this.fmt(s,i.substr(1))),t.preventDefault(),t.stopPropagation()}}},{key:"toggle",value:function(t,e){if(e){var n=e.dataset.mode;if(n=n?"m"===n[0]:this.opt.showModal||Math.min(window.innerWidth,window.innerHeight)<this.opt.minWidthDropdown,t){if(this.win.className=this.app.opt.cToggle+" "+this.app.opt.cOff+" pad "+(n?"dlg":""),(n?document.body:this.opt.inPop?e.parentNode:e.previousElementSibling).appendChild(this.win),n){var i=this.win.style;i.left=i.right=i.top=i.bottom=""}this.win.vRel=e}}this.app.toggle(this.win,t),t||document.body.appendChild(this.win)}},{key:"prepare",value:function(t){if(!t.dataset.ready){t.dataset.ready=1,t.dataset.tm="datetime-local"==t.type||t.classList.contains("datetime"),t.type="text",t.autocomplete="off",t.value&&(t.value=this.fmt(this.parse(t.value),0,t.dataset.tm));var e=this.app.ins("div","","pop l",t,-1);if(this.opt.inPop||(e.style.verticalAlign="bottom"),this.opt.addIcons.length>0){var n=this.app.ins("span","","input-tools calendar-tools nobr",t,1);for(var i in this.opt.addIcons){var r=this.opt.addIcons[i];this.app.ins(""," ",{},n),this.app.ins("a",this.app.i.apply(this.app,r.slice(0,2)),{href:r[2],className:"let"},n)}}this.opt.inPop&&e.appendChild(t)}}},{key:"openDialog",value:function(t,e,n){t.dataset.ready&&(n&&n.preventDefault(),this.build(t,e||t.value),this.toggle(!0,t))}},{key:"closeDialog",value:function(t,e){t&&(this.setValue(t,e),t.focus()),this.toggle(!1)}},{key:"n",value:function(t,e){return("000"+t).substr(-(e||2))}},{key:"getLimit",value:function(t,e,n){return t[e]?this.fmt(this.parse(t[e]),0,n,"y"):"max"==e?"9999":"0000"}},{key:"errLimits",value:function(t){var e=this.getLimit(t,"min",t.dataset.tm),n=this.getLimit(t,"max",t.dataset.tm),i=this.fmt(this.parse(t.value),0,t.dataset.tm,"y");return e&&i<e||n&&i>n?e+" .. "+n:""}},{key:"validate",value:function(t,e){t.setCustomValidity(e||""==t.value?"":this.errLimits(t)),t.checkValidity(),t.reportValidity&&t.reportValidity()}},{key:"update",value:function(t,e){var n=this.win.vDays;this.app.clr(n);var i=e.getFullYear(),r=e.getMonth(),o=e.getDate(),a=this.getLimit(t,"min",0),s=this.getLimit(t,"max",0);this.win.vNodeCur.textContent=this.n(r+1)+"."+i,this.win.vHours.textContent=this.n(t.dataset.tm?e.getHours():0),this.win.vMinutes.textContent=this.n(t.dataset.tm?e.getMinutes():0);for(var u,l,c,p,h,f,v=new Date(i,r+1,0).getDate(),d=(new Date(i,r,1).getDay()+6)%7,y=7*Math.ceil((d+v)/7)-d,m=1-d;m<=y;m++)1==(h=(d+m-1)%7+1)&&(f=this.app.ins("div","","row",n)),m<1||m>v?u=this.app.ins("a","","pad c center",f):(l=this.fmt(e,m,0,"y"),c=m==o,p=a&&l<a||s&&l>s,u=this.app.ins("a",m,"pad c center "+(c?"bg-w ":"")+(p?"text-n ":"hover ")+(h>5?"text-e ":""),f),p||(u.href="#"+m));this.win.vNodeTime.classList[t.dataset.tm?"remove":"add"](this.app.opt.cHide)}},{key:"build",value:function(t,e){var n=this.app;if("string"==typeof e&&(e=this.parse(e||t.dataset.def||"")),this.win.vCur=e,!this.win.vDays){n.clr(this.win);var i=n.ins("p","","c",this.win);this.btn(this.opt.hNow,"ok","&check;",i),this.btn("#prev-year","prev2","&laquo;",i),this.btn("#prev-month","prev","&lsaquo;",i),this.win.vNodeCur=n.ins("span","","pad",i),this.btn("#next-month","next","&rsaquo;",i),this.btn("#next-year","next2","&raquo;",i),this.btn(this.opt.hCancel,"close","&#x2715;",i),n.ins("hr","",{},this.win),this.win.vDays=n.ins("div","",{},this.win);var r=n.ins("div","",{},this.win);this.win.vNodeTime=r,n.ins("hr","",{},r);var o=n.ins("p","","c",r);this.btn("#prev-hour","prev","&lsaquo;",o),this.win.vHours=n.ins("span","","pad",o),this.btn("#next-hour","next","&rsaquo;",o),n.ins("span",":","pad",o),this.btn("#prev-min","prev","&lsaquo;",o),this.win.vMinutes=n.ins("span","","pad",o),this.btn("#next-min","next","&rsaquo;",o)}this.update(t,e)}},{key:"switchMonths",value:function(t,e,n,i){if(i>28){var r=new Date(e,n+1,0).getDate();i=Math.min(i,r)}var o=parseInt(this.win.vHours.textContent,10),a=parseInt(this.win.vMinutes.textContent,10);this.build(t,new Date(e,n,i,o,a))}},{key:"setTime",value:function(t,e,n){var i=e||n,r=e?24:60,o=this.win[e?"vHours":"vMinutes"],a=parseInt(o.textContent,10),s=a%Math.abs(i);a+=s?i>0?i-s:-s:r+i,o.textContent=this.n(a%r),this.setValue(t,this.fmt(this.parse(t.value)))}},{key:"setValue",value:function(t,e){if(null!==e){t.value=!0===e?this.fmt(0,0,t.dataset.tm):e;var n=this.win.vHours,i=this.win.vMinutes;t.dataset.tm&&!0!==e&&""!==e&&n&&i&&(t.value+=" "+this.n(n.textContent)+":"+this.n(i.textContent)),this.app.dispatch(t,["input","change"]),this.validate(t,0)}}},{key:"parse",value:function(t){return i.a.parse(t)||new Date}},{key:"fmt",value:function(t,e,n,r){return t||(t=new Date),e&&(t=new Date(t.getFullYear(),t.getMonth(),e)),i.a.fmt(t,n,r||this.opt.dateFormat)}},{key:"btn",value:function(t,e,n,i){return n=this.app.i(e,n),this.app.ins("a",n,{href:t,className:this.opt.cBtn},i)}}])&&o(e.prototype,n),r&&o(e,r),l}(n(0).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n(0),r=n(1),o=n(2);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! lookup - autocomplete lookups with data from XHTTP request */var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,n,i,a=l(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,"lookup")).opt={cacheLimit:0,pList:"lookup-list-",max:10,wait:300,inPop:0},t.win=null,t}return e=c,(n=[{key:"init",value:function(){var t=this,e=this.app;this.win=e.ins("div","",{id:this.opt.pList+e.seq(),className:e.opt.cToggle+" "+e.opt.cOff}),this.closeList(),document.body.appendChild(this.win);var n=o.a.debounce(this.find.bind(this),this.opt.wait);e.h("input",".lookup-input",n),e.h("keydown",".lookup-input",(function(e){return t.key(e)})),e.h("click",".lookup-item",(function(e){return t.choose(e)})),e.h("click",".lookup-goto",(function(e){return t.go(e)})),e.h("change","[data-chain]",(function(e){return t.updateChain(e.target)}))}},{key:"arrange",value:function(t){var e=this,n=t.n;this.app.ee(n,"input[data-lookup]",(function(t){return e.prepare(t)})),this.app.ee(n,"[data-chain]",(function(t){return e.updateChain(t)}))}},{key:"prepare",value:function(t){if(!t.dataset.ready){t.dataset.ready=1;var e=this.app;t.vLabel="label"in t.dataset?t.dataset.label:t.value||"";var n=e.ins("div","","pop l lookup-pop",t,1);this.opt.inPop||(n.style.verticalAlign="bottom"),t.classList.add("bg-n","lookup-id"),t.classList.add(e.opt.cHide);var i=e.ins("input","",{type:"text",value:t.vLabel,className:"lookup-input subinput"},n,this.opt.inPop?0:1);if(i.name="lookup-"+t.name,t.id&&(i.id="lookup-"+t.id,t.title&&(i.title=t.title),e.e('[for="'+t.id+'"]',(function(t){return t.htmlFor=i.id}))),t.placeholder&&(i.placeholder=t.placeholder),i.autocomplete="off","url"in t.dataset){var r=e.ins("span","","input-tools nobr",this.opt.inPop?n:i,1);e.ins("a",e.i("forward","&rarr;"),{href:"#goto",className:"let lookup-goto"},r).style.cursor="pointer",e.ins(""," ",{},r,-1)}this.initCaption(t)}}},{key:"initCaption",value:function(t){var e=this,n=t.dataset.cap||"";if(n&&t.value&&!("label"in t.dataset)){var i=encodeURI(decodeURI(r.a.build(n,{time:(new Date).getTime()})).replace(/\{q\}/,t.value));this.app.fetch(i,(function(n){var r=e.app.parse(n.responseText);if(r){var o=i.split("#");!o[1]&&r.data&&(r=r.data),e.fix(t,t.value,e.app.path(r,o[1]||"",t.value))}}))}}},{key:"ident",value:function(t,e){return"t"==e||"i"!=e&&!this.opt.inPop||(t=t.closest(".lookup-pop")),this.app.next(t,".lookup-id",!0)}},{key:"cap",value:function(t){return this.opt.inPop?this.app.q(".lookup-input",this.pop(t)):this.app.next(t,".lookup-input")}},{key:"pop",value:function(t){return this.app.next(t,".lookup-pop")}},{key:"find",value:function(t){var e=t.target,n=this.ident(e);if(n){var i=e.value;if(""===i)this.fix(n,"","");else if(n.vCache&&n.vCache[i])this.openList(n,n.vCache[i]);else{var o=encodeURI(decodeURI(r.a.build(n.dataset.lookup||"",{time:(new Date).getTime()})).replace(/\{q\}/,i));n.vCur=null,this.app.fetch(o,this.list.bind(this,o,i,n))}}}},{key:"list",value:function(t,e,n,i){var r=this.app.parse(i.responseText);if(r){var o=t.split("#");!o[1]&&r.data&&(r=r.data),r=this.norm(this.app.path(r,o[1]||"",[]),o[2],o[3],o[4]),e===this.cap(n).value&&this.openList(n,r),this.store(n,e,r)}}},{key:"openList",value:function(t,e,n){this.closeList(),this.pop(t).appendChild(this.win),this.app.toggle(this.win,!0),this.build(t,e)}},{key:"closeList",value:function(){this.app.toggle(this.win,!1)}},{key:"build",value:function(t,e){var n=this.app;n.clr(this.win);var i,r=n.ins("ul","","nav let hover",this.win),o=0,a=t.dataset.goto||"";for(var s in e){i=n.ins("li","",{},r);var u=n.ins("a","",{href:a?a.replace(/\{id\}/,e[s].id):"#"+e[s].id,className:"-pad -hover"+(a?"":" lookup-item")},i);if(n.ins("span",e[s].nm,{},u),e[s].info&&(n.ins("br","",{},u),n.ins("small",e[s].info,"text-n",u)),++o>=this.opt.max)break}r.firstChild&&this.hilite(t,r.firstChild.firstChild)}},{key:"hilite",value:function(t,e){t.vCur&&t.vCur.classList.remove(this.app.opt.cAct),e.classList.add(this.app.opt.cAct),t.vCur=e}},{key:"hiliteNext",value:function(t,e){if(t.vCur){var n=t.vCur.parentNode[e?"previousSibling":"nextSibling"];n||(n=t.vCur.parentNode.parentNode[e?"lastChild":"firstChild"]),n=n.firstChild,this.hilite(t,n)}}},{key:"choose",value:function(t){t&&t.preventDefault();var e=t.recv,n=this.ident(e,"i");n.vCur=e,this.fix(n,e.hash.substr(1),e.firstChild.textContent)}},{key:"fix",value:function(t,e,n){t.vCur=null,t.value=e,t.vLabel=this.cap(t).value=n,this.app.dispatch(t,["input","change"]),this.closeList()}},{key:"key",value:function(t){var e=t.target?this.ident(t.target):null;e&&(27==t.keyCode?this.fix(e,e.value,e.vLabel||""):40!=t.keyCode||this.app.vis(this.win)?38==t.keyCode||40==t.keyCode?this.hiliteNext(e,38==t.keyCode):13==t.keyCode&&e.vCur&&(this.app.vis(this.win)&&t.preventDefault(),e.vCur.click()):this.find(t))}},{key:"go",value:function(t){var e=t.recv?this.ident(t.recv.parentNode,"t"):null;if(e){t.preventDefault();var n=e.dataset.url||"";e.value.length>0&&n&&(location.href=encodeURI(decodeURI(n).replace(/\{id\}/,e.value)))}}},{key:"updateChain",value:function(t){var e=this.app.q(t.dataset.chain||"");if(e)if(t.value){var n=(e.dataset.list||"").replace(/\{q\}/,t.value);e.vCache&&e.vCache[n]?this.setOptions(e,e.vCache[n]):this.app.fetch(n,this.onChainData.bind(this,n,e))}else this.setOptions(e,[])}},{key:"onChainData",value:function(t,e,n){var i=this.app.parse(n.responseText);if(i){var r=t.split("#");!r[1]&&i.data&&(i=i.data),i=this.norm(this.app.path(i,r[1]||"",[]),r[2],r[3]),this.setOptions(e,i),this.store(e,t,i)}else this.setOptions(e,[])}},{key:"setOptions",value:function(t,e){var n=this;if(t.list)t.list&&(this.app.clr(t.list),t.value="",e&&e.forEach((function(e){return n.app.ins("option","",{value:e.nm},t.list)})));else{this.app.clr(t);var i=t.dataset.placeholder||"";e&&0!=e.length&&!i||this.app.ins("option",i||"-",{value:""},t),e&&e.forEach((function(e){return n.app.ins("option",e.nm,{value:e.id},t)}))}}},{key:"store",value:function(t,e,n){var i=1*(t.dataset.cache||this.opt.cacheLimit);i&&((!t.vCache||Object.keys(t.vCache).length>=i)&&(t.vCache={}),n&&(t.vCache[e]=n))}},{key:"norm",value:function(t,e,n,i){var r=this;return"array"!==this.app.typeOf(t)?[]:t.map((function(t){var o,a;return{id:r.app.path(t,e||"id"),nm:n?r.app.path(t,n):null!==(o=null!==(a=t.name)&&void 0!==a?a:t.nm)&&void 0!==o?o:t.title,info:r.app.path(t,i||"info")}}))}}])&&s(e.prototype,n),i&&s(e,i),c}(i.a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! edit - wysiwyg text editor */n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,i,s=a(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,"edit")).opt={qAdjust:"textarea.adjust",qEdit:"textarea.edit",height:30,tools:"/*@xbi_.#123p|c,s^vdqf~T(=)j+-"},t.btn={"/":["src","","/","Source"],"*":["insertimage","~","*","Image"],"@":["createlink","~","@","Link"],x:["unlink","","&times;","Unlink"],b:["bold","","<b>B</b>","Bold"],i:["italic","","<i>I</i>","Italic"],_:["removeformat","","_","Unformat"],".":["insertUnorderedList","","&bull;","List"],"#":["insertOrderedList","","#","Ordered"],1:["formatblock","<h1>","H1","Head 1"],2:["formatblock","<h2>","H2","Head 2"],3:["formatblock","<h3>","H3","Head 3"],p:["formatblock","<p>","&sect;","Paragraph"],"|":["tools","","&hellip;","Tools"],c:["inserthtml","<code>^</code>","{}","Code"],",":["inserthtml",'<abbr title="~">^</abbr>',"A.B.","Abbreviation"],s:["strikeThrough","","<s>S</s>","Strike through"],"^":["subscript","","a<sub>x</sub>","Subscript"],v:["superscript","","a<sup>x</sup>","Superscript"],d:["formatblock","<div>","D","Div"],q:["formatblock","<blockquote>","&#8220;","Block quote"],f:["formatblock","<pre>","[]","Preformatted"],"~":["inserthorizontalrule","","&minus;","Horizontal ruler"],T:["inserthtml","<table><tr><th>#<th>#<tr><td>-<td>-</table>","T","Table"],"(":["justifyLeft","","&lt;","Justify left"],"=":["justifyCenter","","=","Justify center"],")":["justifyRight","","&gt;","Justify right"],j:["justifyFull","","&equiv;","Justify full"],"+":["indent","","&raquo;","Increase indent"],"-":["outdent","","&laquo;","Decrease indent"]},t}return e=u,(n=[{key:"init",value:function(){var t=this,e=this.app;e.h("click","label[for]",(function(e){return t.setFocus(e.recv)})),e.h("click","a[data-cmd]",(function(e){return t.cmd(e)})),e.h(["input","blur"],".edit-wysiwyg",(function(e){return t.up(0,e.target)})),e.listen("value",(function(e){if(e.n.matches(t.opt.qEdit)){var n=t.getWys(e.n);n&&(t.up(1,n),e.modeAuto&&t.modeAuto(e.n))}})),e.b([window],"paste",(function(e){return t.onPaste(e)}),!0),e.h("input",this.opt.qAdjust,(function(e){return t.adjust(e.target)})),e.b([window],"mouseup",(function(e){var n,i;return(null===(n=(i=e.target).matches)||void 0===n?void 0:n.call(i,t.opt.qAdjust))?t.resized(e.target):null})),e.b([window],"resize",(function(e){return t.adjustAll()}))}},{key:"arrange",value:function(t){var e=this,n=t.n;this.app.ee(n,this.opt.qEdit,(function(t){return e.prepare(t)})),this.app.ee(n,this.opt.qAdjust,(function(t){return e.setStyle(t)})),this.adjustAll(n)}},{key:"setFocus",value:function(t){var e=this.app.q("#"+t.htmlFor),n=e?this.getWys(e):null;n&&this.app.vis(n)&&n.focus()}},{key:"prepare",value:function(t){if(!t.dataset.ready){t.dataset.ready=1;var e=this.app,n=e.ins("nav","","bg",t,-1),i=e.ins("div","",{className:e.opt.cToggle+" "+e.opt.cOff}),r=e.ins("div","",{className:e.opt.cToggle+" bord pad subinput edit-wysiwyg"},t,1);r.setAttribute("contenteditable",!0),t.classList.add(e.opt.cToggle),t.id&&(r.id="wys-"+t.id);var o=(t.dataset.tools||this.opt.tools).split(""),a=n;for(var s in o){var u=this.btn[o[s]];e.ins("a",u[2],{href:"#cmd-"+u[0],title:u[3],className:e.opt.cToggle+" pad hover","data-cmd":o[s]},a),"tools"==u[0]&&(a=i)}n.appendChild(i),t.className+=" bord pad",t.style.width="100%",this.setStyle(t),this.setStyle(r),this.up(1,this.getWys(t)),this.modeAuto(t)}}},{key:"getNav",value:function(t){return t.previousElementSibling.previousElementSibling}},{key:"getArea",value:function(t){return t.previousElementSibling}},{key:"getWys",value:function(t){return t.nextElementSibling}},{key:"modeAuto",value:function(t){var e=t.dataset.mode;e=e?"w"===e[0]:-1==(t.dataset.tools||this.opt.tools).indexOf("/")||t.value.match(/(>|&\w+;)/)&&!t.value.match(/<script/i),this.mode(e,this.getWys(t))}},{key:"cmd",value:function(t,e){var n=t.recv,i=e||this.btn[n.getAttribute("data-cmd")],r=e?t:this.app.next(n.closest("nav"),".edit-wysiwyg");if(this.app.dbg(["cmd",r,i,n,t]),t&&!e&&(t.preventDefault(),t.stopPropagation()),"src"==i[0])this.mode(!this.app.vis(r),r);else if("tools"==i[0]){var o=this.app.q("div",n.parentNode);o&&this.app.toggle(o)}else{var a=i[1];if(a.match(/~/)){var s=prompt(i[3],i[4]||"");(a=null===s?s:a.replace(/~/,s))&&a.match(/@/)&&(a="mailto:"+a)}a&&(a=a.replace("^",document.getSelection())),r.focus(),null!==a&&document.execCommand(i[0],!1,a),"*"==i[2]&&(this.up(0,r),this.up(1,r))}}},{key:"up",value:function(t,e){var n=this.getArea(e);t?e.innerHTML=n.value:n.value=e.innerHTML.replace(/(\shref=")!/gi,' target="_blank"$1').replace(/(\ssrc="[^"]+#[a-z]*)(\d+%?)"/gi,' width="$2"$1"'),t||this.app.dispatch(n,["input","change"])}},{key:"mode",value:function(t,e){var n=this,i=this.getArea(e);this.app.toggle(e,t),this.app.toggle(i,!t),t||(e.style.height?i.style.height=e.style.height:i.matches(this.opt.qAdjust)&&this.adjust(i)),this.up(t,e);var r=this.getNav(e);this.app.ee(r,"a",(function(e){return"#cmd-src"==e.hash?null:e.classList[t?"remove":"add"](n.app.opt.cOff)})),i.theManual=0,i.style.width="100%"}},{key:"setStyle",value:function(t){t.style.overflow="auto",t.style.minHeight="3em",t.style.maxHeight="80vh",this.storeSize(t)}},{key:"storeSize",value:function(t){t.theH=t.clientHeight,t.theW=t.clientWidth}},{key:"resized",value:function(t){t.theH===t.clientHeight&&t.theW===t.clientWidth||(t.theManual=1)}},{key:"adjustAll",value:function(t){var e=this;this.app.ee(t,this.opt.qAdjust,(function(t){return e.adjust(t)}))}},{key:"adjust",value:function(t){if(!t.theManual){var e=t.value.split(/\n/).map((function(e){return Math.ceil(10*(1+e.length)/(t.clientWidth||500))})).reduce((function(t,e){return e+t}));t.style.height=Math.min(1.5*(2+e),parseFloat(this.opt.height))+"em",this.storeSize(t)}}},{key:"onPaste",value:function(t){var e=this,n=t.target.closest(".edit-wysiwyg");if(n){var i=this.app.a(t.clipboardData.items).filter((function(t){return 0===t.type.indexOf("image")})).shift();if(i){t.preventDefault();var r=new FileReader;r.onload=function(t){return e.cmd(n,["insertimage",t.target.result])},r.readAsDataURL(i.getAsFile())}}}}])&&r(e.prototype,n),i&&r(e,i),u}(n(0).a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! form - utilities for form inputs */n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,i,s=a(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,"form")).opt={},t}return e=u,(n=[{key:"init",value:function(){var t=this;this.app.h("click",'a[href^="#"][data-value]',(function(e){e.preventDefault(),t.setValue(e.recv)})),this.app.h("click","input[data-group]",(function(e){return t.checkBoxes(e.target)}))}},{key:"arrange",value:function(t){var e=this,n=t.n;this.app.ee(n,'input[type="color"]',(function(t){return e.prepareColor(t)}))}},{key:"checkBoxes",value:function(t){this.app.ee(t.form,'input[type="checkbox"]',(function(e){return e.classList.contains(t.dataset.group)?e.checked=t.checked:null}))}},{key:"setValue",value:function(t){var e=this.app.q(t.hash);e&&(e.value=t.dataset.value||"",this.app.pf("toggle","unpop",e,!0))}},{key:"prepareColor",value:function(t){if(!t.dataset.ready){t.dataset.ready=1;var e=this.app.ins("input","",{type:"text",value:t.value,size:7,className:"color"},t,-1);this.app.ins(""," ",{},e,1),this.app.b([t,e],"input",(function(n){return(n.target==t?e:t).value=n.target.value}))}}}])&&r(e.prototype,n),i&&r(e,i),u}(n(0).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! fetch - asynchronous requests */var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,i,o=u(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,"fetch")}return e=l,(n=[{key:"init",value:function(){var t=this;this.app.h("click","a[data-target]",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(t){t.preventDefault(),this.fetchBy(t.recv)}},{key:"fetchBy",value:function(t,e){var n=this,i=t.getAttribute("href")||"";this.fetch(i,(function(r){return e?e(t,r):n.receive(i,t,r)}))}},{key:"fetch",value:function(t,e){var n=this;t&&"array"===this.app.typeOf(t)&&(t=r.a.build(t[0],t[1]));var i=new XMLHttpRequest;i.addEventListener("load",(function(t){n.app.fire("response",{request:i}),e&&e(i)})),this.app.fire("request",{request:i}),i.open("GET",t),i.send()}},{key:"receive",value:function(t,e,n,i){var r=this.app.q(e.dataset.target);if("200"==n.status){var o=t.split("#"),a=n.responseText;if(a=o[1]?JSON.stringify(this.app.path(this.app.parse(a),o[1])):a,r){r.innerHTML=a;var s=r.closest(".dlg[id]");s&&this.app.toggle(s,!0)}else this.app.dialog(e,a)}else console.error("XHTTP request failed",n)}}])&&a(e.prototype,n),i&&a(e,i),l}(i.a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! valid - custom form validation messages */n.d(e,"a",(function(){return l}));var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,i,s=a(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,"valid")).opt={aHint:"data-hint",qValidate:"form",cUnhint:"js-unhint",cLiveVal:"js-live-val"},t}return e=u,(n=[{key:"init",value:function(){var t=this,e=["input","textarea","select"].map((function(e){return t.opt.qValidate+" "+e+"["+t.opt.aHint+"]"})).join(", ");e+=", ."+this.opt.cLiveVal+" [name]",this.app.h(["input","change"],e,(function(e){return t.validateInput(e.target)})),this.app.h("invalid",e,(function(e){return t.setCustomMessage(e.target)})),this.app.e("form."+this.opt.cUnhint,(function(e){return t.unhint(e)})),this.app.e("form."+this.opt.cLiveVal,(function(e){return t.validateForm(e)})),this.app.h("submit",this.opt.qValidate,(function(e){return t.customValidate(e)})),this.app.listen("validate",(function(e){return t.customValidate(e)}))}},{key:"isLive",value:function(t){return t&&t.classList.contains(this.opt.cLiveVal)}},{key:"validateInput",value:function(t){t.willValidate&&("radio"==t.type?this.app.ee(t.form,'[name="'+t.name+'"]',(function(t){return t.setCustomValidity("")})):t.setCustomValidity(""),t.checkValidity(),this.isLive(t.form)&&this.validateForm(t.form))}},{key:"setCustomMessage",value:function(t){if(t.willValidate){var e=t.getAttribute("data-hint")||"";e=e.replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),t.setCustomValidity(e)}}},{key:"unhint",value:function(t){t.setAttribute("novalidate",!0)}},{key:"customValidate",value:function(t){var e=t.target.closest("form");e&&e.getAttribute("novalidate")&&this.validateForm(e,t)}},{key:"validateForm",value:function(t,e){e&&t.classList.remove(this.opt.cUnhint);var n=t.checkValidity();if(!n&&e){e.preventDefault(),e.stopPropagation();var i=this.app.q("[name]:invalid:not(.hide):not(.off), [name]:invalid~.subinput",t);i&&(this.app.dbg(["focus validate",i]),i.focus())}this.isLive(t)&&this.app.ee(t,'[type="submit"]',(function(t){return t.classList[n?"remove":"add"]("bg-n")}))}}])&&r(e.prototype,n),i&&r(e,i),u}(n(0).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r={menu:[7,"M.5 1h6v1h-6zm0 2h6v1h-6zm0 2h6v1h-6z"],sort:[7,"M1 1h2v1h-2zm0 2h3.5v1h-3.5zm0 2h5v1h-5z"],more:[17,"M7 2h3v3h-3zm0 5h3v3h-3zm0 5h3v3h-3z"],grid:[7,"M1 1h2v2h-2zM4 1h2v2h-2zM1 4h2v2h-2zM4 4h2v2h-2z"],home:[10,"M1 4.8h1v4h2v-3h2v3h2v-4h1l-4-4z"],find:[12,"M5 1a4 4 0 1 0 .01 0zm0 1a3 3 0 1 1-.01 0m3 5l-1 1 3 3 1-1z"],config:[220,"M35 67l75 -44 75 44 0 89-75 44-75-44zm75 8a35 35 0 1 0 .01 0z"],close:[12,"M2 1l4 4 4-4 1 1-4 4 4 4-1 1-4-4-4 4-1-1 4-4-4-4z"],user:[10,"M5 9C13 -1.5 -3 -1.5 5 9zM1 8.5q4 1 8 0-4 -3 -8 0z"],exit:[10,"M1 1h4v1h-3v6h3v1h-4zm2 3h3v-2l3 3-3 3v-2h-3z"],key:[20,"M2 16l7-7v-4l3-3q7 0 7 7l-3 3h-4l-6 6h-4zm3 1h1l6-6h-1zm11-12a1.5 1.5 0 1 0 .01 .01z"],lock:[10,"M1.5 4h7v5h-7zm1 0c0-4 5-4 5 0h-1c0-3-3-3-3 0zm2 1v2h1v-2z"],edit:[10,"M7 1q1.6 .4 2 2l-5 5-3 1 1-3zM2.3 6.3l-.5 1.5.4.4 1.5-.5z"],add:[7,"M3 1h1v2h2v1h-2v2h-1v-2h-2v-1h2z"],delete:[20,"M5 3l5 5 5-5 2 2-5 5 5 5-2 2-5-5-5 5-2-2 5-5-5-5z"],ok:[100,"M10 48l11-9 18 22 40-50 11 9-51 65z"],up:[10,"M1 6l4-4 4 4-1 1-3-3-3 3z"],down:[10,"M1 4l4 4 4-4-1-1-3 3-3-3z"],left:[10,"M6 1l1 1-3 3 3 3-1 1-4-4z"],right:[10,"M4 1l4 4-4 4-1-1 3-3-3-3z"],asc:[12,"M2 7l-1-1 5-5 5 5-1 1 -3.25 -3.2v7h-1.5v-7z"],desc:[12,"M2 5l-1 1 5 5 5-5-1-1 -3.25 3.2v-7h-1.5v7z"],back:[12,"M7 2l-1-1 -5 5 5 5 1-1 -3.2 -3.25h7v-1.5h-7z"],forward:[12,"M5 2l 1-1 5 5 -5 5 -1-1 3.2 -3.25h-7v-1.5h7z"],upload:[10,"M1 8h8v1h-8zm1-4h2v3h2v-3h2l-3-3z"],download:[10,"M1 8h8v1h-8zm1-3.7h2v-3h2v3h2l-3 3z"],first:[12,"M2 2h1.5v8h-1.5zm2 4l6-4v8z"],last:[12,"M2 2v8l6-4zm6.5 0h1.5v8h-1.5z"],folder:[12,"M1 1.5h4l1 2h5v7h-10zm1 3v5h8v-5z"],open:[12,"M.5 1.5h4l1 2h6.3l-2.3 7h-9zm3 3l-2 5h7l2-5z"],file:[12,"M2 1h5l3 3v7h-8zm1 1v8h6v-6h-2v-2z"],attach:[15,"M4.5 11q0 3 3 3t3-3v-8q0-2-2-2t-2 2v7h1v-7q0-1 1-1t1 1v8q0 2-2 2t-2-2v-7h-1z"],audio:[19,"M8 14h-1v-10l8-2v10h-1v-6.5l-6 1.5za3 2 -20 1 1 0 -.01zm7-2a3 2 -20 1 1 0 -.01z"],video:[12,"M1 3h7v2l3-2v6l-3-2v2h-7z"],image:[12,"M1 2h10v8h-10zm1 1v5l3-3 2 2 1-1 2 2 v-5zm5.5 .5a1 1 0 1 0 .001 0z"],text:[12,"M2 1h5l3 3v7h-8zm1 1v8h6v-6h-2v-2zm1 4h4v1h-4zm0 2h4v1h-4z"],tree:[26,"M9 3h8v6h-3v3h8v5h2v6h-6v-6h2v-3h-6v3h2v6h-6v-6h2v-3h-6v3h2v6h-6v-6h2v-5h8v-3h-3z"],list:[7,"M1 1h1v1h-1zm0 2h1v1h-1zm0 2h1v1h-1z M3 1h3v1h-3zm0 2h3v1h-3zm0 2h3v1h-3z"],link:[17,"M12 1h2l2 2v2l-4 4h-2l5-5-2-2-5 5v-2zm-5 7h-2l-4 4v2l2 2h2l4-4v-2l-5 5-2-2zm-1 4l-1-1 6-6 1 1z"],chart:[10,"M1 9v-3h2v3zm3 0v-5h2v5zm3 0v-7h2v7z"],no:[7,"M1 3h5v1h-5z"],ban:[20,"M10 2a8 8 0 1 0 .01 0m0 2a6 6 0 1 1 -.01 0zm-4.5 .5l-1 1 10 10 1-1z"],warning:[16,"M8 1.7l-7 12h14zm0 9a1 1 0 1 1-.01 0c-3-7 3-7 0 0z"],info:[20,"M10 2a8 8 0 1 0 .01 0zm-1 3h2v2h-2zm-1 4h3v5l1 1h-3v-5"],share:[22,"M6 8a3 3 0 1 0 .01 0zm10-5a3 3 0 1 0 .01 0zm0 10a3 3 0 1 0 .01 0zm-10-3v2l10 5v-2zv2l10-5v-2z"],world:[12,"M6 1.2a4.8 4.8 0 1 0 .01 0zm0 .8a4 4 0 1 1-.01 0za3 4 0 1 0 .01 0za2.2 4 0 1 1-.01 0za.5 4 0 1 0 .01 0zm4 4a4 .2 0 1 0 0 .01z"],flag:[10,"M2 1h1v1q2-1 3 0t3-0v4q-2 1-3 0t-3 0v3h-1z"],pin:[10,"M2 4a3 3 0 0 1 6 0q0 2 -3 5q-3-3-3-5zm3 -2a2 2 0 1 0 .01 0z"],date:[11,"M1 1.5h9v8h-9zm1 2v5h7v-5zm.5-3v2h1.5v-2zm4.5 0v2h1.5v-2z"],time:[24,"M12 1a10 10 0 1 1 -.01 0zm0 2a8 8 0 1 0 .01 0zm-1.2 1h2v6.5l3.5 3.5-1.5 1.5-4-4z"],refresh:[20,"M10 .3v3a7 7 0 1 0 7 7h-2a5 5 0 1 1-5-5v3l5-4z"],view:[12,"m1 6q5-6 10 0v1q-5 -6-10 0zm5-3a2.8 2.8 0 1 1 -.01 0zm0 1.8a1.1 1.1 0 1 0 .01 0z"],card:[14,"M1 3.5q0-1 1-1h10q1 0 1 1v7q0 1 -1 1h-10q-1 0-1-1zm1 0v1h10v-1zm0 3v4h10v-4z"],sum:[12,"M2.5 3v-1h7v1h-5l3 3-3 3h5v1h-7v-1l3-3z"],copy:[12,"M2 3 h1v7h5v1h-6zm2-2h6v8h-6zm1 1v6h4v-6z"],help:[18,"M9 2a7 7 0 1 0 .01 0zm-3 5q0-3 3-3t3 3c0 3-2 2-2 4h-2c0-3 2-2 2-4q0-1-1-1t-1 1zm3 4.5a1.3 1.3 0 1 1 -.01 0z"],phone:[13,"M3 1l2 3-1.2 1.2 4 4 1.2-1.2 3 2c-3 6 -15 -6 -9-9z"],mail:[14,"M1 2.5h12v9h-12zm1 1v1l5 3 5 -3v-1zm0 2v5h10v-5l-5 3z"],chat:[12,"M6 1.2a5 4 0 1 0 .01 0zm0 1a4 3 0 1 1-.01 0zm-3.8 5.5l-1 3 4-2z"],send:[12,"M1 2l10 4-10 4 1.5-3.6 6-.4-6-.4z"],bookmark:[8,"M4 5l-2 2v-6h4v6z"],star:[32,"M16 2 l9 28-23-18 28 0-23 18z"],heart:[6,"M3 2c2-2 4 1 0 3c-4-2-2-5 0-3z"],tag:[9,"M1 5.2l4-4h3v3l-4 4zm6-3.1a.6 .6 0 1 0 .01 .01z"],expand:[10,"M1 1h3v1h-2v2h-1zm5 0h3v3h-1v-2h-2zm2 5h1v3h-3v-1h2zm-7 0h1v2h2v1h-3z"],collapse:[10,"M4 4h-3v-1h2v-2h1zm2 0v-3h1v2h2v1zm0 2h3v1h-2v2h-1zm-2 0v3h-1v-2h-2v-1z"],box:[26,"M3 6l10-2.7 10 2.7-10 3zm-.8 1.2l10 3v13l-10-4zm21.6 0l-10 3v13l10-4z"],columns:[16,"M1.5 2.5h13v11h-13zm1 2v8h5v-8zm6 0v8h5v-8z"],storage:[14,"M1.5 4.5v-3h11v3zm0 4zv-3h11v3zm0 4zv-3h11v3zm8 -2v1h2v-1zm0-4v1h2v-1zm0-4v1h2v-1z"],settings:[11,"M1 2h9v1h-9zm0 3h9v1h-9zm0 3h9v1h-9zm2-7h1v3h-1zm4 3h1v3h-1zm-3 3h1v3h-1z"],power:[18,"M6 3a6.7 6.7 0 1 0 6 0v2a4.9 4.9 0 1 1 -6 0zm2-1.5h2v8h-2z"],energy:[11,"M5 1.5l-2 4h2l-2 5 5-6h-2l2-3z"],sound:[9,"M3 6h-2v-3h2l3-2v7zm3.7-3q2 1.5 0 3z"],mic:[20,"M7 5 a3 3 0 1 1 6 0v4a3 3 0 1 1 -6 0zm-2 4a5 5 0 1 0 10 0zm4 4v3h-3v2h8v-2h-3v-3z"],photo:[10,"M1 2.5h2l1-1h2l1 1h2v5h-8zm4 .5a1.8 1.8 0 1 0 .01 0z"],print:[10,"M1 2.5h2v-1h4v1h2v4h-8zm2 2l-1 4h6l-1-4zm4-1h1v-.5h-1z"],play:[12,"M3 2v8l7-4z"],pause:[9,"M2 2h2v5h-2zm3 0h2v5h-2z"],stop:[9,"M2 2h5v5h-5z"],rec:[10,"M5 2a3 3 0 1 0 .01 0z"],layers:[14,"M1 5.5l6-3 6 3-6 3zm0 3l2-1 4 2 4-2 2 1-6 3z"],none:[1,"M1 1z"]};
/*! iconset - svg paths for building icons */function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! icons - include svg icons */var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,i,o=u(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,"icons")).opt={cIcon:"icon",pIcon:"icon-",cEmpty:"empty",qReplace:".replace",re:{"+":["ok","y"],"-":["no","n"],x:["ban","e"],"!":["warning","w"],"?":["help","i"]},iconSize:24,pSvg:"icon-"},t.parsed={},t.icons=r,t}return e=l,(n=[{key:"init",value:function(){var t=this;document.body.classList.add("js-icons"),this.app.listen("active",(function(e){return t.iconize(e.n,e.on)}))}},{key:"arrange",value:function(t){var e=this,n=t.n;this.app.ee(n,'[class*="'+this.opt.pIcon+'"]',(function(t){return e.iconize(t)})),this.app.ee(n,this.opt.qReplace,(function(t){return e.replace(t)}))}},{key:"iconize",value:function(t,e){var n=t.className.match(new RegExp("(?:^|\\s)"+(e?"(?:act-)":"")+this.opt.pIcon+"([\\w\\-_]+)"));n&&(void 0===e||t.matches('[class*="act-"]'))&&(this.app.ee(t,"svg",(function(t){return t.parentNode.removeChild(t)})),this.addIcon(n[1],t))}},{key:"addIcon",value:function(t,e){var n=e.textContent,i=this.i(t);i&&(e.classList.contains(this.opt.cEmpty)&&(this.app.clr(e),e.hasAttribute("title")||(e.title=n),e.classList.remove(this.opt.cEmpty)),e.firstChild&&!e.firstChild.tagName&&this.app.ins("span",e.firstChild,{},e,!1),e.insertBefore(i,e.firstChild))}},{key:"i",value:function(t,e){var n=t.split(/[\/_]/);if(t=n[0],void 0===this.parsed[t]){var i,r="";if(!1!==this.opt.pSvg){var o=this.opt.pSvg+t,a=document.getElementById(o);a&&"symbol"==a.tagName.toLowerCase()&&(r='<svg><use xlink:href="#'+o+'"></use></svg>')}if(r||"string"!=typeof(r=this.icons[t]||"")&&(r='<svg viewBox="0 0 '+r[0]+" "+r[0]+'"><path d="'+r[1]+'"/></svg>'),r){var s=document.createElement("div");s.innerHTML=r,(i=s.firstChild).getAttribute("width")||i.setAttribute("width",this.opt.iconSize),i.getAttribute("height")||i.setAttribute("height",this.opt.iconSize),i.getAttribute("class")||i.setAttribute("class",this.opt.cIcon)}else i="";this.parsed[t]=i}return this.parsed[t]?this.prepareSvg(this.parsed[t].cloneNode(!0),n.slice(1)):e?this.app.ins("span",e):null}},{key:"prepareSvg",value:function(t,e){return e[0]&&t.setAttribute("width",e[0]),e[1]&&t.setAttribute("height",e[1]),e.length>0&&t.setAttribute("class",e.slice(2).join(" ")||""),t}},{key:"replace",value:function(t){var e=this;this.app.ee(t,"*",(function(n){return e.replaceItem(n,t)}))}},{key:"replaceItem",value:function(t,e){var n=t.innerText.replace(/^\s+|\s+$/g,"");if(1==n.length&&n in this.opt.re&&!("val"in t.dataset)){t.innerHTML="";var i=e.dataset[this.opt.re[n][1]]||this.opt.re[n][0];this.app.ins("",this.i(i,n),"text-"+this.opt.re[n][1],t),t.dataset.val=n}}}])&&a(e.prototype,n),i&&a(e,i),l}(i.a)},function(t,e,n){"use strict";n.r(e);n(8);var i=n(4),r=n(15),o=n(5),a=n(9),s=n(10),u=n(11),l=n(12),c=n(6),p=n(7),h=n(13),f=n(14),v=new i.a;v.plug(r.a),v.plug(o.a),v.plug(a.a),v.plug(s.a),v.plug(u.a),v.plug(l.a),v.plug(c.a),v.plug(p.a),v.plug(h.a),v.plug(f.a),v.b([document],"DOMContentLoaded",(function(t){return v.init()})),window&&(window.d1=v)}]);