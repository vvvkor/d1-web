/*! d1-web v2.0.4 */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return o}));var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=null,this.name=e||"plugin",this.opt={}}var e,n,o;return e=t,(n=[{key:"install",value:function(t,e){var n=this;this.app=t,e&&Object.keys(e).forEach((function(t){return n.opt[t]=e[t]})),this.init()}},{key:"init",value:function(){console.log("plugin.init()")}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return o}));
/*! app - core of d1-web */
var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sequence=0,this.plugins={},this.handlers={},this.opt={debug:0,cAct:"act",cHide:"hide",cToggle:"toggle",cOff:"off",cClose:"close",cJs:"js",hClose:"#cancel",hOk:"#ok",sCancel:"Cancel",sOk:"OK"}}var e,n,o;return e=t,(n=[{key:"init",value:function(t){var e=this;document.body.classList.add(this.opt.cJs),this.fire("beforeopt"),t||(t=document.body.dataset.d1)&&(t=this.parse(t)),this.setOpt(t),this.dbg(["opt",this.opt]),this.initPlugins(t),this.b([window],"hashchange",(function(t){return e.on("hashchange",t)})),this.b([document],["invalid","focus","blur"],(function(t){return e.on(t.type,t)}),!0),this.b([document],["click","keydown","input","change","submit"],(function(t){return e.on(t.type,t)})),location.hash&&this.on("hashchange"),this.fire("after"),this.fire("ready")}},{key:"on",value:function(t,e){this.fire("before",e),this.fire(t,e),this.fire("after",e)}},{key:"setOpt",value:function(t){var e=this;t&&Object.keys(t).filter((function(t){return"plug"!=t})).forEach((function(n){return e.opt[n]=t[n]}))}},{key:"plug",value:function(t,e){var n=new t;this.plugins[e||n.name]=n}},{key:"initPlugins",value:function(t){var e=this;this.opt.disable&&this.opt.disable.forEach((function(t){return delete e.plugins[t]})),this.dbg(["plugins",this.plugins]),this.fire("beforeinit"),Object.keys(this.plugins).forEach((function(n){var i;return e.plugins[n].install(e,null==t||null===(i=t.plug)||void 0===i?void 0:i[n])})),this.fire("afterinit")}},{key:"pf",value:function(t,e){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];this.plugins[t]&&this.plugins[t][e]?(n=this.plugins[t])[e].apply(n,o):this.dbg(["no plugin function",t+"."+e+"()"],-1)}},{key:"toggle",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["toggle","toggle"].concat(e))}},{key:"fetch",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["fetch","fetch"].concat(e))}},{key:"dialog",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["dialog","openDialog"].concat(e))}},{key:"fire",value:function(t,e){var n=this;this.dbg(["fire "+t,e]),this.handlers[t]&&this.handlers[t].forEach((function(t){return t.call(n,e)}))}},{key:"listen",value:function(t,e){this.h(t,"",e)}},{key:"h",value:function(t,e,n,i){var o=this;t instanceof Array?t.forEach((function(t){return o.h(t,e,n,i)})):(this.handlers[t]||(this.handlers[t]=[]),this.handlers[t][i?"unshift":"push"]((function(t){e&&(t.recv=t.target.closest(e)),e&&!t.recv||n(t)})))}},{key:"dispatch",value:function(t,e,n){n||(n={bubbles:!0,cancelable:!0,view:window}),"function"==typeof Event&&(e instanceof Array?e.forEach((function(e){return t.dispatchEvent(new Event(e,n))})):t.dispatchEvent(new Event(e,n)))}},{key:"isDebug",value:function(t){return this.opt.debug>(t||0)||-1!=location.href.indexOf("d1debug")}},{key:"dbg",value:function(t,e,n){this.isDebug(e)&&console[n||e<0?"error":"log"](t)}},{key:"seq",value:function(){return++this.sequence}},{key:"a",value:function(t){return t?Array.prototype.slice.call(t):t}},{key:"q",value:function(t,e){try{return(e||document).querySelector(t)}catch(t){return null}}},{key:"qq",value:function(t,e){try{var n=(e||document).querySelectorAll(t);return this.a(n)}catch(t){return[]}}},{key:"next",value:function(t,e,n){for(;t=t[n?"previousElementSibling":"nextElementSibling"];)if(t.matches(e))return t}},{key:"nn",value:function(t){return t?"string"==typeof t?this.qq(t):t.tagName?[t]:this.a(t):[]}},{key:"b",value:function(t,e,n,i){e||this.e(t,n),n&&this.nn(t).forEach((function(t){return e instanceof Array?e.forEach((function(e){return t.addEventListener(e,(function(t){return n(t)}),i)})):t.addEventListener(e,(function(t){return n(t)}),i)}))}},{key:"e",value:function(t,e){var n=this;e&&this.nn(t).forEach((function(t){return e.call(n,t)}))}},{key:"typeOf",value:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},{key:"parse",value:function(t,e){var n="";try{n=JSON.parse(t)}catch(i){this.dbg(["JSON parse failed",t],-1),n=!0===e?t:void 0===e?null:e}return n}},{key:"ins",value:function(t,e,n,i,o){var r=document.createElement(t||"span");if("array"===this.typeOf(e)?e.forEach((function(t){return t.nodeType?r.appendChild(t):r.innerHTML+=t})):e&&e.nodeType?r.appendChild(e):e&&(r.innerHTML=e),n)for(var a in n)null!==n[a]&&void 0!==n[a]&&(a.match(/-/)?r.setAttribute(a.replace(/^-/,""),n[a]):r[a]=n[a]);return i?o?i.parentNode.insertBefore(r,o<0?i:i.nextSibling):!1===o?i.insertBefore(r,i.firstChild):i.appendChild(r):r}},{key:"clr",value:function(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"x",value:function(t,e,n){return this.ins("a",this.i("close","&#x2715;"),{href:this.opt.hClose,className:n||""},t,e)}},{key:"i",value:function(t,e){return this.plugins.icons?this.plugins.icons.i(t,e):this.ins("span",e||t)}},{key:"vis",value:function(t){return!t.classList.contains(this.opt.cOff)}},{key:"throttle",value:function(t,e){var n,i,o=!1;return function r(){o?(n=this,i=arguments):(t.apply(this,arguments),o=!0,setTimeout((function(){o=!1,i&&(r.apply(n,i),i=n=null)}),e))}}},{key:"delay",value:function(t,e,n){var i=null;return function(){var o=arguments,r=this;n&&i&&clearTimeout(i),i=setTimeout((function(){t.apply(r,o),i=null}),e)}}},{key:"debounce",value:function(t,e){return this.delay(t,e,!0)}},{key:"get",value:function(t,e){if(!t||"A"!=t.tagName)return null;var n,i={},o=t.search?t.search.replace(/^\?/,"").split("&"):[];for(n=0;n<o.length;n++){var r=o[n].split("=");i[r[0]]=decodeURIComponent(r[1]).replace(/\+/," ")}return e?i[e]:i}},{key:"makeUrl",value:function(t,e){t.tagName||(t=this.ins("a","",{href:t}));var n=this.get(t);Object.keys(e).forEach((function(t){return n[encodeURIComponent(t)]=encodeURIComponent(e[t])}));var i=Object.keys(n).map((function(t){return t+"="+n[t]})).join("&");return t.host?t.protocol+"//"+t.host+t.pathname+(i?"?"+i:"")+t.hash:t.href.replace(/[\?#].*$/,"")+(i?"?"+i:"")+t.hash}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! toggle - togglable interactive components */n.d(e,"a",(function(){return c}));var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,i,s=a(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,"toggle")).shown=null,t.nEsc=0,t.opt={keepHash:!0,mediaSuffixes:["-mobile","-desktop"],dlgUnscroll:!0,qTrg:"[id].target",qPop:".pop>div[id]",qNav:".nav ul",qDlg:".dlg",qTab:".tabs+div>div[id]",qTre:"ul.tree ul",qDrw:".drawer[id]",qAccRoot:"ul.tree.accordion",qAcc:"ul.tree.accordion ul",qGal:".gal>a[id]",qSubMem:".tabs.mem+div>div[id], ul.mem:not(.nav) ul",qDrawer:".drawer[id]:not(.shift)",qTip:'[data-tip=""][title], .tip[title]',cMem:"mem",cFade:"fade",cTarget:"target"},t}return e=l,(n=[{key:"init",value:function(){var t=this,e=this.app;e.e("a[data-href]",(function(t){return t.href=t.dataset.href})),e.listen("esc",(function(e){return t.esc(e)})),e.listen("hashchange",(function(e){return t.onHash(e)})),e.listen("keydown",(function(e){return t.onKey(e)})),e.h("click",'a[href^="#"]',(function(e){return t.onLink(e)})),e.listen("click",(function(e){return t.onClick(e)})),e.listen("after",(function(e){return e&&"click"==e.type?t.unpop(e.target):null})),e.listen("after",(function(e){return e&&-1==["click","keydown","hashchange"].indexOf(e.type)?null:t.modalStyle(e)})),e.listen("after",(function(e){return e&&-1==["click","keydown","hashchange"].indexOf(e.type)?null:t.setShown(null)}));var n=this.opt;this.opt.qTgl=this.opt.mediaSuffixes.concat([""]).map((function(t){return"."+e.opt.cToggle+t})).join(", ");var i=[n.qTrg,n.qPop,n.qNav,n.qDlg,n.qTab,n.qTre,n.qDrw].join(", ");this.opt.qUnpop=[n.qPop,n.qNav,n.qDlg,n.qDrw].join(", "),this.opt.qUnpopOn=[n.qPop,n.qNav,n.qDlg,n.qDrw].map((function(t){return t+":not(."+e.opt.cOff+")"})).join(", "),e.e(this.opt.qNav+", "+this.opt.qTre,(function(e){return t.attachSubNav(e)})),e.e(i,(function(e){return t.initToggler(e)})),this.opt.mediaSuffixes.forEach((function(n){return e.e(t.opt.qTrg+n,(function(e){return t.initToggler(e,n)}))})),e.e(this.opt.qGal+":last-child",(function(t){return e.x(t,1)})),e.e(this.opt.qSubMem,(function(e){return e.classList.add(t.opt.cMem)})),e.e("[id]",(function(e){return t.restoreVisibility(e)})),e.e(this.opt.qTab+":not(."+e.opt.cOff+") ~ [id]:not(."+e.opt.cOff+")",(function(e){return t.tgl(e,0)})),e.e(this.opt.qTab+":first-child",(function(n){return e.a(n.parentNode.children).filter((function(t){return e.vis(t)})).length?null:t.tgl(e.q(e.q('a[href^="#"]',n.parentNode.previousElementSibling).hash),1)})),e.e("."+e.opt.cToggle+"[id]",(function(e){return t.hiliteLinks(e)})),e.e(this.opt.qTip,(function(t){t.setAttribute("data-tip",t.title.replace(/\s\s+/g,"\n")),t.title=""})),e.listen("swipe",(function(e){return t.swipe(e)}))}},{key:"swipe",value:function(t){t.n.matches(this.opt.qDrw)&&(this.tgl(t.n,!1),setTimeout((function(){return t.n.style.transform=""}),500))}},{key:"modalStyle",value:function(t){var e=t?t.target:null,n=this.app.q(this.opt.qDlg+":not(."+this.app.opt.cOff+"), "+this.opt.qGal+'[id="'+location.hash.substr(1)+'"]'),i=window.innerWidth-document.documentElement.clientWidth,o=document.body.style;if(document.body.classList[n?"add":"remove"](this.opt.cFade),this.opt.dlgUnscroll&&(o.overflow=n?"hidden":"",n&&o.paddingRight||(o.paddingRight=n?i+"px":"")),this.app.dbg(["modalStyle",e,n,o.paddingRight]),n){var r=this.app.q('input:not([type="hidden"]), select, textarea, a.btn, a:not([href="'+this.app.opt.hClose+'"])',n),a=this.app.q(":focus",n);!r||a||e&&e.nodeType&&n.contains(e)||(this.app.dbg(["focus",e,n,r,a]),r.focus(),"text"==r.type&&r.select())}}},{key:"esc",value:function(t){this.app.dbg(["esc",t]),t&&t.preventDefault(),this.unpop(null,!0),this.unhash(),this.modalStyle()}},{key:"onHash",value:function(t){if(this.app.dbg(["hashchange",location.hash]),this.nEsc=0,location.hash===this.app.opt.hClose)this.app.fire("esc",t);else if(location.hash){var e=this.app.q(location.hash);if(e){var n=e.matches(this.opt.qTgl),i=e.matches(this.opt.qGal);n&&(this.unpop(),this.toggle(e,!0),this.opt.keepHash||this.unhash()),n||i?this.modalStyle():this.unpop()}}}},{key:"onKey",value:function(t){var e=t.keyCode;this.app.dbg(["keydown",e,this.nEsc]),27==e&&this.nEsc>=2?localStorage.clear():27==e&&this.app.fire("esc",t),this.nEsc=27==e&&this.nEsc<2?this.nEsc+1:0}},{key:"onLink",value:function(t){var e=t.recv;if(e&&e.hash===this.app.opt.hClose){t.preventDefault();var n=e.closest(this.opt.qTgl);this.app.dbg(["close",this.opt.qTgl,e,n]),n?this.tgl(n,!1):this.app.fire("esc",t)}else{var i=this.app.q(e.hash);i&&i.matches(this.opt.qTgl)&&(t.preventDefault(),i=this.toggle(i),this.app.vis(i)&&this.opt.keepHash?this.addHistory(e.hash):this.unhash())}}},{key:"onClick",value:function(t){this.nEsc=0,t.target.closest("a, input, select, textarea")||this.unhash(),t.clientX>=0&&t.clientX<=10&&t.clientY>5&&this.opt.qDrawer&&this.toggle(this.opt.qDrawer)}},{key:"initToggler",value:function(t,e){t.classList.remove(this.opt.cTarget+(e||"")),t.classList.add(this.app.opt.cToggle+(e||"")),this.tgl(t,0)}},{key:"attachSubNav",value:function(t){var e=this.app.a(t.parentNode.children).filter((function(t){return"A"==t.tagName})),n=e.filter((function(t){return!t.href}))[0]||e[0]||this.app.ins(""," ",{},t.parentNode,!1)&&this.app.ins("a",this.app.i("toggle","[+]"),{},t.parentNode,!1);n&&(t.id||(t.id="ul-"+this.app.seq()),n.href="#"+t.id)}},{key:"setShown",value:function(t){this.shown=t}},{key:"toggle",value:function(t,e,n){var i=t?t.tagName?t:this.app.q(t):null;return i&&(i.matches(this.opt.qTab)&&void 0===e&&(e=!0),this.app.fire("beforetoggle",{n:i,on:e,deep:n}),this.tgl(i,e),this.app.dbg(["toggle"+(n?" deep":""),e,i],n?2:1),this.app.vis(i)&&(this.fixPosition(i),n||this.setShown(i)),-1!=n&&(n||this.toggleDependent(i),this.hiliteLinks(i),this.storeVisibility(i)),this.app.fire("aftertoggle",{n:i,on:e,deep:n})),i}},{key:"tgl",value:function(t,e){t&&t.classList[e?"remove":void 0===e?"toggle":"add"](this.app.opt.cOff)}},{key:"toggleDependent",value:function(t){var e=this;this.app.vis(t)&&(t.matches(this.opt.qDlg)||(t.matches(this.opt.qTab)?this.app.e(t.parentNode.children,(function(n){return n==t?null:e.toggle(n,!1,1)})):t.matches(this.opt.qAcc)&&this.app.e(this.app.qq(this.opt.qAcc,t.closest(this.opt.qAccRoot)),(function(n){return n.contains(t)?null:e.toggle(n,!1,1)}))))}},{key:"unpop",value:function(t,e){var n=this,i=[t];if(i.push(this.shown),t){var o=t.closest("a");o&&o.hash&&i.push(this.app.q(o.hash))}this.app.dbg(["unpop",i]);var r=this.app.qq(this.opt.qUnpopOn).filter((function(t){return!(i&&i.filter((function(e){return e&&e.tagName&&t.contains(e)})).length)}));e&&(r=r.filter((function(t){return!n.app.q(n.opt.qUnpopOn,t)}))),this.app.e(r,(function(t){return n.toggle(t,!1,1)}))}},{key:"unhash",value:function(){location.hash&&(location.hash=this.app.opt.hClose),this.addHistory(location.pathname+location.search)}},{key:"addHistory",value:function(t){history.pushState({},"",t)}},{key:"storeVisibility",value:function(t){t&&t.id&&t.classList.contains(this.opt.cMem)&&localStorage.setItem("vis#"+t.id,this.app.vis(t)?1:-1)}},{key:"restoreVisibility",value:function(t){if(t&&t.id&&t.classList&&t.classList.contains(this.opt.cMem)){var e=localStorage.getItem("vis#"+t.id);e&&this.toggle(t,e>0,-1)}}},{key:"hiliteLinks",value:function(t){var e=this,n=this.app.vis(t)?"add":"remove";this.app.e('a[href="#'+t.id+'"]',(function(t){return t.classList[n](e.app.opt.cAct)}))}},{key:"fixPosition",value:function(t){var e=t.matches(this.opt.qNav),n=e?window.getComputedStyle(t.parentNode.parentNode):null,i=!!n&&"flex"!=n.display;if(t.matches(this.opt.qPop)||e){var o=t.style,r=t.parentNode,a=r.nextElementSibling,s=(a=a&&"INPUT"==a.tagName?a:null)||t.parentNode;if(s){o.right="auto",o.left=i?"100%":0,o.top=i?0:"100%";var l=t.getBoundingClientRect(),c=s.getBoundingClientRect(),u=l.right>window.innerWidth,p=l.bottom>window.innerHeight,h=c.width>300;i?o.left=u||h?"3em":"100%":u&&l.width>c.width&&c.right>l.width?o.left=c.width-l.width+"px":o.left=0,i?o.top=u||h?"90%":0:p&&c.top>l.height?o.top=(a?-c.height:0)-l.height+"px":o.top="100%",a&&(r.style.verticalAlign="bottom")}}}}])&&o(e.prototype,n),i&&o(e,i),l}(n(0).a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! dialog - replacement of standard Javascript dialogs: alert, confirm, prompt */n.d(e,"a",(function(){return c}));var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,i,s=a(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,"dialog")).dlg=null,t.opt={ccDlg:"dlg rad",customDialog:!0,aConfirm:"_confirm",dHead:"head",dPic:"pic",dPrompt:"prompt",dCaption:"caption",cBtn:"btn pad",qAlert:"a.alert",qDialog:"a.dialog, input.dialog"},t}return e=l,(n=[{key:"init",value:function(){var t=this;this.opt.ccDlg=this.app.opt.cToggle+" "+this.app.opt.cOff+" "+this.opt.ccDlg,this.dlg||(this.dlg=this.app.ins("div","",{className:this.opt.ccDlg},document.body)),this.app.h("click",this.opt.qAlert+", "+this.opt.qDialog,(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(t){return t.preventDefault(),this.openByNode(t.recv)}},{key:"openDialog",value:function(t,e,n,i){var o=this;i=i||{};var r=this.dlg,a=this.app;r.className=this.opt.ccDlg+(i.class?" "+i.class:""),a.clr(r),t.nodeType&&(t=t.dataset[this.opt.dHead]||"");var s=a.ins("div","",{className:"row bg"},r),l=a.ins("h3"," "+(t||""),{className:"fit pad"},s);if(i.icon){var c=i.icon.match(/(\S+)(\s(.*))?/);c&&l.insertBefore(a.ins("span",a.i(c[1]),{className:c[3]||""}),l.firstChild)}a.x(s,0,"pad hover col-0");var u=a.ins("div","",{className:"pad"},r);e&&a.ins("div",e,{},u);var p={value:!0};(i.def||""===i.def)&&(p=a.ins("input","",{value:i.def},u));var h=a.ins("p","",{className:"r"},u),f=this.opt.cBtn+" "+(i.btn||(" "==e.substr(0,1)?"bg-e":"")),d=this.opt.cBtn+" bg-n",y=a.ins("a",i.ok||a.opt.sOk,{href:a.opt.hClose,className:i.rev?d:f},h);n&&(a.ins("a",i.cancel||a.opt.sCancel,{href:a.opt.hClose,className:i.rev?f:d},y,i.rev?-1:1),a.ins(""," ",{},y,i.rev?-1:1),y.href=a.opt.hOk,a.b([y],"click",(function(t){t.preventDefault(),o.callback(n,p.value,t)})),p.tagName&&a.b([p],"keyup",(function(t){return 13==t.keyCode?o.callback(n,p.value,t):null}))),this.app.toggle(this.dlg,!0)}},{key:"closeDialog",value:function(){this.app.pf("toggle","unpop")}},{key:"callback",value:function(t,e,n){t.call(this,e,n)||this.closeDialog()}},{key:"openByNode",value:function(t,e){var n=this;if(!t.form||t.form.checkValidity()){var i=this.app,o=(t.dataset[this.opt.dHead]||"").replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),r=t.dataset[this.opt.dPic]||"",a=t.dataset[this.opt.dPrompt]||"",s=(t.dataset[this.opt.dCaption]||t.title||a||"!").replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),l="reverse"in t.dataset,c=t.dataset.src;!(c=c?i.q(c):null)&&t.form&&(c=t.form.elements[a]);var u=null,p=t.matches(this.opt.qAlert),h=a?c?c.value:i.get(t,a):null;return h&&"go"in t.dataset?this.onAnswer(t,h,a):this.opt.customDialog?this.openDialog(o,s,p?null:function(e){return n.onAnswer(t,e,a)},{ok:t.dataset.ok,cancel:t.dataset.cancel,icon:r,btn:" "==s.substr(0,1)||t&&t.className.match(/-[we]\b/)?"bg-e":"bg-y",def:h,rev:l}):(u=p?alert(s):a?prompt(s,h):confirm(s),this.onAnswer(t,u,a)),this.dlg}t.form.reportValidity&&t.form.reportValidity()}},{key:"onAnswer",value:function(t,e,n,i){var o=this.app;if(e||""===e)if(t&&t.form){if(!0!==e){var r=t.form.elements[n]||o.ins("input","",{type:"hidden",name:n},t.form);r&&(r.value=e)}(t.form.reportValidity?t.form.reportValidity():t.form.checkValidity())?(o.q('[type="hidden"][name="'+t.name+'"]',t.form)||o.ins("input","",{type:"hidden",name:t.name,value:t.value},t.form),t.form.elements[this.opt.aConfirm]||o.ins("input","",{type:"hidden",name:this.opt.aConfirm,value:1},t.form),t.form.submit()):this.closeDialog()}else if(t&&t.href){var a,s="#"===(t.getAttribute("href")||"").substr(0,1),l="_blank"==t.target;if((s||l)&&this.closeDialog(),s)a=t.hash;else{var c={};c[this.opt.aConfirm]=1,!0!==e&&(c[n]=e),a=o.makeUrl(t,c)}"_blank"==t.target?window.open(a,t.target):location.href=a}}}])&&o(e.prototype,n),i&&o(e,i),l}(n(0).a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! gallery - image gallery */n.d(e,"a",(function(){return c}));var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,i,s=a(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,"gallery")).opt={idPrefix:"pic-",num:!0,cGal:"gal",dCaption:"caption",qGal:".gal>a[id]",qGallery:".gallery",qLinks:"a.pic"},t}return e=l,(n=[{key:"init",value:function(){var t=this;this.app.listen("hashchange",(function(e){return t.onHash(e)})),this.app.listen("keydown",(function(e){return t.onKey(e)})),this.app.h("click",this.opt.qGal,(function(e){return t.next(e)})),this.app.listen("swipe",(function(e){return t.swipe(e)})),this.prepareAll()}},{key:"prepareAll",value:function(t){var e=this;this.app.e(this.app.qq(this.opt.qGallery,t),(function(t){return e.prepare(t)}))}},{key:"swipe",value:function(t){t.n.matches(this.opt.qGal)&&(4==t.dir?this.browse(t.n):2==t.dir?this.browse(t.n,!0):3==t.dir&&this.app.fire("esc"))}},{key:"next",value:function(t){if(!t.defaultPrevented){var e=t.recv;t.clientX>0&&t.clientX<e.clientWidth/3&&(this.browse(e,!0),t.preventDefault())}}},{key:"browse",value:function(t,e){if(e){var n=t.previousElementSibling||this.app.qq("a[id]",t.parentNode).pop();n.id&&(location.hash="#"+n.id)}else location.hash=t.hash}},{key:"onHash",value:function(){var t=this.app.q(location.hash);t&&(this.loadImg(t),this.loadImg(this.app.q(t.hash)))}},{key:"loadImg",value:function(t){t&&t.vImg&&(t.style.backgroundImage='url("'+t.vImg+'")',t.vImg="")}},{key:"prepare",value:function(t){for(var e=this.app,n=e.ins("div","",{className:this.opt.cGal}),i=e.qq(this.opt.qLinks,t),o=i.length,r=0,a=0;a<o;a++)if(!i[a].vDone){var s=e.seq();a||(r=s);var l=e.ins("a","",{className:"gallery-pic swipe drag",id:this.opt.idPrefix+s,href:"#"+this.opt.idPrefix+(a==o-1?r:s+1)},n);l.vLink=i[a].getAttribute("href")||"",l.vImg=l.vLink,l.dataset[this.opt.dCaption]=(this.opt.num?a+1+"/"+o+(i[a].title?" - ":""):"")+(i[a].title||""),i[a].href="#"+l.id,i[a].vDone=1}e.x(n),document.body.appendChild(n)}},{key:"onKey",value:function(t){if(location.hash){var e=this.app.q(location.hash);if(e&&e.hash){var n=t.keyCode;if(37==n||38==n)this.browse(e,!0);else if(39==n||40==n)this.browse(e);else if(8==n){var i=e.vLink;i||(i=(i=window.getComputedStyle(e).backgroundImage).substring(4,i.length-1).replace(/^"|"$/g,"")),i&&(location.href=i)}}}}}])&&o(e.prototype,n),i&&o(e,i),l}(n(0).a)},function(t,e){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})},,function(t,e,n){"use strict";n.r(e);n(5);var i=n(1),o=n(2),r=n(3),a=n(4),s=new i.a;s.plug(o.a),s.plug(r.a),s.plug(a.a),s.b([document],"DOMContentLoaded",(function(t){return s.init()})),window&&(window.d1=s)}]);