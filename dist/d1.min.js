/*! d1-web v2.1.1 */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return o}));var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=null,this.name=e||"plugin",this.opt={}}var e,n,o;return e=t,(n=[{key:"install",value:function(t,e){var n=this;this.app=t,e&&Object.keys(e).forEach((function(t){return n.opt[t]=e[t]})),this.init()}},{key:"init",value:function(){console.log("plugin.init()")}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return o}));
/*! app - core of d1-web */
var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sequence=0,this.plugins={},this.handlers={},this.opt={debug:0,cAct:"act",cHide:"hide",cToggle:"toggle",cOff:"off",cClose:"close",cJs:"js",hClose:"#cancel",hOk:"#ok",sCancel:"Cancel",sOk:"OK"}}var e,n,o;return e=t,(n=[{key:"init",value:function(t){var e=this;document.body.classList.add(this.opt.cJs),this.fire("beforeopt"),t||(t=document.body.dataset.d1)&&(t=this.parse(t)),this.setOpt(t),this.dbg(["opt",this.opt]),this.initPlugins(t),this.b([window],"hashchange",(function(t){return e.on("hashchange",t)})),this.b([document],["invalid","focus","blur"],(function(t){return e.on(t.type,t)}),!0),this.b([document],["click","keydown","input","change","submit"],(function(t){return e.on(t.type,t)})),location.hash&&this.on("hashchange"),this.fire("after"),this.fire("ready")}},{key:"on",value:function(t,e){this.fire("before",e),this.fire(t,e),this.fire("after",e)}},{key:"setOpt",value:function(t){var e=this;t&&Object.keys(t).filter((function(t){return"plug"!=t})).forEach((function(n){return e.opt[n]=t[n]}))}},{key:"plug",value:function(t,e){var n=new t;this.plugins[e||n.name]=n}},{key:"initPlugins",value:function(t){var e=this;this.opt.disable&&this.opt.disable.forEach((function(t){return delete e.plugins[t]})),this.dbg(["plugins",this.plugins]),this.fire("beforeinit"),Object.keys(this.plugins).forEach((function(n){var i;return e.plugins[n].install(e,null==t||null===(i=t.plug)||void 0===i?void 0:i[n])})),this.fire("afterinit")}},{key:"pf",value:function(t,e){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];this.plugins[t]&&this.plugins[t][e]?(n=this.plugins[t])[e].apply(n,o):this.dbg(["no plugin function",t+"."+e+"()"],-1)}},{key:"toggle",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["toggle","toggle"].concat(e))}},{key:"fetch",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["fetch","fetch"].concat(e))}},{key:"dialog",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.pf.apply(this,["dialog","openDialog"].concat(e))}},{key:"fire",value:function(t,e){var n=this;this.dbg(["fire "+t,e]),this.handlers[t]&&this.handlers[t].forEach((function(t){return t.call(n,e)}))}},{key:"listen",value:function(t,e){this.h(t,"",e)}},{key:"h",value:function(t,e,n,i){var o=this;t instanceof Array?t.forEach((function(t){return o.h(t,e,n,i)})):(this.handlers[t]||(this.handlers[t]=[]),this.handlers[t][i?"unshift":"push"]((function(t){e&&(t.recv=t.target.closest(e)),e&&!t.recv||n(t)})))}},{key:"dispatch",value:function(t,e,n){n||(n={bubbles:!0,cancelable:!0,view:window}),"function"==typeof Event&&(e instanceof Array?e.forEach((function(e){return t.dispatchEvent(new Event(e,n))})):t.dispatchEvent(new Event(e,n)))}},{key:"isDebug",value:function(t){return this.opt.debug>(t||0)||-1!=location.href.indexOf("d1debug")}},{key:"dbg",value:function(t,e,n){this.isDebug(e)&&console[n||e<0?"error":"log"](t)}},{key:"seq",value:function(){return++this.sequence}},{key:"a",value:function(t){return t?Array.prototype.slice.call(t):t}},{key:"path",value:function(t,e,n,i){var o=t;if(i&&o&&"object"===this.typeOf(o)&&o[i]&&(o=o[i]),e){e=e.split(".");for(var r=0;r<e.length;r++)if(e[r]){if(void 0===o[e[r]])return n;o=o[e[r]]}}return o}},{key:"q",value:function(t,e){try{return(e||document).querySelector(t)}catch(t){return null}}},{key:"qq",value:function(t,e){try{var n=(e||document).querySelectorAll(t);return this.a(n)}catch(t){return[]}}},{key:"next",value:function(t,e,n){for(;t=t[n?"previousElementSibling":"nextElementSibling"];)if(t.matches(e))return t}},{key:"nn",value:function(t){return t?"string"==typeof t?this.qq(t):t.tagName?[t]:this.a(t):[]}},{key:"b",value:function(t,e,n,i){e||this.e(t,n),n&&this.nn(t).forEach((function(t){return e instanceof Array?e.forEach((function(e){return t.addEventListener(e,(function(t){return n(t)}),i)})):t.addEventListener(e,(function(t){return n(t)}),i)}))}},{key:"e",value:function(t,e){var n=this;e&&this.nn(t).forEach((function(t){return e.call(n,t)}))}},{key:"typeOf",value:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},{key:"parse",value:function(t,e){var n="";try{n=JSON.parse(t)}catch(i){this.dbg(["JSON parse failed",t],-1),n=!0===e?t:void 0===e?null:e}return n}},{key:"ins",value:function(t,e,n,i,o){var r=document.createElement(t||"span");if("array"===this.typeOf(e)?e.forEach((function(t){return t.nodeType?r.appendChild(t):r.innerHTML+=t})):e&&e.nodeType?r.appendChild(e):e&&(r.innerHTML=e),n)for(var a in n)null!==n[a]&&void 0!==n[a]&&(a.match(/-/)?r.setAttribute(a.replace(/^-/,""),n[a]):r[a]=n[a]);return i?o?i.parentNode.insertBefore(r,o<0?i:i.nextSibling):!1===o?i.insertBefore(r,i.firstChild):i.appendChild(r):r}},{key:"clr",value:function(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"x",value:function(t,e,n){return this.ins("a",this.i("close","&#x2715;"),{href:this.opt.hClose,className:n||""},t,e)}},{key:"i",value:function(t,e){return this.plugins.icons?this.plugins.icons.i(t,e):this.ins("span",e||t)}},{key:"vis",value:function(t){return!t.classList.contains(this.opt.cOff)}},{key:"throttle",value:function(t,e){var n,i,o=!1;return function r(){o?(n=this,i=arguments):(t.apply(this,arguments),o=!0,setTimeout((function(){o=!1,i&&(r.apply(n,i),i=n=null)}),e))}}},{key:"delay",value:function(t,e,n){var i=null;return function(){var o=arguments,r=this;n&&i&&clearTimeout(i),i=setTimeout((function(){t.apply(r,o),i=null}),e)}}},{key:"debounce",value:function(t,e){return this.delay(t,e,!0)}},{key:"get",value:function(t,e){if(!t||"A"!=t.tagName)return null;var n,i={},o=t.search?t.search.replace(/^\?/,"").split("&"):[];for(n=0;n<o.length;n++){var r=o[n].split("=");i[r[0]]=decodeURIComponent(r[1]).replace(/\+/," ")}return e?i[e]:i}},{key:"makeUrl",value:function(t,e){t.tagName||(t=this.ins("a","",{href:t}));var n=this.get(t);Object.keys(e).forEach((function(t){return n[encodeURIComponent(t)]=encodeURIComponent(e[t])}));var i=Object.keys(n).map((function(t){return t+"="+n[t]})).join("&");return t.host?t.protocol+"//"+t.host+t.pathname+(i?"?"+i:"")+t.hash:t.href.replace(/[\?#].*$/,"")+(i?"?"+i:"")+t.hash}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! toggle - togglable interactive components */n.d(e,"a",(function(){return u}));var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t);var e,n,i,s=a(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,"toggle")).shown=null,t.nEsc=0,t.opt={keepHash:!0,mediaSuffixes:["-mobile","-desktop"],dlgUnscroll:!0,qTrg:"[id].target",qPop:".pop>div[id]",qNav:".nav ul",qDlg:".dlg",qTab:".tabs+div>div[id]",qTre:"ul.tree ul",qDrw:".drawer[id]",qAccRoot:"ul.tree.accordion",qAcc:"ul.tree.accordion ul",qGal:".gal>a[id]",qSubMem:".tabs.mem+div>div[id], ul.mem:not(.nav) ul",qDrawer:".drawer[id]:not(.shift)",qTip:'[data-tip=""][title], .tip[title]',cMem:"mem",cFade:"fade",cTarget:"target"},t}return e=c,(n=[{key:"init",value:function(){var t=this,e=this.app;e.e("a[data-href]",(function(t){return t.href=t.dataset.href})),e.listen("esc",(function(e){return t.esc(e)})),e.listen("hashchange",(function(e){return t.onHash(e)})),e.listen("keydown",(function(e){return t.onKey(e)})),e.h("click",'a[href^="#"]',(function(e){return t.onLink(e)})),e.listen("click",(function(e){return t.onClick(e)})),e.listen("after",(function(e){return e&&"click"==e.type?t.unpop(e.target):null})),e.listen("after",(function(e){return e&&-1==["click","keydown","hashchange"].indexOf(e.type)?null:t.modalStyle(e)})),e.listen("after",(function(e){return e&&-1==["click","keydown","hashchange"].indexOf(e.type)?null:t.setShown(null)}));var n=this.opt;this.opt.qTgl=this.opt.mediaSuffixes.concat([""]).map((function(t){return"."+e.opt.cToggle+t})).join(", ");var i=[n.qTrg,n.qPop,n.qNav,n.qDlg,n.qTab,n.qTre,n.qDrw].join(", ");this.opt.qUnpop=[n.qPop,n.qNav,n.qDlg,n.qDrw].join(", "),this.opt.qUnpopOn=[n.qPop,n.qNav,n.qDlg,n.qDrw].map((function(t){return t+":not(."+e.opt.cOff+")"})).join(", "),e.e(this.opt.qNav+", "+this.opt.qTre,(function(e){return t.attachSubNav(e)})),e.e(i,(function(e){return t.initToggler(e)})),this.opt.mediaSuffixes.forEach((function(n){return e.e(t.opt.qTrg+n,(function(e){return t.initToggler(e,n)}))})),e.e(this.opt.qGal+":last-child",(function(t){return e.x(t,1)})),e.e(this.opt.qSubMem,(function(e){return e.classList.add(t.opt.cMem)})),e.e("[id]",(function(e){return t.restoreVisibility(e)})),e.e(this.opt.qTab+":not(."+e.opt.cOff+") ~ [id]:not(."+e.opt.cOff+")",(function(e){return t.tgl(e,0)})),e.e(this.opt.qTab+":first-child",(function(n){return e.a(n.parentNode.children).filter((function(t){return e.vis(t)})).length?null:t.tgl(e.q(e.q('a[href^="#"]',n.parentNode.previousElementSibling).hash),1)})),e.e("."+e.opt.cToggle+"[id]",(function(e){return t.hiliteLinks(e)})),e.e(this.opt.qTip,(function(t){t.setAttribute("data-tip",t.title.replace(/\s\s+/g,"\n")),t.title=""})),e.listen("swipe",(function(e){return t.swipe(e)}))}},{key:"swipe",value:function(t){t.n.matches(this.opt.qDrw)&&(this.tgl(t.n,!1),setTimeout((function(){return t.n.style.transform=""}),500))}},{key:"modalStyle",value:function(t){var e=t?t.target:null,n=this.app.q(this.opt.qDlg+":not(."+this.app.opt.cOff+"), "+this.opt.qGal+'[id="'+location.hash.substr(1)+'"]'),i=window.innerWidth-document.documentElement.clientWidth,o=document.body.style;if(document.body.classList[n?"add":"remove"](this.opt.cFade),this.opt.dlgUnscroll&&(o.overflow=n?"hidden":"",n&&o.paddingRight||(o.paddingRight=n?i+"px":"")),this.app.dbg(["modalStyle",e,n,o.paddingRight]),n){var r=this.app.q('input:not([type="hidden"]), select, textarea, a.btn, a:not([href="'+this.app.opt.hClose+'"])',n),a=this.app.q(":focus",n);!r||a||e&&e.nodeType&&n.contains(e)||(this.app.dbg(["focus",e,n,r,a]),r.focus(),"text"==r.type&&r.select())}}},{key:"esc",value:function(t){this.app.dbg(["esc",t]),t&&t.preventDefault(),this.unpop(null,!0),this.unhash(),this.modalStyle()}},{key:"onHash",value:function(t){if(this.app.dbg(["hashchange",location.hash]),this.nEsc=0,location.hash===this.app.opt.hClose)this.app.fire("esc",t);else if(location.hash){var e=this.app.q(location.hash);if(e){var n=e.matches(this.opt.qTgl),i=e.matches(this.opt.qGal);n&&(this.unpop(),this.toggle(e,!0),this.opt.keepHash||this.unhash()),n||i?this.modalStyle():this.unpop()}}}},{key:"onKey",value:function(t){var e=t.keyCode;this.app.dbg(["keydown",e,this.nEsc]),27==e&&this.nEsc>=2?localStorage.clear():27==e&&this.app.fire("esc",t),this.nEsc=27==e&&this.nEsc<2?this.nEsc+1:0}},{key:"onLink",value:function(t){var e=t.recv;if(e&&e.hash===this.app.opt.hClose){t.preventDefault();var n=e.closest(this.opt.qTgl);this.app.dbg(["close",this.opt.qTgl,e,n]),n?this.tgl(n,!1):this.app.fire("esc",t)}else{var i=this.app.q(e.hash);i&&i.matches(this.opt.qTgl)&&(t.preventDefault(),i=this.toggle(i),this.app.vis(i)&&this.opt.keepHash?this.addHistory(e.hash):this.unhash())}}},{key:"onClick",value:function(t){this.nEsc=0,t.target.closest("a, input, select, textarea")||this.unhash(),t.clientX>=0&&t.clientX<=10&&t.clientY>5&&this.opt.qDrawer&&this.toggle(this.opt.qDrawer)}},{key:"initToggler",value:function(t,e){t.classList.remove(this.opt.cTarget+(e||"")),t.classList.add(this.app.opt.cToggle+(e||"")),this.tgl(t,0)}},{key:"attachSubNav",value:function(t){var e=this.app.a(t.parentNode.children).filter((function(t){return"A"==t.tagName})),n=e.filter((function(t){return!t.href}))[0]||e[0]||this.app.ins(""," ",{},t.parentNode,!1)&&this.app.ins("a",this.app.i("toggle","[+]"),{},t.parentNode,!1);n&&(t.id||(t.id="ul-"+this.app.seq()),n.href="#"+t.id)}},{key:"setShown",value:function(t){this.shown=t}},{key:"toggle",value:function(t,e,n){var i=t?t.tagName?t:this.app.q(t):null;return i&&(i.matches(this.opt.qTab)&&void 0===e&&(e=!0),this.app.fire("beforetoggle",{n:i,on:e,deep:n}),this.tgl(i,e),this.app.dbg(["toggle"+(n?" deep":""),e,i],n?2:1),this.app.vis(i)&&(this.fixPosition(i),n||this.setShown(i)),-1!=n&&(n||this.toggleDependent(i),this.hiliteLinks(i),this.storeVisibility(i)),this.app.fire("aftertoggle",{n:i,on:e,deep:n})),i}},{key:"tgl",value:function(t,e){t&&t.classList[e?"remove":void 0===e?"toggle":"add"](this.app.opt.cOff)}},{key:"toggleDependent",value:function(t){var e=this;this.app.vis(t)&&(t.matches(this.opt.qDlg)||(t.matches(this.opt.qTab)?this.app.e(t.parentNode.children,(function(n){return n==t?null:e.toggle(n,!1,1)})):t.matches(this.opt.qAcc)&&this.app.e(this.app.qq(this.opt.qAcc,t.closest(this.opt.qAccRoot)),(function(n){return n.contains(t)?null:e.toggle(n,!1,1)}))))}},{key:"unpop",value:function(t,e){var n=this,i=[t];if(i.push(this.shown),t){var o=t.closest("a");o&&o.hash&&i.push(this.app.q(o.hash))}this.app.dbg(["unpop",i]);var r=this.app.qq(this.opt.qUnpopOn).filter((function(t){return!(i&&i.filter((function(e){return e&&e.tagName&&t.contains(e)})).length)}));e&&(r=r.filter((function(t){return!n.app.q(n.opt.qUnpopOn,t)}))),this.app.e(r,(function(t){return n.toggle(t,!1,1)}))}},{key:"unhash",value:function(){location.hash&&(location.hash=this.app.opt.hClose),this.addHistory(location.pathname+location.search)}},{key:"addHistory",value:function(t){history.pushState({},"",t)}},{key:"storeVisibility",value:function(t){t&&t.id&&t.classList.contains(this.opt.cMem)&&localStorage.setItem("vis#"+t.id,this.app.vis(t)?1:-1)}},{key:"restoreVisibility",value:function(t){if(t&&t.id&&t.classList&&t.classList.contains(this.opt.cMem)){var e=localStorage.getItem("vis#"+t.id);e&&this.toggle(t,e>0,-1)}}},{key:"hiliteLinks",value:function(t){var e=this,n=this.app.vis(t)?"add":"remove";this.app.e('a[href="#'+t.id+'"]',(function(t){return t.classList[n](e.app.opt.cAct)}))}},{key:"fixPosition",value:function(t){var e=t.matches(this.opt.qNav),n=e?window.getComputedStyle(t.parentNode.parentNode):null,i=!!n&&"flex"!=n.display;if(t.matches(this.opt.qPop)||e){var o=t.style,r=t.parentNode,a=r.nextElementSibling,s=(a=a&&"INPUT"==a.tagName?a:null)||t.parentNode;if(s){o.right="auto",o.left=i?"100%":0,o.top=i?0:"100%";var c=t.getBoundingClientRect(),u=s.getBoundingClientRect(),l=c.right>window.innerWidth,p=c.bottom>window.innerHeight,h=u.width>300;i?o.left=l||h?"3em":"100%":l&&c.width>u.width&&u.right>c.width?o.left=u.width-c.width+"px":o.left=0,i?o.top=l||h?"90%":0:p&&u.top>c.height?o.top=(a?-u.height:0)-c.height+"px":o.top="100%",a&&(r.style.verticalAlign="bottom")}}}}])&&o(e.prototype,n),i&&o(e,i),c}(n(0).a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! dialog - replacement of standard Javascript dialogs: alert, confirm, prompt */n.d(e,"a",(function(){return u}));var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t);var e,n,i,s=a(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,"dialog")).dlg=null,t.opt={ccDlg:"dlg rad",customDialog:!0,aConfirm:"_confirm",dHead:"head",dPic:"pic",dPrompt:"prompt",dCaption:"caption",cBtn:"btn pad",qAlert:"a.alert",qDialog:"a.dialog, input.dialog"},t}return e=c,(n=[{key:"init",value:function(){var t=this;this.opt.ccDlg=this.app.opt.cToggle+" "+this.app.opt.cOff+" "+this.opt.ccDlg,this.dlg||(this.dlg=this.app.ins("div","",{className:this.opt.ccDlg},document.body)),this.app.h("click",this.opt.qAlert+", "+this.opt.qDialog,(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(t){return t.preventDefault(),this.openByNode(t.recv)}},{key:"openDialog",value:function(t,e,n,i){var o=this;i=i||{};var r=this.dlg,a=this.app;r.className=this.opt.ccDlg+(i.class?" "+i.class:""),a.clr(r),t.nodeType&&(t=t.dataset[this.opt.dHead]||"");var s=a.ins("div","",{className:"row bg"},r),c=a.ins("h3"," "+(t||""),{className:"fit pad"},s);if(i.icon){var u=i.icon.match(/(\S+)(\s(.*))?/);u&&c.insertBefore(a.ins("span",a.i(u[1]),{className:u[3]||""}),c.firstChild)}a.x(s,0,"pad hover col-0");var l=a.ins("div","",{className:"pad"},r);e&&a.ins("div",e,{},l);var p={value:!0};(i.def||""===i.def)&&(p=a.ins("input","",{value:i.def},l));var h=a.ins("p","",{className:"r"},l),f=this.opt.cBtn+" "+(i.btn||(" "==e.substr(0,1)?"bg-e":"")),v=this.opt.cBtn+" bg-n",d=a.ins("a",i.ok||a.opt.sOk,{href:a.opt.hClose,className:i.rev?v:f},h);n&&(a.ins("a",i.cancel||a.opt.sCancel,{href:a.opt.hClose,className:i.rev?f:v},d,i.rev?-1:1),a.ins(""," ",{},d,i.rev?-1:1),d.href=a.opt.hOk,a.b([d],"click",(function(t){t.preventDefault(),o.callback(n,p.value,t)})),p.tagName&&a.b([p],"keyup",(function(t){return 13==t.keyCode?o.callback(n,p.value,t):null}))),this.app.toggle(this.dlg,!0)}},{key:"closeDialog",value:function(){this.app.pf("toggle","unpop")}},{key:"callback",value:function(t,e,n){t.call(this,e,n)||this.closeDialog()}},{key:"openByNode",value:function(t,e){var n=this;if(!t.form||t.form.checkValidity()){var i=this.app,o=(t.dataset[this.opt.dHead]||"").replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),r=t.dataset[this.opt.dPic]||"",a=t.dataset[this.opt.dPrompt]||"",s=(t.dataset[this.opt.dCaption]||t.title||a||"!").replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),c="reverse"in t.dataset,u=t.dataset.src;!(u=u?i.q(u):null)&&t.form&&(u=t.form.elements[a]);var l=null,p=t.matches(this.opt.qAlert),h=a?u?u.value:i.get(t,a):null;return h&&"go"in t.dataset?this.onAnswer(t,h,a):this.opt.customDialog?this.openDialog(o,s,p?null:function(e){return n.onAnswer(t,e,a)},{ok:t.dataset.ok,cancel:t.dataset.cancel,icon:r,btn:" "==s.substr(0,1)||t&&t.className.match(/-[we]\b/)?"bg-e":"bg-y",def:h,rev:c}):(l=p?alert(s):a?prompt(s,h):confirm(s),this.onAnswer(t,l,a)),this.dlg}t.form.reportValidity&&t.form.reportValidity()}},{key:"onAnswer",value:function(t,e,n,i){var o=this.app;if(e||""===e)if(t&&t.form){if(!0!==e){var r=t.form.elements[n]||o.ins("input","",{type:"hidden",name:n},t.form);r&&(r.value=e)}(t.form.reportValidity?t.form.reportValidity():t.form.checkValidity())?(o.q('[type="hidden"][name="'+t.name+'"]',t.form)||o.ins("input","",{type:"hidden",name:t.name,value:t.value},t.form),t.form.elements[this.opt.aConfirm]||o.ins("input","",{type:"hidden",name:this.opt.aConfirm,value:1},t.form),t.form.submit()):this.closeDialog()}else if(t&&t.href){var a,s="#"===(t.getAttribute("href")||"").substr(0,1),c="_blank"==t.target;if((s||c)&&this.closeDialog(),s)a=t.hash;else{var u={};u[this.opt.aConfirm]=1,!0!==e&&(u[n]=e),a=o.makeUrl(t,u)}"_blank"==t.target?window.open(a,t.target):location.href=a}}}])&&o(e.prototype,n),i&&o(e,i),c}(n(0).a)},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! gallery - image gallery */n.d(e,"a",(function(){return u}));var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t);var e,n,i,s=a(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,"gallery")).opt={idPrefix:"pic-",num:!0,cGal:"gal",dCaption:"caption",qGal:".gal>a[id]",qGallery:".gallery",qLinks:"a.pic"},t}return e=c,(n=[{key:"init",value:function(){var t=this;this.app.listen("hashchange",(function(e){return t.onHash(e)})),this.app.listen("keydown",(function(e){return t.onKey(e)})),this.app.h("click",this.opt.qGal,(function(e){return t.next(e)})),this.app.listen("swipe",(function(e){return t.swipe(e)})),this.prepareAll()}},{key:"prepareAll",value:function(t){var e=this;this.app.e(this.app.qq(this.opt.qGallery,t),(function(t){return e.prepare(t)}))}},{key:"swipe",value:function(t){t.n.matches(this.opt.qGal)&&(4==t.dir?this.browse(t.n):2==t.dir?this.browse(t.n,!0):3==t.dir&&this.app.fire("esc"))}},{key:"next",value:function(t){if(!t.defaultPrevented){var e=t.recv;t.clientX>0&&t.clientX<e.clientWidth/3&&(this.browse(e,!0),t.preventDefault())}}},{key:"browse",value:function(t,e){if(e){var n=t.previousElementSibling||this.app.qq("a[id]",t.parentNode).pop();n.id&&(location.hash="#"+n.id)}else location.hash=t.hash}},{key:"onHash",value:function(){var t=this.app.q(location.hash);t&&(this.loadImg(t),this.loadImg(this.app.q(t.hash)))}},{key:"loadImg",value:function(t){t&&t.vImg&&(t.style.backgroundImage='url("'+t.vImg+'")',t.vImg="")}},{key:"prepare",value:function(t){for(var e=this.app,n=e.ins("div","",{className:this.opt.cGal}),i=e.qq(this.opt.qLinks,t),o=i.length,r=0,a=0;a<o;a++)if(!i[a].vDone){var s=e.seq();a||(r=s);var c=e.ins("a","",{className:"gallery-pic swipe drag",id:this.opt.idPrefix+s,href:"#"+this.opt.idPrefix+(a==o-1?r:s+1)},n);c.vLink=i[a].getAttribute("href")||"",c.vImg=c.vLink,c.dataset[this.opt.dCaption]=(this.opt.num?a+1+"/"+o+(i[a].title?" - ":""):"")+(i[a].title||""),i[a].href="#"+c.id,i[a].vDone=1}e.x(n),document.body.appendChild(n)}},{key:"onKey",value:function(t){if(location.hash){var e=this.app.q(location.hash);if(e&&e.hash){var n=t.keyCode;if(37==n||38==n)this.browse(e,!0);else if(39==n||40==n)this.browse(e);else if(8==n){var i=e.vLink;i||(i=(i=window.getComputedStyle(e).backgroundImage).substring(4,i.length-1).replace(/^"|"$/g,"")),i&&(location.href=i)}}}}}])&&o(e.prototype,n),i&&o(e,i),c}(n(0).a)},function(t,e){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})},function(t,e){var n;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}
/*! iconset - svg paths for building icons */t.exports=(i(n={menu:[7,"M.5 1h6v1h-6zm0 2h6v1h-6zm0 2h6v1h-6z"],sort:[7,"M1 1h2v1h-2zm0 2h3.5v1h-3.5zm0 2h5v1h-5z"],more:[17,"M7 2h3v3h-3zm0 5h3v3h-3zm0 5h3v3h-3z"],grid:[7,"M1 1h2v2h-2zM4 1h2v2h-2zM1 4h2v2h-2zM4 4h2v2h-2z"],home:[10,"M1 4.8h1v4h2v-3h2v3h2v-4h1l-4-4z"],find:[12,"M5 1a4 4 0 1 0 .01 0zm0 1a3 3 0 1 1-.01 0m3 5l-1 1 3 3 1-1z"],config:[220,"M35 67l75 -44 75 44 0 89-75 44-75-44zm75 8a35 35 0 1 0 .01 0z"],close:[12,"M2 1l4 4 4-4 1 1-4 4 4 4-1 1-4-4-4 4-1-1 4-4-4-4z"],user:[10,"M5 9C13 -1.5 -3 -1.5 5 9zM1 8.5q4 1 8 0-4 -3 -8 0z"],exit:[10,"M1 1h4v1h-3v6h3v1h-4zm2 3h3v-2l3 3-3 3v-2h-3z"],key:[20,"M2 16l7-7v-4l3-3q7 0 7 7l-3 3h-4l-6 6h-4zm3 1h1l6-6h-1zm11-12a1.5 1.5 0 1 0 .01 .01z"],lock:[10,"M1.5 4h7v5h-7zm1 0c0-4 5-4 5 0h-1c0-3-3-3-3 0zm2 1v2h1v-2z"],edit:[10,"M7 1q1.6 .4 2 2l-5 5-3 1 1-3zM2.3 6.3l-.5 1.5.4.4 1.5-.5z"],add:[7,"M3 1h1v2h2v1h-2v2h-1v-2h-2v-1h2z"],delete:[20,"M5 3l5 5 5-5 2 2-5 5 5 5-2 2-5-5-5 5-2-2 5-5-5-5z"],ok:[100,"M10 48l11-9 18 22 40-50 11 9-51 65z"],up:[10,"M1 6l4-4 4 4-1 1-3-3-3 3z"],down:[10,"M1 4l4 4 4-4-1-1-3 3-3-3z"],left:[10,"M6 1l1 1-3 3 3 3-1 1-4-4z"],right:[10,"M4 1l4 4-4 4-1-1 3-3-3-3z"],asc:[12,"M2 7l-1-1 5-5 5 5-1 1 -3.25 -3.2v7h-1.5v-7z"],desc:[12,"M2 5l-1 1 5 5 5-5-1-1 -3.25 3.2v-7h-1.5v7z"],back:[12,"M7 2l-1-1 -5 5 5 5 1-1 -3.2 -3.25h7v-1.5h-7z"],forward:[12,"M5 2l 1-1 5 5 -5 5 -1-1 3.2 -3.25h-7v-1.5h7z"],upload:[10,"M1 8h8v1h-8zm1-4h2v3h2v-3h2l-3-3z"],download:[10,"M1 8h8v1h-8zm1-3.7h2v-3h2v3h2l-3 3z"],first:[12,"M2 2h1.5v8h-1.5zm2 4l6-4v8z"],last:[12,"M2 2v8l6-4zm6.5 0h1.5v8h-1.5z"],folder:[12,"M1 1.5h4l1 2h5v7h-10zm1 3v5h8v-5z"],open:[12,"M.5 1.5h4l1 2h6.3l-2.3 7h-9zm3 3l-2 5h7l2-5z"],file:[12,"M2 1h5l3 3v7h-8zm1 1v8h6v-6h-2v-2z"],attach:[15,"M4.5 11q0 3 3 3t3-3v-8q0-2-2-2t-2 2v7h1v-7q0-1 1-1t1 1v8q0 2-2 2t-2-2v-7h-1z"],audio:[19,"M8 14h-1v-10l8-2v10h-1v-6.5l-6 1.5za3 2 -20 1 1 0 -.01zm7-2a3 2 -20 1 1 0 -.01z"],video:[12,"M1 3h7v2l3-2v6l-3-2v2h-7z"],image:[12,"M1 2h10v8h-10zm1 1v5l3-3 2 2 1-1 2 2 v-5zm5.5 .5a1 1 0 1 0 .001 0z"],text:[12,"M2 1h5l3 3v7h-8zm1 1v8h6v-6h-2v-2zm1 4h4v1h-4zm0 2h4v1h-4z"],tree:[26,"M9 3h8v6h-3v3h8v5h2v6h-6v-6h2v-3h-6v3h2v6h-6v-6h2v-3h-6v3h2v6h-6v-6h2v-5h8v-3h-3z"],list:[7,"M1 1h1v1h-1zm0 2h1v1h-1zm0 2h1v1h-1z M3 1h3v1h-3zm0 2h3v1h-3zm0 2h3v1h-3z"],link:[20,"M9 7l6-6 4 4-6 6-1-1 5-5-2-2-5 5zm-8 8l6-6 1 1-5 5 2 2 5-5 1 1-6 6zm5.5 -2.5l6-6 1 1-6 6z"]},"link",[17,"M12 1h2l2 2v2l-4 4h-2l5-5-2-2-5 5v-2zm-5 7h-2l-4 4v2l2 2h2l4-4v-2l-5 5-2-2zm-1 4l-1-1 6-6 1 1z"]),i(n,"chart",[10,"M1 9v-3h2v3zm3 0v-5h2v5zm3 0v-7h2v7z"]),i(n,"no",[7,"M1 3h5v1h-5z"]),i(n,"ban",[20,"M10 2a8 8 0 1 0 .01 0m0 2a6 6 0 1 1 -.01 0zm-4.5 .5l-1 1 10 10 1-1z"]),i(n,"warning",[16,"M8 1.7l-7 12h14zm0 9a1 1 0 1 1-.01 0c-3-7 3-7 0 0z"]),i(n,"info",[20,"M10 2a8 8 0 1 0 .01 0zm-1 3h2v2h-2zm-1 4h3v5l1 1h-3v-5"]),i(n,"share",[22,"M6 8a3 3 0 1 0 .01 0zm10-5a3 3 0 1 0 .01 0zm0 10a3 3 0 1 0 .01 0zm-10-3v2l10 5v-2zv2l10-5v-2z"]),i(n,"world",[12,"M6 1.2a4.8 4.8 0 1 0 .01 0zm0 .8a4 4 0 1 1-.01 0za3 4 0 1 0 .01 0za2.2 4 0 1 1-.01 0za.5 4 0 1 0 .01 0zm4 4a4 .2 0 1 0 0 .01z"]),i(n,"flag",[10,"M2 1h1v1q2-1 3 0t3-0v4q-2 1-3 0t-3 0v3h-1z"]),i(n,"pin",[10,"M2 4a3 3 0 0 1 6 0q0 2 -3 5q-3-3-3-5zm3 -2a2 2 0 1 0 .01 0z"]),i(n,"date",[10,"M1 1.5h8v7h-8zm1 2v4h6v-4zm.5-3v2h1.5v-2zm3.5 0v2h1.5v-2z"]),i(n,"time",[24,"M12 1a10 10 0 1 1 -.01 0zm0 2a8 8 0 1 0 .01 0zm-1.2 1h2v6.5l3.5 3.5-1.5 1.5-4-4z"]),i(n,"refresh",[20,"M10 .3v3a7 7 0 1 0 7 7h-2a5 5 0 1 1-5-5v3l5-4z"]),i(n,"view",[12,"m1 6q5-6 10 0v1q-5 -6-10 0zm5-3a2.8 2.8 0 1 1 -.01 0zm0 1.8a1.1 1.1 0 1 0 .01 0z"]),i(n,"card",[14,"M1 3h12v8h-12zm1 1v1h10v-1zm0 3v3h10v-3z"]),i(n,"sum",[12,"M2.5 3v-1h7v1h-5l3 3-3 3h5v1h-7v-1l3-3z"]),i(n,"copy",[9,"M1 3 h1v4h4v1h-5zm2-2h5v5h-5zm1 1v3h3v-3z"]),i(n,"help",[18,"M9 2a7 7 0 1 0 .01 0zm-3 5q0-3 3-3t3 3c0 3-2 2-2 4h-2c0-3 2-2 2-4q0-1-1-1t-1 1zm3 4.5a1.3 1.3 0 1 1 -.01 0z"]),i(n,"phone",[13,"M3 1l2 3-1.2 1.2 4 4 1.2-1.2 3 2c-3 6 -15 -6 -9-9z"]),i(n,"mail",[14,"M1 2.5h12v9h-12zm1 1v1l5 3 5 -3v-1zm0 2v5h10v-5l-5 3z"]),i(n,"chat",[12,"M6 1.2a5 4 0 1 0 .01 0zm0 1a4 3 0 1 1-.01 0zm-3.8 5.5l-1 3 4-2z"]),i(n,"send",[12,"M1 2l10 4-10 4 1.5-3.6 6-.4-6-.4z"]),i(n,"bookmark",[8,"M4 5l-2 2v-6h4v6z"]),i(n,"star",[32,"M16 2 l9 28-23-18 28 0-23 18z"]),i(n,"heart",[6,"M3 2c2-2 4 1 0 3c-4-2-2-5 0-3z"]),i(n,"tag",[9,"M1 5.2l4-4h3v3l-4 4zm6-3.1a.6 .6 0 1 0 .01 .01z"]),i(n,"expand",[10,"M1 1h3v1h-2v2h-1zm5 0h3v3h-1v-2h-2zm2 5h1v3h-3v-1h2zm-7 0h1v2h2v1h-3z"]),i(n,"collapse",[10,"M4 4h-3v-1h2v-2h1zm2 0v-3h1v2h2v1zm0 2h3v1h-2v2h-1zm-2 0v3h-1v-2h-2v-1z"]),i(n,"box",[26,"M3 6l10-2.7 10 2.7-10 3zm-.8 1.2l10 3v13l-10-4zm21.6 0l-10 3v13l10-4z"]),i(n,"columns",[16,"M1.5 2.5h13v11h-13zm1 2v8h5v-8zm6 0v8h5v-8z"]),i(n,"storage",[9,"M1 1h7v3h-7zm0 4h7v3h-7zm4-3v1h2v-1zm0 4v1h2v-1z"]),i(n,"settings",[11,"M1 2h9v1h-9zm0 3h9v1h-9zm0 3h9v1h-9zm2-7h1v3h-1zm4 3h1v3h-1zm-3 3h1v3h-1z"]),i(n,"power",[18,"M6 3a6.7 6.7 0 1 0 6 0v2a4.9 4.9 0 1 1 -6 0zm2-1.5h2v8h-2z"]),i(n,"energy",[11,"M5 1.5l-2 4h2l-2 5 5-6h-2l2-3z"]),i(n,"sound",[9,"M3 6h-2v-3h2l3-2v7zm3.7-3q2 1.5 0 3z"]),i(n,"mic",[20,"M7 5 a3 3 0 1 1 6 0v4a3 3 0 1 1 -6 0zm-2 4a5 5 0 1 0 10 0zm4 4v3h-3v2h8v-2h-3v-3z"]),i(n,"photo",[10,"M1 2.5h2l1-1h2l1 1h2v5h-8zm4 .5a1.8 1.8 0 1 0 .01 0z"]),i(n,"print",[10,"M1 2.5h2v-1h4v1h2v4h-8zm2 2l-1 4h6l-1-4zm4-1h1v-.5h-1z"]),i(n,"play",[12,"M3 2v8l7-4z"]),i(n,"pause",[9,"M2 2h2v5h-2zm3 0h2v5h-2z"]),i(n,"stop",[9,"M2 2h5v5h-5z"]),i(n,"rec",[10,"M5 2a3 3 0 1 0 .01 0z"]),i(n,"layers",[14,"M1 5.5l6-3 6 3-6 3zm0 3l2-1 4 2 4-2 2 1-6 3z"]),i(n,"none",[1,"M1 1z"]),n)},,function(t,e,n){"use strict";n.r(e);n(5);var i=n(1),o=n(0);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! code - source code sample */var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,t);var e,n,i,o=c(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"code")).langs={html:{nm:"HTML",re:[[/[a-z0-9_\-]+(?==")/g,"w"],[/".*?"/g,"e"],[/&lt;[^!A-Z][\s\S]*?&gt;/g,"i"],[/&lt;\![\s\S]*?&gt;/g,"n"]]},js:{nm:"Javascript",re:[[/".*?"|'.*?'/g,"w"],[/(\b|\b\d+\.|\.)\d+\b/g,"e"],[/[{}()\[\]]/g,"y"],[/\b(break|case|catch|class|const|continue|debugger|default|delete|do|else|export|extends|finally|for|function|if|import|in|instanceof|new|return|super|switch|this|throw|try|typeof|var|void|while|with|yield|let|await|null|undefined|true|false|arguments|get|set|require)\b/g,"i"],[/\/\*[\s\S]*?\*\/|(\/\/|#\!)[^\n]*/g,"n"]]},css:{nm:"CSS",re:[[/".*?"|'.*?'/g,"w"],[/#[\w\-]+/g,"e"],[/[{}()]/g,"y"],[/\.[A-za-z][\w\-]*/g,"y"],[/((@\w+|\!important)|\b(none|inherit|initial|unset|attr|url|calc|var|rgba?|hsla?))\b/g,"i"],[/\/\*[\s\S]*?\*\//g,"n"]]}},t.opt={dLang:"lang",defLang:"html",qCode:".code"},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.e(this.opt.qCode,(function(e){return t.showCode(e)})),this.app.e('code[class*="language-"]',(function(e){return t.hiliteNode(e)})),this.app.listen("update",(function(e){return t.updateCode(e)}))}},{key:"updateCode",value:function(t){var e=t.n?t.n:this.app.q(t.q);if(e){var n=e.closest(this.opt.qCode);n&&this.showCode(n)}}},{key:"showCode",value:function(t){var e=t.dataset[this.opt.dLang]||this.opt.defLang,n=this.spaces(t.innerHTML);if(!t.vCode){var i=this.app.ins("div","",{classList:"bord"},t,1);i.appendChild(t),t.classList.add("pad");var o="code-"+this.app.seq();this.app.ins("div",this.app.ins("a",(this.langs[e]?this.langs[e].nm:e)||e,{className:"pad",href:"#"+o}),{className:"-r bg small"},i);var r=this.app.ins("pre","",{className:this.app.opt.cToggle+" "+this.app.opt.cOff+" fit pad",id:o},i),a=this.app.ins("code","",{className:"language-"+e},r);t.vCode=a}t.vCode.innerHTML=this.hiliteText(n,e)}},{key:"spaces",value:function(t){return t.replace(/^\s*\r?\n|\s+$/g,"").replace(/\t/g,"  ")}},{key:"hiliteNode",value:function(t){t.innerHTML=this.hiliteText(this.spaces(t.textContent),this.app.a(t.classList).filter((function(t){return t.match(/language-/)}))[0].substr(9))}},{key:"hiliteText",value:function(t,e){var n=this,i=this.langs[e],o=this.app.ins("div");return o.textContent=t,t=o.innerHTML,i&&i.re&&i.re.forEach((function(e){return t=t.replace(e[0],(function(t){return n.token(e[1],t)}))})),t}},{key:"token",value:function(t,e){return"<Span Class = 'text-"+t+"'>"+e+"</Span>"}}])&&a(e.prototype,n),i&&a(e,i),r}(o.a),h=n(6),f=n.n(h);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! icons - include svg icons */var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,t);var e,n,i,o=m(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"icons")).opt={cIcon:"icon",pIcon:"icon-",cEmpty:"empty",iconSize:24,pSvg:"icon-"},t.parsed={},t.icons=f.a,t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.e('[class*="'+this.opt.pIcon+'"]',(function(e){return t.iconize(e)}))}},{key:"iconize",value:function(t){var e=t.className.match(new RegExp("\\b"+this.opt.pIcon+"([\\w\\-_]+)"));e&&e[1]&&(this.addIcon(e[1],t),t.classList.remove(e[0]))}},{key:"addIcon",value:function(t,e){var n=e.textContent,i=this.i(t);i&&(e.classList.contains(this.opt.cEmpty)&&(this.app.clr(e),e.title||(e.title=n),e.classList.remove(this.opt.cEmpty)),e.firstChild&&!e.firstChild.tagName&&this.app.ins("span",e.firstChild,{},e,!1),e.insertBefore(i,e.firstChild))}},{key:"i",value:function(t,e){var n=t.split(/[\/_]/);if(t=n[0],void 0===this.parsed[t]){var i,o="";if(!1!==this.opt.pSvg){var r=this.opt.pSvg+t,a=document.getElementById(r);a&&"symbol"==a.tagName.toLowerCase()&&(o='<svg><use xlink:href="#'+r+'"></use></svg>')}if(o||"string"!=typeof(o=this.icons[t]||"")&&(o='<svg viewBox="0 0 '+o[0]+" "+o[0]+'"><path d="'+o[1]+'"/></svg>'),o){var s=document.createElement("div");s.innerHTML=o,(i=s.firstChild).getAttribute("width")||i.setAttribute("width",this.opt.iconSize),i.getAttribute("height")||i.setAttribute("height",this.opt.iconSize),i.getAttribute("class")||i.setAttribute("class",this.opt.cIcon)}else i="";this.parsed[t]=i}return this.parsed[t]?this.prepareSvg(this.parsed[t].cloneNode(!0),n.slice(1)):e?this.app.ins("span",e):null}},{key:"prepareSvg",value:function(t,e){return e[0]&&t.setAttribute("width",e[0]),e[1]&&t.setAttribute("height",e[1]),e.length>0&&t.setAttribute("class",e.slice(2).join(" ")||""),t}}])&&d(e.prototype,n),i&&d(e,i),r}(o.a),w=n(2),O=n(3),S=n(4);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return P(this,n)}}function P(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! fetch - asynchronous requests */var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(r,t);var e,n,i,o=z(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.call(this,"fetch")}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.h("click","a[data-target]",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(t){t.preventDefault(),this.fetchBy(t.recv)}},{key:"fetchBy",value:function(t,e){var n=this,i=t.getAttribute("href")||"";this.fetch(i,(function(o){return e?e(t,o):n.receive(i,t,o)}))}},{key:"fetch",value:function(t,e){var n=this,i=new XMLHttpRequest;e&&i.addEventListener("load",(function(t){e(i),n.app.fire("after")})),i.open("GET",t),i.send()}},{key:"receive",value:function(t,e,n,i){var o=this.app.q(e.dataset.target);if("200"==n.status){var r=t.split("#"),a=n.responseText;if(a=r[1]?JSON.stringify(this.app.path(this.app.parse(a),r[1])):a,console.log(r,a),o){o.innerHTML=a;var s=o.closest(".dlg[id]");s&&this.app.toggle(s,!0)}else this.app.dialog(e,a)}else console.error("XHTTP request failed",n)}}])&&C(e.prototype,n),i&&C(e,i),r}(o.a);function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}
/*! date - parse and format date */
var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"parse",value:function(t){var e,n="",i=(t||"").match(/^(\d+)([\-\.\/\s])(\d+)[\-\.\/\s](\d+)(\D(\d+))?(\D(\d+))?(\D(\d+))?(\D(\d+))?$/);return i&&(e="."==i[2]?[4,3,1]:"/"==i[2]?[4,1,3]:[1,3,4],n=new Date(i[e[0]],i[e[1]]-1,i[e[2]],i[6]||0,i[8]||0,i[10]||0,i[12]||0)),n}},{key:"fmt",value:function(e,n,i){var o=e.getFullYear(),r=t.n(e.getMonth()+1),a=t.n(e.getDate()),s=t.n(e.getHours()),c=t.n(e.getMinutes()),u=t.n(e.getSeconds());return("m"==i?r+"/"+a+" "+o:"d"==i?a+"."+r+"."+o:o+"-"+r+"-"+a)+(n&&s+c+u>0?" "+t.n(e.getHours())+":"+t.n(e.getMinutes())+":"+t.n(e.getSeconds()):"")}},{key:"n",value:function(t,e){return("000"+t).substr(-(e||2))}}],(n=null)&&_(e.prototype,n),i&&_(e,i),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=I(t);if(e){var o=I(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! tablex - filter and sort HTML table */var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(r,t);var e,n,i,o=E(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"tablex")).lang="",t.skipComma=0,t.intervalUnits={ms:.001,msec:.001,s:1,sec:1,mi:60,min:60,h:3600,hr:3600,d:86400,w:604800,m:2628e3,mth:2628e3,y:31536e3,yr:31536e3},t.szUnits={b:1,kb:1024,mb:1048576,gb:1073741824,tb:1099511627776,pb:0x4000000000000},t.opt={cSort:"sort",cTotals:"totals",dFilter:"filter",dRep:"filterReport",aTotal:"data-total",dLimit:"limit",dPages:"pages",dPageNavAfter:"pagesAfter",cFilter:"filter",cFiltered:"bg-w",cScan:"text-i",cShow:"",cSortable:"",cUnmatch:"unmatch",cUnpage:"unpage",cAsc:"bg-y",cDesc:"bg-w",dateFormat:"d",wait:200},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.lang=document.documentElement.getAttribute("lang")||"en",this.skipComma="en"==this.lang;var e="table."+this.opt.cSort+", table."+this.opt.cFilter+", table."+this.opt.cTotals+", table["+this.opt.aFilter+"], table[data-"+this.opt.dLimit+"]";this.app.e(e,this.prepare.bind(this)),this.app.h("click",".tablex-pagenav a",(function(e){return t.page(e)}))}},{key:"page",value:function(t){t.preventDefault();var e=t.recv.closest(".tablex-pagenav");this.paginate(e.vTable,1*t.recv.hash.substr(1))}},{key:"prepare",value:function(t){var e,n,i=0,o=t.querySelector("tbody"),r=t.querySelector("thead tr");if(r||(r=o.rows[0],i=1),r&&o&&o.rows&&!(o.rows.length<2)){var a=[],s=[],c=[];for(n=0;n<r.cells.length;n++)s[n]=r.cells[n],c[n]={x:0,s:0,n:0,b:0,i:0,d:0};t.vCase=null!==t.getAttribute("data-case");var u=t.dataset[this.opt.dFilter];if(t.vInp=u?document.querySelector(u):t.querySelector('[name="_q"]'),t.vRep=this.app.q(t.dataset[this.opt.dRep]||""),t.vLimit=1*(t.dataset[this.opt.dLimit]||0),t.vPage=1,!t.vInp&&t.classList.contains(this.opt.cFilter)&&this.addFilter(t),t.vLimit&&o.rows.length>t.vLimit&&this.addPageNav(t),t.vInp){var l=this.app.debounce(this.doFilter.bind(this),this.opt.wait);t.vInp.vListen||this.app.b([t.vInp],"input",(function(e){return l(t)})),t.vInp.vListen=1}for(e=i;e<o.rows.length;e++){var p=o.rows[e].cells,h=[],f=[];for(n=0;n<p.length;n++){h[n]=this.val(p[n],t.vCase),f[n]=this.convert(h[n]);var v=""===f[n][0]?"x":f[n][1];c[n][v]++,this.app.isDebug()&&(p[n].title=v+": "+f[n][0])}a.push({d:h,x:f,n:o.rows[e],v:!0})}if(t.vCount=a.length,t.vData=a,t.vHead=s,t.vTypes=c.map((function(t){return Object.keys(t).reduce((function(e,n){return t[n]>e[1]?[n,t[n]]:e}),["s",0])[0]})),t.classList.contains(this.opt.cTotals)&&(this.addFooter(t,r),t.vInp||this.updateTotals(t,a.length)),t.vInp?this.doFilter(t):t.vLimit&&this.paginate(t,1),t.classList.contains(this.opt.cSort))for(n=0;n<s.length;n++)this.isSortable(s[n])&&(this.opt.cSortable&&s[n].classList.add(this.opt.cSortable),s[n].vListen||s[n].addEventListener("click",this.doSort.bind(this,t,s[n]),!1),s[n].vListen=1)}}},{key:"paginate",value:function(t,e){if(t.vPage=e,t.vLimit&&t.vPage){this.setPageNav(t);for(var n=t.vLimit*(e-1),i=n+t.vLimit-1,o=0,r=0;r<t.vData.length;r++)if(!t.vData[r].n.classList.contains(this.opt.cUnmatch)){var a=o>=n&&o<=i;t.vData[r].n.classList[a?"remove":"add"](this.app.opt.cHide,this.opt.cUnpage),o++}}}},{key:"addFilter",value:function(t){var e=t.parentNode.classList.contains("roll")?t.parentNode:t,n=this.app.ins("p"," ",{},e,-1);t.vInp=this.app.ins("input","",{type:"search"},n,!1),t.vRep=this.app.ins("span","",{},n)}},{key:"addPageNav",value:function(t){var e=t.parentNode.classList.contains("roll")?t.parentNode:t;t.vPageNav=this.app.ins("ul","",{className:"nav hover tablex-pagenav"}),t.vPageNav.vTable=t,this.app.ins("div",t.vPageNav,{className:"mar small"},e,this.opt.dPageNavAfter in t.dataset?1:-1)}},{key:"setPageNav",value:function(t){var e=this.app,n=1*(t.dataset[this.opt.dPages]||10),i=Math.floor((n+1)/2),o=t.vPageNav,r=Math.ceil(t.vCount/t.vLimit),a=Math.max(1,Math.min(t.vPage-i+1,r-n+1)),s=Math.min(r,a+n-1),c=Math.max(Math.min(t.vPage,r),1);if(e.clr(o),s>1){r>n&&e.ins("li",e.ins("a",e.i("first","&laquo;"),{href:"#1"}),{},o),e.ins("li",e.ins("a",e.i("left","&lsaquo;"),{href:"#"+Math.max(1,c-1),className:1==c?"inact":""}),{},o);for(var u=a;u<=s;u++){var l=e.ins("a",u,{href:"#"+u,className:u==c?"act bg":""});e.ins("li",l,{},o)}e.ins("li",e.ins("a",e.i("right","&rsaquo;"),{href:"#"+Math.min(c+1,r),className:c==r?"inact":""}),{},o),r>n&&e.ins("li",e.ins("a",e.i("last","&raquo;"),{href:"#"+r}),{},o)}}},{key:"addFooter",value:function(t,e){var n=this,i=this.app.ins("tfoot",this.app.ins("tr"),{className:"nobr"},t);this.app.a(e.cells).forEach((function(e){var o,r=t.vTypes[e.cellIndex],a="s"==r?"count":"d"==r?"max":"sum";n.app.ins("th",n.app.ins("s"==r?"i":"span","",(L(o={},n.opt.aTotal,a),L(o,"className","s"==r?"text-n":""),o)),{title:a},i.firstChild)}))}},{key:"doFilter",value:function(t,e){t.vPrev===t.vInp.value&&e||(t.vPrev=t.vInp.value,this.opt.cFiltered&&t.vInp.classList[t.vPrev.length>0?"add":"remove"](this.opt.cFiltered),this.filter(t,t.vInp.value))}},{key:"doSort",value:function(t,e,n){(n.target.closest?n.target.closest("a,input,select,label"):-1!=" A INPUT SELECT LABEL ".indexOf(" "+n.target.tagName+" "))||this.sort(t,e.cellIndex)}},{key:"isSortable",value:function(t){return!t.hasAttribute("data-unsort")}},{key:"val",value:function(t,e){var n=t.tagName?t.innerHTML:""+t;return n=n.replace(/<!--.*?-->/g,"").replace(/<.*?>/g,"").replace(/&nbsp;/gi," ").replace(/^\s+/,"").replace(/\s+$/,""),e||(n=n.toLowerCase()),n}},{key:"filter",value:function(t,e){var n,i,o,r,a,s=0;if(!t.vCols&&(t.vCols=t.dataset.filterCols||"",t.vCols=!!t.vCols&&t.vCols.split(/\D+/),t.vCols&&this.opt.cScan))for(n=0;n<t.vCols.length;n++)t.vHead[t.vCols[n]]&&t.vHead[t.vCols[n]].classList.add(this.opt.cScan);for(n=0;n<t.vData.length;n++){if(a=0,""!==e){if(t.vCols.length>0)for(o=[],i=0;i<t.vCols.length;i++)o.push(t.vData[n].d[t.vCols[i]]);else o=t.vData[n].d;r="|"+o.join("|")+"|",a=!this.matches(r,e,t.vCase)}this.app.opt.cHide?t.vData[n].n.classList[a?"add":"remove"](this.app.opt.cHide,this.opt.cUnmatch):t.vData[n].n.style.display=a?"none":"",this.opt.cShow&&t.vData[n].n.classList[a?"remove":"add"](this.opt.cShow),t.vData[n].v=!a,a||s++}t.vCount=s,this.updateTotals(t,s);var c=s+"/"+t.vData.length;t.vInp&&(t.vInp.title=c),t.vRep&&(t.vRep.textContent=c),t.vLimit&&this.paginate(t,1)}},{key:"updateTotals",value:function(t,e){var n=this;this.app.e(this.app.qq("["+this.opt.aTotal+"]",t),(function(i){return i.textContent=n.countTotal(t,i,e)}))}},{key:"countTotal",value:function(t,e,n){var i=this,o=t.vData,r=e.closest("th, td").cellIndex,a=e.dataset.total||"",s=1*(e.dataset.dec||2),c=e.dataset.mode||t.vTypes[r],u=0;return"count"==a||"cnt"==a?u=o.reduce((function(t,e){return t+(e.v&&""!==e.x[r][0]?1:0)}),0):n&&"x"!=c?"sum"==a||"avg"==a?u="s"==c?NaN:o.reduce((function(t,e){return t+(e.v?i.numVal(e.x[r]):0)}),0)/("avg"==a?n:1):"min"==a?u=o.reduce((function(t,e){return Math.min(t,e.v?i.numVal(e.x[r]):1/0)}),1/0):"max"==a&&(u=o.reduce((function(t,e){return Math.max(t,e.v?i.numVal(e.x[r]):-1/0)}),-1/0)):u=NaN,isNaN(u)?"-":this.strVal(u,c,s)}},{key:"dec",value:function(t,e){var n=Math.pow(10,e);return e&&(t=Math.round(t*n)/n),t}},{key:"matches",value:function(t,e,n){return"="==e.substr(0,1)?-1!=t.indexOf("|"+e.substr(1).toLowerCase()+"|"):-1!=e.indexOf("*")?(e="\\|"+e.replace(/\*/g,".*")+"\\|",new RegExp(e,n?"":"i").test(t)):-1!=t.indexOf(n?e:e.toLowerCase())}},{key:"sort",value:function(t,e,n){void 0===n&&(n=this.opt.cAsc&&t.vHead[e].classList.contains(this.opt.cAsc)),t.vData.sort(this.cmp.bind(this,e)),n&&t.vData.reverse();for(var i=0;i<t.vHead.length;i++)this.mark(t.vHead[i],i==e?n?-1:1:0);this.build(t),t.vLimit&&this.paginate(t,1)}},{key:"build",value:function(t){for(var e=t.querySelector("tbody"),n=0;n<t.vData.length;n++)e.appendChild(t.vData[n].n)}},{key:"mark",value:function(t,e){this.opt.cAsc&&t.classList[e>0?"add":"remove"](this.opt.cAsc),this.opt.cDesc&&t.classList[e<0?"add":"remove"](this.opt.cDesc)}},{key:"convert",value:function(t){var e=M.parse(t);return e=e?e.getTime():NaN,isNaN(e)?(e=this.sz(t),isNaN(e)?(e=this.interval(t),isNaN(e)?(e=this.nr(t),isNaN(e)?[t,"s"]:[e,"n"]):[e,"i"]):[e,"b"]):[e,"d"]}},{key:"numVal",value:function(t){return"s"==t[1]?this.nr(t[0],1):t[0]}},{key:"strVal",value:function(t,e,n){return"s"==e?t:"n"==e?1*t.toFixed(n):"b"==e?this.fmtSz(t,n):"i"==e?this.fmtInterval(t,n):"d"==e?M.fmt(new Date(t),n,this.opt.dateFormat):t}},{key:"fmtSz",value:function(t,e){var n=t?Math.min(5,Math.floor(Math.log(t)/Math.log(1024))):0;return 1*(t/Math.pow(1024,n)).toFixed(e)+" "+["B","KB","MB","GB","TB","PB"][n]}},{key:"fmtInterval",value:function(t,e){var n=this.intervalUnits.y,i=this.intervalUnits.m;return[[Math.floor(t/n),"y"],[Math.floor(t%n/i),"m"],[Math.floor(t%n%i/86400),"d"],[Math.floor(t%n%i%86400/3600),"h"],[Math.floor(t%n%i%86400%3600/60),"min"],[t%n%i%86400%3600%60,"sec"]].map((function(t){return t[0]?t[0]+t[1]:null})).filter((function(t){return null!==t})).join(" ")}},{key:"cmp",value:function(t,e,n){return(e=e.x[t][0])<(n=n.x[t][0])?-1:e>n?1:0}},{key:"nr",value:function(t,e){return t=this.skipComma?t.replace(/(\$|,|\s)/g,""):t.replace(/(\$|\s)/g,"").replace(",","."),t=parseFloat(t.replace(/\u2212/g,"-")),isNaN(t)&&e&&(t=0),t}},{key:"interval",value:function(t){var e=this.intervalUnits,n=t.match(/\d+\s?(y|m|w|d|h|min|mi|sec|s|msec|ms)\b/gi);return n&&(n=n.map((function(t){return t.match(/^(\d+)\s?(.*)$/)}))),n&&n.length>0?n.map((function(t){return e[t[2]]?t[1]*e[t[2]]:0})).reduce((function(t,e){return t+e}),0):NaN}},{key:"sz",value:function(t){var e=this.szUnits,n=t.match(/^((\d*\.)?\d+)\s*(([kmgtp]i?)?b)$/i);return n&&(n[3]=n[3].replace(/ib$/i,"b").toLowerCase(),e[n[3]])?n[1]*e[n[3]]:NaN}}])&&D(e.prototype,n),i&&D(e,i),r}(o.a);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Y(t);if(e){var o=Y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return W(this,n)}}function W(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! calendar - replacement of standard date and datetime-local inputs */var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(r,t);var e,n,i,o=B(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"calendar")).opt={cBtn:"pad hover",dateFormat:"d",hCancel:"#close",hashNow:"#now",addIcons:[["date","#","#open"],["ok","&check;","#now"],["delete","&#x2715;","#clear"]],idPicker:"pick-date",minWidth:801,qsCalendar:"input.calendar",showModal:0,sizeLimit:801,stepMinutes:1,inPop:0},t.win=null,t}return e=r,(n=[{key:"init",value:function(){var t=this;window.innerWidth<this.opt.minWidth||(this.win=this.app.ins("div","",{id:this.opt.idPicker,className:this.app.opt.cToggle+" "+this.app.opt.cOff+" pad"}),this.win.style.whiteSpace="nowrap",document.body.appendChild(this.win),this.app.e(this.opt.qsCalendar,(function(e){return t.preparePick(e)})),this.app.h("click",this.opt.qsCalendar,(function(e){return t.openDialog(e.target,null,e)})),this.app.h("input",this.opt.qsCalendar,(function(e){return t.validate(e.target,0)})),this.app.h("click","#"+this.opt.idPicker+" a",(function(e){return t.onClick(e)})),this.app.h("click",".calendar-tools a",(function(e){return t.onClick(e,!0)})))}},{key:"onClick",value:function(t,e){var n=t.recv,i=n.hash;if(i){var o,r=this.opt.qsCalendar;if(e)o=this.opt.inPop?this.app.q(r,this.app.next(n.parentNode,".pop",!0)):this.app.next(n.parentNode,r,!0);else if(this.win.vRel)o=this.win.vRel;else{var a=n.closest("#"+this.opt.idPicker);o=this.opt.inPop?this.app.next(a,r,!0):this.app.next(a.parentNode,r)}var s=this.win.vCur,c="#prev-year"==i?-1:"#next-year"==i?1:0,u="#prev-month"==i?-1:"#next-month"==i?1:0,l="#prev-hour"==i?-1:"#next-hour"==i?1:0,p="#prev-min"==i?-this.opt.stepMinutes:"#next-min"==i?this.opt.stepMinutes:0;c||u?this.switchMonths(o,s.getFullYear()+c,s.getMonth()+u,s.getDate()):l||p?this.setTime(o,l,p):i==this.opt.hashNow?this.closeDialog(o,!0):i==this.opt.hCancel?this.closeDialog(o,null):"#open"==i?this.openDialog(o,null):"#clear"==i?this.closeDialog(o,""):i.match(/#\d\d?/)&&this.closeDialog(o,this.fmt(s,i.substr(1))),this.app.pf("toggle","setShown","#open"==i?this.win:o),t.preventDefault(),t.stopPropagation()}}},{key:"toggle",value:function(t,e){if(e){var n=e.dataset.mode;if(n=n?"m"===n[0]:this.opt.showModal||Math.min(window.innerWidth,window.innerHeight)<this.opt.sizeLimit,t){if(this.win.className=this.app.opt.cToggle+" "+this.app.opt.cOff+" pad "+(n?"dlg":""),(n?document.body:e.thePop).appendChild(this.win),n){var i=this.win.style;i.left=i.right=i.top=i.bottom=""}this.win.vRel=e}}this.app.toggle(this.win,t),t||document.body.appendChild(this.win)}},{key:"preparePick",value:function(t){t.vTime="datetime-local"==t.type||t.classList.contains("datetime"),t.type="text",t.autocomplete="off",t.value&&(t.value=this.fmt(this.parse(t.value),0,t.vTime));var e=this.app.ins("div","",{className:"pop l"},t,-1);if(this.opt.inPop||(e.style.verticalAlign="bottom"),t.thePop=e,this.opt.addIcons.length>0){var n=this.app.ins("span","",{className:"input-tools calendar-tools nobr"},t,1);for(var i in this.opt.addIcons)this.app.ins(""," ",{},n),this.app.ins("a",this.app.i.apply(this.app,this.opt.addIcons[i].slice(0,2)),{href:this.opt.addIcons[i][2],className:"let"},n)}this.opt.inPop&&e.appendChild(t)}},{key:"openDialog",value:function(t,e,n){n&&n.preventDefault(),this.build(t,e||t.value),this.toggle(!0,t)}},{key:"closeDialog",value:function(t,e){t&&(this.setValue(t,e),t.focus()),this.toggle(!1)}},{key:"n",value:function(t,e){return("000"+t).substr(-(e||2))}},{key:"getLimit",value:function(t,e,n){return t[e]?this.fmt(this.parse(t[e]),0,n,"y"):"max"==e?"9999":"0000"}},{key:"errLimits",value:function(t){var e=this.getLimit(t,"min",t.vTime),n=this.getLimit(t,"max",t.vTime),i=this.fmt(this.parse(t.value),0,t.vTime,"y");return e&&i<e||n&&i>n?e+" .. "+n:""}},{key:"validate",value:function(t,e){t.setCustomValidity(e||""==t.value?"":this.errLimits(t)),t.checkValidity(),t.reportValidity&&t.reportValidity()}},{key:"update",value:function(t,e){var n=this.win.vDays;this.app.clr(n);var i=e.getFullYear(),o=e.getMonth(),r=e.getDate(),a=this.getLimit(t,"min",0),s=this.getLimit(t,"max",0);this.win.vNodeCur.textContent=this.n(o+1)+"."+i,this.win.vHours.textContent=this.n(t.vTime?e.getHours():0),this.win.vMinutes.textContent=this.n(t.vTime?e.getMinutes():0);for(var c,u,l,p,h,f,v=new Date(i,o+1,0).getDate(),d=(new Date(i,o,1).getDay()+6)%7,y=7*Math.ceil((d+v)/7)-d,m=(this.fmt(new Date),this.fmt(e),1-d);m<=y;m++)1==(h=(d+m-1)%7+1)&&(f=this.app.ins("div","",{className:"row"},n)),m<1||m>v?c=this.app.ins("a","",{className:"pad c center"},f):(u=this.fmt(e,m,0,"y"),l=m==r,p=a&&u<a||s&&u>s,c=this.app.ins("a",m,{className:"pad c center "+(l?"bg-w ":"")+(p?"text-n ":"hover ")+(h>5?"text-e ":"")},f),p||(c.href="#"+m));this.win.vNodeTime.classList[t.vTime?"remove":"add"](this.app.opt.cHide)}},{key:"build",value:function(t,e){var n=this.app;if("string"==typeof e&&(e=this.parse(e||t.dataset.def||"")),this.win.vCur=e,!this.win.vDays){n.clr(this.win);var i=n.ins("p","",{className:"c"},this.win);this.btn(this.opt.hashNow,n.i("ok","&check;"),i),this.btn("#prev-year",n.i("prev2","&laquo;"),i),this.btn("#prev-month",n.i("prev","&lsaquo;"),i),this.win.vNodeCur=n.ins("span","",{className:"pad"},i),this.btn("#next-month",n.i("next","&rsaquo;"),i),this.btn("#next-year",n.i("next2","&raquo;"),i),this.btn(this.opt.hCancel,n.i("close","&#x2715;"),i),n.ins("hr","",{},this.win),this.win.vDays=n.ins("div","",{},this.win);var o=n.ins("div","",{},this.win);this.win.vNodeTime=o,n.ins("hr","",{},o);var r=n.ins("p","",{className:"c"},o);this.btn("#prev-hour",n.i("prev","&lsaquo;"),r),this.win.vHours=n.ins("span","",{className:"pad"},r),this.btn("#next-hour",n.i("next","&rsaquo;"),r),n.ins("span",":",{className:"pad"},r),this.btn("#prev-min",n.i("prev","&lsaquo;"),r),this.win.vMinutes=n.ins("span","",{className:"pad"},r),this.btn("#next-min",n.i("next","&rsaquo;"),r)}this.update(t,e)}},{key:"switchMonths",value:function(t,e,n,i){if(i>28){var o=new Date(e,n+1,0).getDate();i=Math.min(i,o)}var r=parseInt(this.win.vHours.textContent,10),a=parseInt(this.win.vMinutes.textContent,10);this.build(t,new Date(e,n,i,r,a))}},{key:"setTime",value:function(t,e,n){var i=e||n,o=e?24:60,r=this.win[e?"vHours":"vMinutes"],a=parseInt(r.textContent,10),s=a%Math.abs(i);a+=s?i>0?i-s:-s:o+i,r.textContent=this.n(a%o),this.setValue(t,this.fmt(this.parse(t.value)))}},{key:"setValue",value:function(t,e){if(null!==e){t.value=!0===e?this.fmt(0,0,t.vTime):e;var n=this.win.vHours,i=this.win.vMinutes;t.vTime&&!0!==e&&""!==e&&n&&i&&(t.value+=" "+this.n(n.textContent)+":"+this.n(i.textContent)),this.validate(t,0)}}},{key:"parse",value:function(t){return M.parse(t)||new Date}},{key:"fmt",value:function(t,e,n,i){return t||(t=new Date),e&&(t=new Date(t.getFullYear(),t.getMonth(),e)),M.fmt(t,n,i||this.opt.dateFormat)}},{key:"btn",value:function(t,e,n){return this.app.ins("a",e,{href:t,className:this.opt.cBtn},n)}}])&&U(e.prototype,n),i&&U(e,i),r}(o.a);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Z(this,n)}}function Z(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! lookup - autocomplete lookups with data from XHTTP request */var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(r,t);var e,n,i,o=K(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"lookup")).opt={dLabel:"label",dLookup:"lookup",dCap:"cap",dList:"list",dUrl:"url",dGoto:"goto",cacheLimit:0,pList:"lookup-list-",max:10,wait:300,inPop:0},t.win=null,t}return e=r,(n=[{key:"init",value:function(){var t=this,e=this.app;this.win=e.ins("div","",{id:this.opt.pList+e.seq(),className:e.opt.cToggle+" "+e.opt.cOff}),this.closeList(),document.body.appendChild(this.win),e.e("input[data-"+this.opt.dLookup+"]",(function(e){return t.prepare(e)})),e.e("[data-chain]",(function(e){return t.updateChain(e)}));var n=e.debounce(this.find.bind(this),this.opt.wait);e.h("input",".lookup-input",n),e.h("keydown",".lookup-input",(function(e){return t.key(e)})),e.h("click",".lookup-item",(function(e){return t.choose(e)})),e.h("click",".lookup-goto",(function(e){return t.go(e)})),e.h("change","[data-chain]",(function(e){return t.updateChain(e.target)}))}},{key:"prepare",value:function(t){var e=this.app;if(!this.cap(t)){t.vLabel=this.opt.dLabel in t.dataset?t.dataset[this.opt.dLabel]:t.value||"";var n=e.ins("div","",{className:"pop l lookup-pop"},t,1);this.opt.inPop||(n.style.verticalAlign="bottom"),t.classList.add("bg-n","lookup-id"),t.classList.add(e.opt.cHide);var i=e.ins("input","",{type:"text",value:t.vLabel,className:"lookup-input subinput"},n,this.opt.inPop?0:1);if(i.name="lookup-"+t.name,t.id&&(i.id="lookup-"+t.id,t.title&&(i.title=t.title),e.e('[for="'+t.id+'"]',(function(t){return t.htmlFor=i.id}))),t.placeholder&&(i.placeholder=t.placeholder),i.autocomplete="off",this.opt.dUrl in t.dataset){var o=e.ins("span","",{className:"input-tools nobr"},this.opt.inPop?n:i,1);e.ins("a",e.i("forward","&rarr;"),{href:"#goto",className:"let lookup-goto"},o).style.cursor="pointer",e.ins(""," ",{},o,-1)}this.initCaption(t)}}},{key:"initCaption",value:function(t){var e=this,n=t.dataset[this.opt.dCap]||"";if(n&&t.value&&!(this.opt.dLabel in t.dataset)){var i=encodeURI(decodeURI(this.app.makeUrl(n,{time:(new Date).getTime()})).replace(/\{q\}/,t.value));this.app.fetch(i,(function(n){var o=e.app.parse(n.responseText);if(o){var r=i.split("#");e.fix(t,t.value,e.app.path(o,r[1]||"",t.value,"data"))}}))}}},{key:"ident",value:function(t,e){return"t"==e||"i"!=e&&!this.opt.inPop||(t=t.closest(".lookup-pop")),this.app.next(t,".lookup-id",!0)}},{key:"cap",value:function(t){return this.opt.inPop?this.app.q(".lookup-input",this.pop(t)):this.app.next(t,".lookup-input")}},{key:"pop",value:function(t){return this.app.next(t,".lookup-pop")}},{key:"find",value:function(t){var e=t.target,n=this.ident(e);if(n){var i=e.value;if(""===i)this.fix(n,"","");else if(n.vCache&&n.vCache[i])this.openList(n,n.vCache[i]);else{var o=encodeURI(decodeURI(this.app.makeUrl(n.dataset[this.opt.dLookup]||"",{time:(new Date).getTime()})).replace(/\{q\}/,i));n.vCur=null,this.app.fetch(o,this.list.bind(this,o,i,n))}}}},{key:"list",value:function(t,e,n,i){var o=this.app.parse(i.responseText);if(o){var r=t.split("#");o=this.norm(this.app.path(o,r[1]||"",[],"data"),r[2],r[3],r[4]),e===this.cap(n).value&&this.openList(n,o),this.store(n,e,o)}}},{key:"openList",value:function(t,e,n){n&&n.stopPropagation(),this.closeList(),this.pop(t).appendChild(this.win),this.app.toggle(this.win,!0),this.build(t,e)}},{key:"closeList",value:function(){this.app.toggle(this.win,!1)}},{key:"build",value:function(t,e){var n=this.app;n.clr(this.win);var i,o=n.ins("ul","",{className:"nav let hover"},this.win),r=0,a=t.dataset[this.opt.dGoto]||"";for(var s in e){i=n.ins("li","",{},o);var c=n.ins("a","",{href:a?a.replace(/\{id\}/,e[s].id):"#"+e[s].id,className:"-pad -hover"+(a?"":" lookup-item")},i);if(n.ins("span",e[s].nm,{},c),e[s].info&&(n.ins("br","",{},c),n.ins("small",e[s].info,{className:"text-n"},c)),++r>=this.opt.max)break}o.firstChild&&this.hilite(t,o.firstChild.firstChild)}},{key:"hilite",value:function(t,e){t.vCur&&t.vCur.classList.remove(this.app.opt.cAct),e.classList.add(this.app.opt.cAct),t.vCur=e}},{key:"hiliteNext",value:function(t,e){if(t.vCur){var n=t.vCur.parentNode[e?"previousSibling":"nextSibling"];n||(n=t.vCur.parentNode.parentNode[e?"lastChild":"firstChild"]),n=n.firstChild,this.hilite(t,n)}}},{key:"choose",value:function(t){t&&t.preventDefault();var e=t.recv,n=this.ident(e,"i");n.vCur=e,this.fix(n,e.hash.substr(1),e.firstChild.textContent)}},{key:"fix",value:function(t,e,n){t.vCur=null,t.vWait&&clearTimeout(t.vWait),t.value=e,t.vLabel=this.cap(t).value=n,this.app.dispatch(t,["input","change"]),this.closeList()}},{key:"key",value:function(t){var e=t.target?this.ident(t.target):null;e&&(27==t.keyCode?this.fix(e,e.value,e.vLabel):40!=t.keyCode||this.app.vis(this.win)?38==t.keyCode||40==t.keyCode?this.hiliteNext(e,38==t.keyCode):13==t.keyCode&&e.vCur&&(this.app.vis(this.win)&&t.preventDefault(),e.vCur.click()):this.find(t))}},{key:"go",value:function(t){var e=t.recv?this.ident(t.recv.parentNode,"t"):null;if(e){t.preventDefault();var n=e.dataset[this.opt.dUrl]||"";e.value.length>0&&n&&(location.href=encodeURI(decodeURI(n).replace(/\{id\}/,e.value)))}}},{key:"updateChain",value:function(t){var e=this.app.q(t.dataset.chain||"");if(e)if(t.value){var n=(e.dataset[this.opt.dList]||"").replace(/\{q\}/,t.value);e.vCache&&e.vCache[n]?this.setOptions(e,e.vCache[n]):this.app.fetch(n,this.onChainData.bind(this,n,e))}else this.setOptions(e,[])}},{key:"onChainData",value:function(t,e,n){var i=this.app.parse(n.responseText);if(i){var o=t.split("#");i=this.norm(this.app.path(i,o[1]||"",[],"data"),o[2],o[3]),this.setOptions(e,i),this.store(e,t,i)}else this.setOptions(e,[])}},{key:"setOptions",value:function(t,e){var n=this;if(t.list)t.list&&(this.app.clr(t.list),t.value="",e&&e.forEach((function(e){return n.app.ins("option","",{value:e.nm},t.list)})));else{this.app.clr(t);var i=t.dataset.placeholder||"";e&&0!=e.length&&!i||this.app.ins("option",i||"-",{value:""},t),e&&e.forEach((function(e){return n.app.ins("option",e.nm,{value:e.id},t)}))}}},{key:"store",value:function(t,e,n){var i=1*(t.dataset.cache||this.opt.cacheLimit);i&&((!t.vCache||Object.keys(t.vCache).length>=i)&&(t.vCache={}),n&&(t.vCache[e]=n))}},{key:"norm",value:function(t,e,n,i){var o=this;return"array"!==this.app.typeOf(t)?[]:t.map((function(t){return{id:o.app.path(t,e||"id"),nm:o.app.path(t,n||"nm"),info:o.app.path(t,i||"info")}}))}}])&&X(e.prototype,n),i&&X(e,i),r}(o.a);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=at(t);if(e){var o=at(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return rt(this,n)}}function rt(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! edit - wysiwyg text editor */var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(r,t);var e,n,i,o=ot(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"edit")).opt={qAdjust:"textarea.adjust",qEdit:"textarea.edit",height:30,tools:"/*@xbi_.#123p|c,s^vdqf~T(=)j+-"},t.btn={"/":["src","","/","Source"],"*":["insertimage","~","*","Image"],"@":["createlink","~","@","Link"],x:["unlink","","&times;","Unlink"],b:["bold","","<b>B</b>","Bold"],i:["italic","","<i>I</i>","Italic"],_:["removeformat","","_","Unformat"],".":["insertUnorderedList","","&bull;","List"],"#":["insertOrderedList","","#","Ordered"],1:["formatblock","<h1>","H1","Head 1"],2:["formatblock","<h2>","H2","Head 2"],3:["formatblock","<h3>","H3","Head 3"],p:["formatblock","<p>","&sect;","Paragraph"],"|":["tools","","&hellip;","Tools"],c:["inserthtml","<code>^</code>","{}","Code"],",":["inserthtml",'<abbr title="~">^</abbr>',"A.B.","Abbreviation"],s:["strikeThrough","","<s>S</s>","Strike through"],"^":["subscript","","a<sub>x</sub>","Subscript"],v:["superscript","","a<sup>x</sup>","Superscript"],d:["formatblock","<div>","D","Div"],q:["formatblock","<blockquote>","&#8220;","Block quote"],f:["formatblock","<pre>","[]","Preformatted"],"~":["inserthorizontalrule","","&minus;","Horizontal ruler"],T:["inserthtml","<table><tr><th>#<th>#<tr><td>-<td>-</table>","T","Table"],"(":["justifyLeft","","&lt;","Justify left"],"=":["justifyCenter","","=","Justify center"],")":["justifyRight","","&gt;","Justify right"],j:["justifyFull","","&equiv;","Justify full"],"+":["indent","","&raquo;","Increase indent"],"-":["outdent","","&laquo;","Decrease indent"]},t}return e=r,(n=[{key:"init",value:function(){var t=this,e=this.app;e.e(this.opt.qEdit,(function(e){return t.prepare(e)})),e.e(this.opt.qAdjust,(function(e){return t.setStyle(e)})),this.adjustAll(),e.h("click","label[for]",(function(e){return t.setFocus(e.recv)})),e.h("click","a[data-cmd]",(function(e){return t.cmd(e)})),e.h(["input","blur"],".edit-wysiwyg",(function(e){return t.up(0,e.target)})),e.listen("value",(function(e){e.n.theWys&&(t.up(1,e.n.theWys),e.modeAuto&&t.modeAuto(e.n))})),e.b([window],"paste",(function(e){return t.onPaste(e)}),!0),e.h("input",this.opt.qAdjust,(function(e){return t.adjust(e.target)})),e.h("mouseup",this.opt.qAdjust,(function(e){return t.resized(e.target)})),e.b([window],"resize",(function(e){return t.adjustAll()}))}},{key:"setFocus",value:function(t){var e=this.app.q("#"+t.htmlFor);e&&e.theWys&&this.app.vis(e.theWys)&&e.theWys.focus()}},{key:"prepare",value:function(t){if(!t.theWys){var e=this.app,n=e.ins("nav","",{className:"bg"},t,-1),i=e.ins("div","",{className:e.opt.cToggle+" "+e.opt.cOff}),o=e.ins("div","",{className:e.opt.cToggle+" bord pad subinput edit-wysiwyg"},t,1);o.setAttribute("contenteditable",!0),o.theArea=t,o.theNav=n,t.theWys=o,t.classList.add(e.opt.cToggle),t.id&&(o.id="wys-"+t.id);var r=(t.dataset.tools||this.opt.tools).split(""),a=n;for(var s in r){var c=this.btn[r[s]];e.ins("a",c[2],{href:"#cmd-"+c[0],title:c[3],className:e.opt.cToggle+" pad hover","data-cmd":r[s]},a),"tools"==c[0]&&(a=i)}n.appendChild(i),t.className+=" bord pad",t.style.width="100%",this.setStyle(t),this.setStyle(o)}this.up(1,t.theWys),this.modeAuto(t)}},{key:"modeAuto",value:function(t){var e=t.dataset.mode;e=e?"w"===e[0]:-1==(t.dataset.tools||this.opt.tools).indexOf("/")||t.value.match(/(>|&\w+;)/)&&!t.value.match(/<script/i),this.mode(e,t.theWys)}},{key:"cmd",value:function(t,e,n){var i=t.recv,o=e||this.btn[i.getAttribute("data-cmd")],r=e?t:this.app.next(i.closest("nav"),".edit-wysiwyg");if(this.app.dbg(["cmd",r,o,i,t]),t&&!e&&(t.preventDefault(),t.stopPropagation()),"src"==o[0])this.mode(!this.app.vis(r),r);else if("tools"==o[0]){var a=this.app.q("div",i.parentNode);a&&this.app.toggle(a)}else{var s=o[1];if(s.match(/~/)){var c=prompt(o[3],o[4]||"");(s=null===c?c:s.replace(/~/,c))&&s.match(/@/)&&(s="mailto:"+s)}s&&(s=s.replace("^",document.getSelection())),r.focus(),null!==s&&document.execCommand(o[0],!1,s),"*"==o[2]&&(this.up(0,r),this.up(1,r))}}},{key:"up",value:function(t,e){t?e.innerHTML=e.theArea.value:e.theArea.value=e.innerHTML.replace(/(\shref=")!/gi,' target="_blank"$1').replace(/(\ssrc="[^"]+#[a-z]*)(\d+%?)"/gi,' width="$2"$1"'),t||this.app.dispatch(e.theArea,["input","change"])}},{key:"mode",value:function(t,e){var n=this;this.app.toggle(e,t),this.app.toggle(e.theArea,!t),t||(e.style.height?e.theArea.style.height=e.style.height:this.adjust(e.theArea)),this.up(t,e),this.app.e(this.app.qq("a",e.theNav),(function(e){return"#cmd-src"==e.hash?null:n.app.toggle(e,t)})),e.theArea.theManual=0,e.theArea.style.width="100%"}},{key:"setStyle",value:function(t){t.style.overflow="auto",t.style.minHeight="3em",t.style.maxHeight="80vh",this.storeSize(t)}},{key:"storeSize",value:function(t){t.theH=t.clientHeight,t.theW=t.clientWidth}},{key:"resized",value:function(t){t.theH===t.clientHeight&&t.theW===t.clientWidth||(t.theManual=1)}},{key:"adjustAll",value:function(){var t=this;this.app.e(this.opt.qAdjust,(function(e){return t.adjust(e)}))}},{key:"adjust",value:function(t){if(!t.theManual){var e=t.value.split(/\n/).map((function(e){return Math.ceil(10*(1+e.length)/(t.clientWidth||500))})).reduce((function(t,e){return e+t}));t.style.height=Math.min(1.5*(2+e),parseFloat(this.opt.height))+"em",this.storeSize(t)}}},{key:"onPaste",value:function(t){var e=this,n=t.target.closest(".edit-wysiwyg");if(n){var i=this.app.a(t.clipboardData.items).filter((function(t){return 0===t.type.indexOf("image")})).shift();if(i){t.preventDefault();var o=new FileReader;o.onload=function(t){return e.cmd(n,["insertimage",t.target.result])},o.readAsDataURL(i.getAsFile())}}}}])&&nt(e.prototype,n),i&&nt(e,i),r}(o.a);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ft(t);if(e){var o=ft(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ht(this,n)}}function ht(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! valid - custom form validation messages */var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(r,t);var e,n,i,o=pt(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"valid")).opt={aHint:"data-hint",qValidate:"form",cUnhint:"js-unhint",cLiveVal:"js-live-val"},t}return e=r,(n=[{key:"init",value:function(){var t=this,e=["input","textarea","select"].map((function(e){return t.opt.qValidate+" "+e+"["+t.opt.aHint+"]"})).join(", ");e+=", ."+this.opt.cLiveVal+" [name]",this.app.h(["input","change"],e,(function(e){return t.validateInput(e.target)})),this.app.h("invalid",e,(function(e){return t.setCustomMessage(e.target)})),this.app.e("form."+this.opt.cUnhint,(function(e){return t.unhint(e)})),this.app.e("form."+this.opt.cLiveVal,(function(e){return t.validateForm(e)})),this.app.h("submit",this.opt.qValidate,(function(e){return e.target.getAttribute("novalidate")?t.validateForm(e.target,e):null}))}},{key:"isLive",value:function(t){return t&&t.classList.contains(this.opt.cLiveVal)}},{key:"validateInput",value:function(t){t.willValidate&&("radio"==t.type?this.app.e(this.app.qq('[name="'+t.name+'"]',t.form),(function(t){return t.setCustomValidity("")})):t.setCustomValidity(""),t.checkValidity(),this.isLive(t.form)&&this.validateForm(t.form))}},{key:"setCustomMessage",value:function(t){if(t.willValidate){var e=t.getAttribute("data-hint")||"";e=e.replace(/%([\w\-]+)%/g,(function(e,n){return t.getAttribute(n)})),t.setCustomValidity(e)}}},{key:"unhint",value:function(t){t.setAttribute("novalidate",!0)}},{key:"validateForm",value:function(t,e){e&&t.classList.remove(this.opt.cUnhint);var n=t.checkValidity();//!==false
if(!n&&e){e.preventDefault(),e.stopPropagation();var i=this.app.q("[name]:invalid:not(.hide):not(.off), [name]:invalid~.subinput",t);i&&(this.app.dbg(["focus validate",i]),i.focus())}this.isLive(t)&&this.app.e(this.app.qq('[type="submit"]',t),(function(t){return t.classList[n?"remove":"add"]("bg-n")}))}}])&&ut(e.prototype,n),i&&ut(e,i),r}(o.a);function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=kt(t);if(e){var o=kt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return gt(this,n)}}function gt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! tools - miscellaneous utilities (toggle class and attributes) */var wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(r,t);var e,n,i,o=bt(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"tools")).opt={dNodes:"nodes",dSet:"set",dUnset:"unset",dAttr:"attr",cMem:"mem",qHeading:"h2[id], h3[id], h4[id], h5[id], h6[id]",minDesktop:900},t}return e=r,(n=[{key:"init",value:function(){var t=this,e=this.app;this.opt.qSet="[data-"+this.opt.dSet+"], [data-"+this.opt.dNodes+"]",this.opt.qSetClick="a[data-"+this.opt.dSet+"]",this.opt.qSetChange="input[data-"+this.opt.dNodes+"], select[data-"+this.opt.dNodes+"]",e.e("table[class]",(function(e){return t.alignCells(e)})),e.e(this.opt.qSet,(function(e){return t.restore(e)})),e.e(this.opt.qSet,(function(e){return t.toggleClass(e)})),e.e(this.opt.qHeading,(function(e){return t.smartHeading(e)})),e.h("change",this.opt.qSetChange,(function(e){return t.toggleClass(e.target)})),e.h("click",this.opt.qSetClick,(function(e){return t.toggleClass(e.recv,e)})),this.onResize(),e.b([window],"resize",(function(e){return t.onResize(e)}))}},{key:"alignCells",value:function(t){var e=this,n=t.className.match(/\b[lcr]\d\d?\b/g);if(n)for(var i=function(i){e.app.e(e.app.qq("tr>*:nth-child("+n[i].substr(1)+")",t),(function(t){return t.classList.add(n[i].substr(0,1))}))},o=0;o<n.length;o++)i(o)}},{key:"store",value:function(t,e){t&&(t.id||t.name)&&t.classList.contains(this.opt.cMem)&&localStorage.setItem("set#"+(t.id||"#"+t.name),e)}},{key:"restore",value:function(t){if(t&&(t.id||t.name)&&t.classList&&t.classList.contains(this.opt.cMem)){var e=localStorage.getItem("set#"+(t.id||"#"+t.name));if(null!==e){var n=t.tagName;"A"==n?t.classList[e?"add":"remove"](this.app.opt.cAct):"SELECT"==n?t.value=e:"checkbox"==t.type?t.checked=!!e:"radio"==t.type&&(t.checked=t.value==e)}}}},{key:"setClass",value:function(t,e,n,i){this.app.dbg(["setclass",n,i]);var o="radio"==t.type||"SELECT"==t.tagName,r=o?null:t.dataset[this.opt.dUnset],a=t.dataset[this.opt.dAttr]||"class";if("class"!==a){var s=e?i:r||"";s?n.setAttribute(a,s):n.removeAttribute(a)}else null!=r?n.className=e?i:r||"":(o&&("radio"==t.type?this.app.qq('input[type="radio"][name="'+t.name+'"]').map((function(t){return t.value})).join(" "):this.app.qq("option",t).map((function(t){return t.value})).join(" ")).split(/\s+/).filter((function(t){return t})).forEach((function(t){return n.classList.remove(t)})),i.split(/\s+/).filter((function(t){return t})).forEach((function(t){return n.classList[e?"add":"remove"](t)})));t.classList[e?"add":"remove"](this.app.opt.cAct),this.store(t,o?t.value:("checkbox"==t.type?t.checked:t.classList.contains(this.app.opt.cAct))?"1":"")}},{key:"toggleClass",value:function(t,e){var n=this;if("radio"!=t.type||t.checked){var i="checkbox"==t.type||"radio"==t.type,o="SELECT"==t.tagName||"radio"==t.type,r=t.dataset[this.opt.dNodes]||t.hash,a=o?t.value:t.dataset[this.opt.dSet],s=!!o||(i?t.checked:t.classList.contains(this.app.opt.cAct));!e||i||o||(s=!s,e.preventDefault(),e.stopPropagation()),null!=a&&(this.app.e(r,(function(e){return n.setClass(t,s,e,a)})),this.app.fire("update",{q:r}))}}},{key:"smartHeading",value:function(t){for(var e=this.app.ins("div","",{});t.firstChild;)e.appendChild(t.firstChild);t.appendChild(e),e.style.position="relative",e.style.paddingRight="1em",this.app.ins(""," ",{},e),this.app.ins("a","#",{href:"#"+t.id,className:"small text-n inact  hide-print"},e),this.app.ins("a",this.app.i("asc","&uarr;"),{href:"#",className:"small close text-n inact hide-print"},e)}},{key:"onResize",value:function(){window.innerWidth<=this.opt.minDesktop?this.app.e("[data-class-mobile]",(function(t){return t.className=t.dataset.classMobile||""})):this.app.e("[data-class-desktop]",(function(t){return t.className=t.dataset.classDesktop||""}))}}])&&yt(e.prototype,n),i&&yt(e,i),r}(o.a);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=zt(t);if(e){var o=zt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return xt(this,n)}}function xt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! form - utilities for form inputs */var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(r,t);var e,n,i,o=Ct(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"form")).opt={},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.e('input[type="color"]',(function(e){return t.prepareColor(e)})),this.app.h("click",'a[href^="#"][data-value]',(function(e){e.preventDefault(),t.setValue(e.recv)})),this.app.h("click","input[data-group]",(function(e){return t.checkBoxes(e.target)}))}},{key:"checkBoxes",value:function(t){this.app.e(this.app.qq('input[type="checkbox"][class~="'+(t.dataset.group||"")+'"]',t.form),(function(e){return e.checked=t.checked}))}},{key:"setValue",value:function(t){var e=this.app.q(t.hash);e&&(e.value=t.dataset.value||"",this.app.pf("toggle","unpop",e,!0))}},{key:"prepareColor",value:function(t){var e=this.app.ins("input","",{type:"text",value:t.value,size:7,className:"color"},t,-1);this.app.ins(""," ",{},e,1),this.app.b([t,e],"input",(function(n){return(n.target==t?e:t).value=n.target.value}))}}])&&St(e.prototype,n),i&&St(e,i),r}(o.a);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Lt(t);if(e){var o=Lt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! keepform - store and restore user input */var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(r,t);var e,n,i,o=Mt(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"keepform")).opt={qStore:"form.store[id]",qRestore:"form.restore[id]"},t}return e=r,(n=[{key:"init",value:function(){var t=this;if(Object.fromEntries&&FormData){var e=this.app,n=this.opt.qStore;e.e(n,(function(e){return t.addControls(e)})),e.e(this.opt.qRestore,(function(e){return t.restoreForm(e,!0)})),e.h(["change","input"],n,(function(e){return t.store(e)})),e.h("click",n+' a[href="#restore"]',(function(e){return t.restore(e)})),e.h("click",n+' a[href="#reset"]',(function(e){return t.reset(e)})),e.h("click",n+' a[href="#unstore"]',(function(e){return t.unstore(e)}))}}},{key:"addControls",value:function(t){var e=this.app,n=e.ins("div","",{className:"pad r keepform-tools"},t,!1);e.ins("a",e.i("energy","[^]"),{href:"#restore"},n),e.ins(""," ",{},n),e.ins("a",e.i("refresh","[-]"),{href:"#reset"},n),e.ins(""," ",{},n),e.ins("a",e.i("ban","[x]"),{href:"#unstore"},n)}},{key:"reset",value:function(t){var e=this;t.preventDefault();var n=t.target.closest("form");n.reset(),this.app.e(this.app.qq("[name]",n),(function(t){return e.app.fire("value",{n:t})}))}},{key:"unstore",value:function(t){t.preventDefault(),localStorage.removeItem(this.formId(t.target.closest("form")))}},{key:"restore",value:function(t){t.preventDefault(),this.restoreForm(t.target.closest("form"))}},{key:"restoreForm",value:function(t,e){var n=this,i=this.formId(t),o=localStorage.getItem(i);o&&(o=this.app.parse(o))&&Object.keys(o).forEach((function(i){var r=t.elements[i];r&&n.restoreInput(r,o[i],e)}))}},{key:"restoreInput",value:function(t,e,n){var i=this;t instanceof NodeList?t.forEach((function(t){return i.restoreInput(t,e,n)})):(t.type.match(/file|submit|password/)||(t.type.match(/checkbox|radio/)?t.checked=Array.isArray(e)?-1!=e.indexOf(t.value):t.value===e:t.value=e),this.app.fire("value",{n:t,modeAuto:n}))}},{key:"store",value:function(t){var e=new FormData(t.recv),n={};e.forEach((function(t,e){n.hasOwnProperty(e)?(Array.isArray(n[e])||(n[e]=[n[e]]),n[e].push(t)):n[e]=t})),localStorage.setItem(this.formId(t.recv),JSON.stringify(n))}},{key:"formId",value:function(t){return"form#"+t.id+"@"+location.pathname}}])&&Nt(e.prototype,n),i&&Nt(e,i),r}(o.a);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ft(t);if(e){var o=Ft(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ht(this,n)}}function Ht(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! items - copy, hide, delete items */var Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(r,t);var e,n,i,o=It(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"items")).opt={dItem:"item",qItem:".item"},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.h("click",'a[href^="#"]',(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(t){var e=t.recv;if(e&&e.hash){var n=e.dataset[this.opt.dItem],i=n?this.app.q(n):t.target.closest(this.opt.qItem);if(i){var o=i.parentNode;this.process(i,e.hash.substr(1),!!n)&&(this.app.fire("update",{n:o}),t.preventDefault(),t.stopPropagation())}}}},{key:"items",value:function(t){var e=this;return this.app.a(t.children).filter((function(t){return t.matches(e.opt.qItem)})).filter((function(t){return!t.classList.contains(e.app.opt.cHide)}))}},{key:"process",value:function(t,e,n){var i=this;if(-1==["copy","del","delete","delall","clear","hide"].indexOf(e))return!1;this.app.fire("beforeitem",{n:t,a:e});var o={n:t,a:e};if("copy"==e){void 0===n&&(n=t.classList.contains(this.app.opt.cHide));var r=t.parentNode.insertBefore(t.cloneNode(!0),n?t:t.nextSibling);r.classList.remove(this.app.opt.cHide),r.removeAttribute("id"),this.app.e(this.app.qq("[id]",r),(function(t){return i.fixId(t,r)})),o.p=o.n,o.n=r}else"del"==e?(o.p=t.parentNode,this.items(t.parentNode).length>1&&t.parentNode.removeChild(t)):"delete"==e?(o.p=t.parentNode,t.parentNode.removeChild(t)):"delall"==e?this.items(t).forEach((function(t){return t.parentNode.removeChild(t)})):"clear"==e?this.app.clr(t):"hide"==e&&t.classList.add(this.app.opt.cHide);return this.app.fire("afteritem",o),!0}},{key:"fixId",value:function(t,e){var n=t.id,i=t.id.replace(/-\d+$/,"")+"-"+this.app.seq();t.id=i,this.app.e(this.app.qq('a[href="#'+n+'"]',e),(function(t){return t.href="#"+i}))}}])&&Et(e.prototype,n),i&&Et(e,i),r}(o.a);function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=$t(t);if(e){var o=$t(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Gt(this,n)}}function Gt(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! filter - filter items */var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(r,t);var e,n,i,o=Yt(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"filter")).opt={qFilter:".filters",qItem:".item",dFilter:"filter",cMem:"mem"},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.e(this.opt.qFilter,(function(e){return t.prepare(e)})),this.app.h("click","a[data-"+this.opt.dFilter+"]",(function(e){return t.applyControl(e.recv)})),this.app.h("input",":not(a)[data-"+this.opt.dFilter+"]",(function(e){return t.applyControl(e.recv)}))}},{key:"prepare",value:function(t){t.vInit={},this.forAttrs(t,(function(e,n){return t.vInit[n]=t.dataset[e]})),this.restore(t),this.apply(t)}},{key:"applyControl",value:function(t){var e=t.closest(this.opt.qFilter),n=(t.dataset[this.opt.dFilter]||"").split(/=/,2);if(e)if(n[0]){var i=this.opt.dFilter+"_"+n[0],o=("SELECT"==t.tagName?t.value:n[1])||"";if("+"==o.substr(0,1)&&o.length>1){o=o.substr(1);var r=(e.dataset[i]||"").split(/;/),a=r.indexOf(o);-1==a?r.push(o):delete r[a],o=r.filter((function(t,e,n){return""!==t&&n.indexOf(t)===e})).join(";")}e.dataset[i]=o,this.apply(e)}else this.reset(e)}},{key:"apply",value:function(t){var e=this,n={};this.forAttrs(t,(function(e,i){return t.dataset[e].length>0?n[i]=t.dataset[e].split(/;/):null})),this.app.dbg(["filter",t,n]),this.app.e(this.app.qq(this.opt.qItem,t),(function(t){return t.classList[e.match(t,n)?"remove":"add"](e.app.opt.cHide)})),this.app.e(this.app.qq("[data-"+this.opt.dFilter+"]",t),(function(t){return e.setUsed(t,n)})),this.store(t,n),this.app.fire("update",{n:t})}},{key:"match",value:function(t,e){var n=!0;return Object.keys(e).forEach((function(i){return e[i]&&e[i].length>0&&-1==e[i].indexOf(t.dataset[i]||"")?n=!1:null})),n}},{key:"setUsed",value:function(t,e){var n=this.used(t,e);"A"==t.tagName?t.classList[n?"add":"remove"](this.app.opt.cAct):"checkbox"==t.type||"radio"==t.type?t.checked=n:"SELECT"==t.tagName&&(t.value=(e[t.dataset[this.opt.dFilter]||""]||[""])[0])}},{key:"used",value:function(t,e){var n=(t.dataset[this.opt.dFilter]||"").split(/=\+?/,2);return n[0]&&!e[n[0]]&&!n[1]||e[n[0]]&&e[n[0]].length>0&&-1!=e[n[0]].indexOf(n[1])}},{key:"store",value:function(t,e){t.id&&t.classList.contains(this.opt.cMem)&&localStorage.setItem("filter-"+t.id,JSON.stringify(e))}},{key:"restore",value:function(t){var e=this;if(t.id&&t.classList.contains(this.opt.cMem)){var n=localStorage.getItem("filter-"+t.id);n&&(this.app.e(this.app.qq("[data-"+this.opt.dFilter+"]",t),(function(n){var i=(n.dataset[e.opt.dFilter]||"").split(/=/);i[0]&&((i=e.opt.dFilter+"_"+i[0])in t.dataset||(t.dataset[i]=""))})),(n=this.app.parse(n))&&this.forAttrs(t,(function(e,i){return t.dataset[e]=(n[i]||[]).join(";")})))}}},{key:"reset",value:function(t){this.forAttrs(t,(function(e,n){return n in t.vInit?t.dataset[e]=t.vInit[n]||"":delete t.dataset[e.name]})),this.apply(t)}},{key:"forAttrs",value:function(t,e){var n=this,i=this.opt.dFilter.length;Object.keys(t.dataset).forEach((function(t){return t.substr(0,i)==n.opt.dFilter?e(t,t.substr(i+1)):null}))}}])&&Bt(e.prototype,n),i&&Bt(e,i),r}(o.a);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ee(t);if(e){var o=ee(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return te(this,n)}}function te(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! fliptable - responsive table */var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(r,t);var e,n,i,o=Qt(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"fliptable")).opt={qFlipTable:"table.flip"},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.app.e(this.opt.qFlipTable,(function(e){return e.closest("form")?null:t.prepareFlipTable(e)}))}},{key:"prepareFlipTable",value:function(t){for(var e=this.app.qq("thead th",t),n=this.app.qq("tbody tr>*, tfoot tr>*",t),i=0;i<n.length;i++){var o=n[i],r=e[o.cellIndex],a=this.app.ins("div","",{className:"row"});r&&this.app.ins("div",r.textContent,{className:"hide-desktop"},a);for(var s=this.app.ins("div","",{},a);o.firstChild;)s.appendChild(o.firstChild);o.textContent="",o.appendChild(a)}this.app.e(this.app.qq("thead",t),(function(t){return t.classList.add("hide-mobile")}))}}])&&Kt(e.prototype,n),i&&Kt(e,i),r}(o.a);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return se(this,n)}}function se(t,e){return!e||"object"!==ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! swipe - detect touch swipe */var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(r,t);var e,n,i,o=ae(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"swipe")).moved=null,t.c={},t.opt={qSwipe:".swipe",qDrag:".drag",qKeepDrag:".drawer",cDragging:"dragging",maxClick:20,minSwipe:50},t}return e=r,(n=[{key:"init",value:function(){var t=this;this.drag_=this.app.throttle((function(e){return t.drag(e)}),30),this.app.b([document],["mousedown","touchstart"],(function(e){return t.onStart(e)})),this.app.b([document],["mousemove","touchmove"],(function(e){return t.onMove(e)})),this.app.b([document],["click","mouseleave","touchend","touchcancel"],(function(e){return t.onEnd(e)}),!0)}},{key:"onStart",value:function(t){if(t.button>0)this.moved=null;else if(this.moved=t.target.closest(this.opt.qSwipe),this.moved){var e=t.touches?t.touches[0]:t;this.c.sX=this.c.eX=e.screenX,this.c.sY=this.c.eY=e.screenY}}},{key:"onMove",value:function(t){this.moved&&(t.preventDefault(),this.drag_(t))}},{key:"drag",value:function(t){var e=t.touches?t.touches[0]:t;if(this.c.eX=e.screenX,this.c.eY=e.screenY,this.moved&&this.moved.matches(this.opt.qDrag)){var n=this.shift();this.moved.style.transform="translate("+n[0]+"px, "+n[1]+"px)",this.moved.classList.add(this.opt.cDragging)}}},{key:"onEnd",value:function(t){if(this.moved){var e="mouseleave"==t.type||"touchcancel"==t.type;if(!e&&this.moved.matches(this.opt.qKeepDrag)||this.undrag(),!e){var n=this.shift();n[2]&&(this.app.fire("swipe",{n:this.moved,x:n[0],y:n[1],dir:n[2]}),t.preventDefault())}this.moved.classList.remove(this.opt.cDragging),this.moved=null}}},{key:"shift",value:function(){var t=this.moved.dataset.swipe||"1234",e=this.c.eX-this.c.sX,n=this.c.eY-this.c.sY,i=Math.abs(e),o=Math.abs(n),r=[0,0,0];return(i>=this.opt.minSwipe||o>=this.opt.minSwipe)&&(r=i>o?[e,0,e>0?2:4]:[0,n,n>0?3:1]),-1===t.indexOf(r[2])&&(r=[0,0,0]),r}},{key:"undrag",value:function(t){t||(t=this.moved),t.style.transform=""}}])&&oe(e.prototype,n),i&&oe(e,i),r}(o.a);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ve(this,n)}}function ve(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! scroll - scrolling behaviours (topbar, drawer) */var ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(r,t);var e,n,i,o=fe(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"scroll")).y=null,t.opt={qHideOnScroll:"",cStart:"shade",qTopbar:".topbar.toggle",qEnable:".topbar"},t}return e=r,(n=[{key:"init",value:function(){var t=this;if(this.app.q(this.opt.qEnable)){this.app.listen("hashchange",(function(e){return t.onHash(e)}));var e=this.app.throttle((function(){return t.onScroll()}),500);setTimeout((function(){return t.onScroll()}),20),this.app.b([window],"scroll",(function(t){return e()}))}}},{key:"onHash",value:function(t){this.app.dbg(["scroll hash",location.hash,t,document.body.scrollHeight]),t&&location.hash&&this.app.q(location.hash)&&(this.y=document.body.scrollHeight+10,this.onScroll())}},{key:"onScroll",value:function(){var t=this,e=null===window.scrollY?null:window.scrollY-this.y;this.app.dbg(["scroll",window.scrollY,e]),null!==this.y&&(this.opt.qTopbar&&this.app.e(this.opt.qTopbar,(function(n){return t.decorate(n,window.scrollY,e)})),this.opt.qHideOnScroll&&this.app.e(this.opt.qHideOnScroll,(function(e){return t.app.toggle(e,!1)}))),this.y=window.scrollY}},{key:"decorate",value:function(t,e,n){t.classList[n>0&&e>t.offsetHeight?"add":"remove"](this.app.opt.cOff),t.classList[e&&n<=0?"add":"remove"](this.opt.cStart)}}])&&pe(e.prototype,n),i&&pe(e,i),r}(o.a);function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Oe(t);if(e){var o=Oe(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}
/*! theme - live theme configurator */var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(r,t);var e,n,i,o=ke(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"theme")).drw=null,t.opt={cTheme:"js-theme",idTheme:"theme-config"},t}return e=r,(n=[{key:"init",value:function(){var t=this;if(document.body.classList.contains(this.opt.cTheme)){this.restore(document.documentElement,"theme-html");var e=this.app.ins("a","Theme",{href:"#"+this.opt.idTheme,className:"fix pad btn theme-btn hide-print"},document.body).style;e.transform="rotate(-90deg)",e.transformOrigin="100% 100%",e.top="10vh",e.right="-.2em",e.bottom=e.left="auto",e.margin=0,this.drw=this.app.ins("div","",{id:this.opt.idTheme,className:this.app.opt.cToggle+" "+this.app.opt.cOff+" drawer swipe drag pad small shift theme-drawer","data-swipe":"2"},document.body),this.app.ins("a","&#x2715;",{href:"#cancel",className:"pad hover close"},this.drw),this.hx("Theme",2),this.app.b([this.app.ins("a","Reset to default",{href:"#",className:""},this.drw)],"click",(function(e){return t.unstyle(e)})),this.put("Background",["#fff","#eee","#ffeee6","#ffe","#efe","#e6fcf9","#e3eeff","#f9e9ff"],"--bg"),this.put("Menu",["rgba(255,255,255,0)","rgba(0,0,0,.1)","hsla(1,100%,55%,.3)","hsla(45,100%,50%,.3)","hsla(120,100%,35%,.3)","hsla(180,100%,35%,.3)","hsla(220,100%,55%,.3)","hsla(290,100%,50%,.3)"],["--bg-pane","--bg-hilite"]),this.put("Links",["#000","#777","#c00","#c60","#090","#088","#00c","#909"],["--link","--visited","--hover"]),this.put("Text",["#000","#222","#444","#555","#666","#777","#888","#999"],"--text"),this.put("Font",this.opt.fonts||["sans-serif","serif","monospace"],"--font"),this.put("Gaps",["0.5","0.7","1","1.2","1.5"],"--gap")}}},{key:"restore",value:function(t,e){var n=localStorage.getItem(e);n&&(t.style=n)}},{key:"style",value:function(t,e,n){var i=this;if(t instanceof Array)t.forEach((function(t){return i.style(t,e,1)}));else{var o=document.documentElement;o.style.setProperty(t,e),localStorage.setItem("theme-"+o.tagName.toLowerCase(),o.style.cssText)}}},{key:"unstyle",value:function(t){t.preventDefault();for(var e=document.documentElement.style,n=e.length;n--;)e.removeProperty(e[n]);localStorage.removeItem("theme-html")}},{key:"hx",value:function(t,e){this.app.ins("h"+(e||1),t,{className:"mar"},this.drw)}},{key:"put",value:function(t,e,n){var i=this;this.hx(t,3);var o=[];e.forEach((function(t){var e=t.match(/[#(]/),r=i.app.ins("a",e?"":t,{href:"#",title:t,className:e?"pad hover bord":"pad hover"},i.drw);e?r.style.backgroundColor=t:"string"==typeof n&&(r.style[n]=t),o.push(r)})),this.app.b(o,"click",n instanceof Function?n:function(t){t.preventDefault(),i.style(n,t.target.title)})}}])&&be(e.prototype,n),i&&be(e,i),r}(o.a),qe=new i.a;qe.plug(p),qe.plug(k),qe.plug(w.a),qe.plug(O.a),qe.plug(S.a),qe.plug(N),qe.plug(H),qe.plug(G),qe.plug(tt),qe.plug(st),qe.plug(vt),qe.plug(wt),qe.plug(Pt),qe.plug(Dt),qe.plug(Ut),qe.plug(Xt),qe.plug(ne),qe.plug(ue),qe.plug(ye),qe.plug(Se),qe.b([document],"DOMContentLoaded",(function(t){return qe.init()})),window&&(window.d1=qe)}]);